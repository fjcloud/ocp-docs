

<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  
  
  <title>Container image signatures - Container security | Security and compliance | Azure Red Hat OpenShift Branch Build</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css"/>
  <link href="https://docs.okd.io/latest/_stylesheets/search.css" rel="stylesheet" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/autumn.css" rel="stylesheet"  media="screen"/>
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png"/>
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css"/>
  <link href="https://assets.openshift.net/content/osh-nav-footer.css" rel="stylesheet" type="text/css" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/docs.css" rel="stylesheet"  media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/>
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">

  <!-- Adobe DTM -->
  <script src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <!-- End Adobe DTM -->

  <script id="trustarc" src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
        rel="stylesheet">

</head>

<body onload="selectVersion('Branch Build');">
  
<nav id="main">
  <div class="container">
    <div class="row">
      <div class="navbar navbar-default navbar-openshift" role="navigation">
        <div class="navbar-header">
            <a href="#nav-main" class="dropdown-toggle navbar-menu-toggle hidden visible-xs" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          <a class="navbar-brand" href="/"></a>
        </div>
        <div id="nav-main" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="products" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                Products <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-column flex-md-row">
                  <div class="col-xs-12 col-sm-3">
                    <h3>Overview</h3>
                    <ul class="nav flex-column">
                      <li><a target="_blank" href="https://www.openshift.com/products/features/">Features</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/products/pricing/">Pricing</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-9">
                    <h3>Featured Products</h3>
                    <ul class="nav">
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/container-platform/">Red Hat OpenShift Container&nbsp;Platform</a>
                        <p class="d-none d-md-block">Build, deploy and manage your applications across cloud- and on-premise infrastructure</p>
                      </li>
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/dedicated/">Red Hat OpenShift Dedicated</a>
                        <p class="d-none d-md-block">Single-tenant, high-availability Kubernetes clusters in the public cloud</p>
                      </li>

                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/online/">Red Hat OpenShift Online</a>
                        <p class="d-none d-md-block">The fastest way for developers to build, host and scale applications in the public cloud</p>
                      </li>

                      <li class="nav-item">
                        <a target="_blank" href="https://www.openshift.com/products/">All products <span class="fa fa-angle-right"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li id="learn" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Learn <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-md-nowrap">
                  <div class="col-xs-12 col-sm-6">
                    <h3>Learn</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/what-is-openshift/">What is OpenShift</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/get-started/">Get started</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/partners/">Partners</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/success-stories/">Customer success stories</a></li>
                      <li><a target="_blank" href="https://blog.openshift.com">Blog</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/resources/">Resources</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <h3>Technology Topics</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/knative/">Knative</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/security/">Security</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/kubernetes/">Kubernetes</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/service-brokers/">Service Brokers</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Community <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://commons.openshift.org">OpenShift Commons</a></li>
                <li><a target="_blank" href="https://www.okd.io">Open Source (OKD)</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/startups/">Startups</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/grants/">Grants</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Support <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://help.openshift.com">Help Center</a></li>
                <li><a href="https://docs.openshift.com">OpenShift Docs</a></li>
              </ul>
            </li>

            <li><a target="_blank" class="nav-sign-up" href="https://www.openshift.com/trial/">Free Trial</a></li>

            <li><a target="_blank" href="https://console.redhat.com/openshift" class="nav-sign-in">Log In <span class="fa fa-angle-right"></span></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

  
  <div class="container">
    <button id="hc-open-btn" class="open-btn-sm" onclick="openNav()" aria-label="Open"><span class="fa fa-bars" /></button>
    <ol class="breadcrumb hide-for-print">
      
      <span>
        <div class="alert alert-info" role="primary" id="support-info">
          <strong>Starting on March 12, 2025, OpenShift docs will only be available at <a href="https://docs.redhat.com/en/" style="color: #0C5460 !important" class="link-primary">docs.redhat.com</a>. From that time on, docs.openshift.com links will automatically redirect to their locations on docs.redhat.com.
          </strong>
        </div>
      </span>
      

      

      

      

      

      

      

      
      

      

      


      

      


      

      

      <li class="sitename">
        <a href="/">
          Documentation</a>
      </li>
      <li class="hidden-xs active">
        
          <a href="../../security/index.html">Azure Red Hat OpenShift Branch Build</a>
        
      </li>
      <li class="hidden-xs active">
        <a href="../../security/index.html">Security and compliance</a>
      </li>
      <li class="hidden-xs active"><a href="../../security/container_security/security-understanding.html">Container security</a></li>
      
      <li class="hidden-xs active">
        Container image signatures
      </li>
      
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas hide-for-print">
        <div class="row-fluid">
          <div id="btn-close">
            <button id="hc-close-btn" onclick="closeNav()" class="close-btn-sm" aria-label="close"><span class="fa fa-times" /></button>
          </div>
          <div id="hc-search">
            <input id="hc-search-input" type="text" aria-label="search">
            <button id="hc-search-btn" aria-label="search"><span class="fa fa-search" /></button>
          </div>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0"><span id="tgSpan0" class="fa fa-angle-down"></span>Security and compliance</a>
      <ul id="topicGroup0" class="collapse in list-unstyled">
            <li><a class="" href="../../security/index.html">Security and compliance overview</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-1"><span id="sgSpan-0-1" class="fa fa-caret-down"></span>&nbsp;Container security</a>
              <ul id="topicSubGroup-0-1" class="nav-tertiary list-unstyled collapse in">

                  <li><a class="" href="../../security/container_security/security-understanding.html">Understanding container security</a></li>
                  <li><a class="" href="../../security/container_security/security-hosts-vms.html">Understanding host and VM security</a></li>
                  <li><a class="" href="../../security/container_security/security-hardening.html">Hardening Red Hat Enterprise Linux CoreOS</a></li>
                  <li><a class=" active" href="../../security/container_security/security-container-signature.html">Container image signatures</a></li>
                  <li><a class="" href="../../security/container_security/security-compliance.html">Understanding compliance</a></li>
                  <li><a class="" href="../../security/container_security/security-container-content.html">Securing container content</a></li>
                  <li><a class="" href="../../security/container_security/security-registries.html">Using container registries securely</a></li>
                  <li><a class="" href="../../security/container_security/security-build.html">Securing the build process</a></li>
                  <li><a class="" href="../../security/container_security/security-deploy.html">Deploying containers</a></li>
                  <li><a class="" href="../../security/container_security/security-platform.html">Securing the container platform</a></li>
                  <li><a class="" href="../../security/container_security/security-network.html">Securing networks</a></li>
                  <li><a class="" href="../../security/container_security/security-storage.html">Securing attached storage</a></li>
                  <li><a class="" href="../../security/container_security/security-monitoring.html">Monitoring cluster events and logs</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-2"><span id="sgSpan-0-2" class="fa fa-caret-right"></span>&nbsp;Compliance Operator</a>
              <ul id="topicSubGroup-0-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../security/compliance_operator/co-overview.html">Compliance Operator overview</a></li>
                  <li><a class="" href="../../security/compliance_operator/compliance-operator-release-notes.html">Compliance Operator release notes</a></li>
                  <li><a class="" href="../../security/compliance_operator/co-support.html">Compliance Operator support</a></li>
                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-3"><span id="ssgSpan-0-2-3" class="fa fa-caret-right"></span>&nbsp;Compliance Operator concepts</a>
                  <ul id="topicSubSubGroup-0-2-3" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../security/compliance_operator/co-concepts/compliance-operator-understanding.html" style="padding-left: 70px;">Understanding the Compliance Operator</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-concepts/compliance-operator-crd.html" style="padding-left: 70px;">Understanding the Custom Resource Definitions</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-4"><span id="ssgSpan-0-2-4" class="fa fa-caret-right"></span>&nbsp;Compliance Operator management</a>
                  <ul id="topicSubSubGroup-0-2-4" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../security/compliance_operator/co-management/compliance-operator-installation.html" style="padding-left: 70px;">Installing the Compliance Operator</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-management/compliance-operator-updating.html" style="padding-left: 70px;">Updating the Compliance Operator</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-management/compliance-operator-manage.html" style="padding-left: 70px;">Managing the Compliance Operator</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-management/compliance-operator-uninstallation.html" style="padding-left: 70px;">Uninstalling the Compliance Operator</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-5"><span id="ssgSpan-0-2-5" class="fa fa-caret-right"></span>&nbsp;Compliance Operator scan management</a>
                  <ul id="topicSubSubGroup-0-2-5" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../security/compliance_operator/co-scans/compliance-operator-supported-profiles.html" style="padding-left: 70px;">Supported compliance profiles</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-scans/compliance-scans.html" style="padding-left: 70px;">Compliance Operator scans</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-scans/compliance-operator-tailor.html" style="padding-left: 70px;">Tailoring the Compliance Operator</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-scans/compliance-operator-raw-results.html" style="padding-left: 70px;">Retrieving Compliance Operator raw results</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-scans/compliance-operator-remediation.html" style="padding-left: 70px;">Managing Compliance Operator remediation</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-scans/compliance-operator-advanced.html" style="padding-left: 70px;">Performing advanced Compliance Operator tasks</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-scans/compliance-operator-troubleshooting.html" style="padding-left: 70px;">Troubleshooting Compliance Operator scans</a></li>
                    <li><a class="" href="../../security/compliance_operator/co-scans/oc-compliance-plug-in-using.html" style="padding-left: 70px;">Using the oc-compliance plugin</a></li>                  </ul>
                  </li>
              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-3"><span id="sgSpan-0-3" class="fa fa-caret-right"></span>&nbsp;File Integrity Operator</a>
              <ul id="topicSubGroup-0-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../security/file_integrity_operator/fio-overview.html">File Integrity Operator Overview</a></li>
                  <li><a class="" href="../../security/file_integrity_operator/file-integrity-operator-release-notes.html">File Integrity Operator release notes</a></li>
                  <li><a class="" href="../../security/file_integrity_operator/fio-support.html">File Integrity Operator support</a></li>
                  <li><a class="" href="../../security/file_integrity_operator/file-integrity-operator-installation.html">Installing the File Integrity Operator</a></li>
                  <li><a class="" href="../../security/file_integrity_operator/file-integrity-operator-updating.html">Updating the File Integrity Operator</a></li>
                  <li><a class="" href="../../security/file_integrity_operator/file-integrity-operator-understanding.html">Understanding the File Integrity Operator</a></li>
                  <li><a class="" href="../../security/file_integrity_operator/file-integrity-operator-configuring.html">Configuring the File Integrity Operator</a></li>
                  <li><a class="" href="../../security/file_integrity_operator/file-integrity-operator-advanced-usage.html">Performing advanced File Integrity Operator tasks</a></li>
                  <li><a class="" href="../../security/file_integrity_operator/file-integrity-operator-troubleshooting.html">Troubleshooting the File Integrity Operator</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-4"><span id="sgSpan-0-4" class="fa fa-caret-right"></span>&nbsp;Security Profiles Operator</a>
              <ul id="topicSubGroup-0-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../security/security_profiles_operator/spo-overview.html">Security Profiles Operator overview</a></li>
                  <li><a class="" href="../../security/security_profiles_operator/spo-release-notes.html">Security Profiles Operator release notes</a></li>
                  <li><a class="" href="../../security/security_profiles_operator/spo-support.html">Security Profiles Operator support</a></li>
                  <li><a class="" href="../../security/security_profiles_operator/spo-understanding.html">Understanding the Security Profiles Operator</a></li>
                  <li><a class="" href="../../security/security_profiles_operator/spo-enabling.html">Enabling the Security Profiles Operator</a></li>
                  <li><a class="" href="../../security/security_profiles_operator/spo-seccomp.html">Managing seccomp profiles</a></li>
                  <li><a class="" href="../../security/security_profiles_operator/spo-selinux.html">Managing SELinux profiles</a></li>
                  <li><a class="" href="../../security/security_profiles_operator/spo-advanced.html">Advanced Security Profiles Operator tasks</a></li>
                  <li><a class="" href="../../security/security_profiles_operator/spo-troubleshooting.html">Troubleshooting the Security Profiles Operator</a></li>
                  <li><a class="" href="../../security/security_profiles_operator/spo-uninstalling.html">Uninstalling the Security Profiles Operator</a></li>              </ul>
            </li>
            <li><a class="" href="../../security/audit-log-view.html">Viewing audit logs</a></li>
            <li><a class="" href="../../security/audit-log-policy-config.html">Configuring the audit log policy</a></li>
            <li><a class="" href="../../security/tls-security-profiles.html">Configuring TLS security profiles</a></li>
            <li><a class="" href="../../security/seccomp-profiles.html">Configuring seccomp profiles</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-9"><span id="sgSpan-0-9" class="fa fa-caret-right"></span>&nbsp;Network-Bound Disk Encryption (NBDE)</a>
              <ul id="topicSubGroup-0-9" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../security/network_bound_disk_encryption/nbde-about-disk-encryption-technology.html">About disk encryption technology</a></li>
                  <li><a class="" href="../../security/network_bound_disk_encryption/nbde-tang-server-installation-considerations.html">Tang server installation considerations</a></li>
                  <li><a class="" href="../../security/network_bound_disk_encryption/nbde-managing-encryption-keys.html">Tang server encryption key management</a></li>              </ul>
            </li>
      </ul>
    </li>
</ul>
      </div>
      <div id="hc-search-modal">
        <div id="hc-modal-content">
          <span id="hc-modal-close">&times;</span>
          <div id="hc-search-results-wrapper">
            <div id="hc-search-results"></div>
            <div id="hc-search-progress-indicator" class="text-center search-progress-indicator"><i class="fa fa-circle-o-notch fa-spin" style="font-size:42px"></i></div>
            <div class="text-center">
              <button id="hc-search-more-btn">Show more results</button>
            </div>
          </div>
        </div>
      </div>
      <div class="print-logo" style="display:none;">
        <img src="https://www.redhat.com/cms/managed-files/Logo-Red_Hat-OpenShift-A-Standard-RGB_0_0.svg" alt="print logo"/>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h1>
            Container image signatures
          </h1>
        </div>
        
        
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#containers-signature-verify-enable_security-container-signature">Enabling signature verification for Red Hat Container Registries</a></li>
<li><a href="#containers-signature-verify-application_security-container-signature">Verifying the signature verification configuration</a></li>
<li><a href="#containers-signature-verify-artifacts_security-container-signature">Understanding the verification of container images lacking verifiable signatures</a>
<ul class="sectlevel2">
<li><a href="#containers-signature-verification-automatic_security-container-signature">Automated verification during updates</a></li>
<li><a href="#containers-signature-verify-skopeo_security-container-signature">Using skopeo to verify signatures of Red Hat container images</a></li>
</ul>
</li>
<li><a href="#additional-resources_security-container-signature">Additional resources</a></li>
</ul>
</div>
<div class="paragraph">
<p>Red Hat delivers signatures for the images in the Red Hat Container Registries. Those signatures can be automatically verified when being pulled to Azure Red Hat OpenShift 4 clusters by using the Machine Config Operator (MCO).</p>
</div>
<div class="paragraph">
<p><a href="https://quay.io/">Quay.io</a> serves most of the images that make up Azure Red Hat OpenShift, and only the release image is signed. Release images refer to the approved Azure Red Hat OpenShift images, offering a degree of protection against supply chain attacks. However, some extensions to Azure Red Hat OpenShift, such as logging, monitoring, and service mesh, are shipped as Operators from the Operator Lifecycle Manager (OLM). Those images ship from the <a href="https://catalog.redhat.com/software/containers/explore">Red Hat Ecosystem Catalog Container images</a> registry.</p>
</div>
<div class="paragraph">
<p>To verify the integrity of those images between Red Hat registries and your infrastructure, enable signature verification.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="containers-signature-verify-enable_security-container-signature"><a class="anchor" href="#containers-signature-verify-enable_security-container-signature"></a>Enabling signature verification for Red Hat Container Registries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Enabling container signature validation for Red Hat Container Registries requires writing a signature verification policy file specifying the keys to verify images from these registries. For RHEL8 nodes, the registries are already defined in <code>/etc/containers/registries.d</code> by default.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a Butane config file, <code>51-worker-rh-registry-trust.bu</code>, containing the necessary configuration for the worker nodes.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>See "Creating machine configs with Butane" for information about Butane.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">variant</span><span class="pi">:</span> <span class="s">openshift</span>
<span class="na">version</span><span class="pi">:</span> <span class="s">Branch Build.0</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">51-worker-rh-registry-trust</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="s">machineconfiguration.openshift.io/role</span><span class="pi">:</span> <span class="s">worker</span>
<span class="na">storage</span><span class="pi">:</span>
  <span class="na">files</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/etc/containers/policy.json</span>
    <span class="na">mode</span><span class="pi">:</span> <span class="m">0644</span>
    <span class="na">overwrite</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">contents</span><span class="pi">:</span>
      <span class="na">inline</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="s">{</span>
          <span class="s">"default": [</span>
            <span class="s">{</span>
              <span class="s">"type": "insecureAcceptAnything"</span>
            <span class="s">}</span>
          <span class="s">],</span>
          <span class="s">"transports": {</span>
            <span class="s">"docker": {</span>
              <span class="s">"registry.access.redhat.com": [</span>
                <span class="s">{</span>
                  <span class="s">"type": "signedBy",</span>
                  <span class="s">"keyType": "GPGKeys",</span>
                  <span class="s">"keyPath": "/etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release"</span>
                <span class="s">}</span>
              <span class="s">],</span>
              <span class="s">"registry.redhat.io": [</span>
                <span class="s">{</span>
                  <span class="s">"type": "signedBy",</span>
                  <span class="s">"keyType": "GPGKeys",</span>
                  <span class="s">"keyPath": "/etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release"</span>
                <span class="s">}</span>
              <span class="s">]</span>
            <span class="s">},</span>
            <span class="s">"docker-daemon": {</span>
              <span class="s">"": [</span>
                <span class="s">{</span>
                  <span class="s">"type": "insecureAcceptAnything"</span>
                <span class="s">}</span>
              <span class="s">]</span>
            <span class="s">}</span>
          <span class="s">}</span>
        <span class="s">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Use Butane to generate a machine config YAML file, <code>51-worker-rh-registry-trust.yaml</code>, containing the file to be written to disk on the worker nodes:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>butane 51-worker-rh-registry-trust.bu <span class="nt">-o</span> 51-worker-rh-registry-trust.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>Apply the created machine config:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc apply <span class="nt">-f</span> 51-worker-rh-registry-trust.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>Check that the worker machine config pool has rolled out with the new machine config:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Check that the new machine config was created:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get mc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME                                               GENERATEDBYCONTROLLER                      IGNITIONVERSION   AGE
00-master                                          a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             25m
00-worker                                          a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             25m
01-master-container-runtime                        a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             25m
01-master-kubelet                                  a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             25m
01-worker-container-runtime                        a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             25m
01-worker-kubelet                                  a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             25m
51-master-rh-registry-trust                                                                   3.2.0             13s
51-worker-rh-registry-trust                                                                   3.2.0             53s <i class="conum" data-value="1"></i><b>(1)</b>
99-master-generated-crio-seccomp-use-default                                                  3.2.0             25m
99-master-generated-registries                     a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             25m
99-master-ssh                                                                                 3.2.0             28m
99-worker-generated-crio-seccomp-use-default                                                  3.2.0             25m
99-worker-generated-registries                     a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             25m
99-worker-ssh                                                                                 3.2.0             28m
rendered-master-af1e7ff78da0a9c851bab4be2777773b   a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             8s
rendered-master-cd51fd0c47e91812bfef2765c52ec7e6   a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             24m
rendered-worker-2b52f75684fbc711bd1652dd86fd0b82   a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             24m
rendered-worker-be3b3bce4f4aa52a62902304bac9da3c   a2178ad522c49ee330b0033bb5cb5ea132060b0a   3.2.0             48s <i class="conum" data-value="2"></i><b>(2)</b>
</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>New machine config</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>New rendered machine config</td>
</tr>
</table>
</div>
</li>
<li>
<p>Check that the worker machine config pool is updating with the new machine config:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get mcp</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME     CONFIG                                             UPDATED   UPDATING   DEGRADED   MACHINECOUNT   READYMACHINECOUNT   UPDATEDMACHINECOUNT   DEGRADEDMACHINECOUNT   AGE
master   rendered-master-af1e7ff78da0a9c851bab4be2777773b   True      False      False      3              3                   3                     0                      30m
worker   rendered-worker-be3b3bce4f4aa52a62902304bac9da3c   False     True       False      3              0                   0                     0                      30m <i class="conum" data-value="1"></i><b>(1)</b>
</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>When the <code>UPDATING</code> field is <code>True</code>, the machine config pool is updating with the new machine config. When the field becomes <code>False</code>, the worker machine config pool has rolled out to the new machine config.</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>If your cluster uses any RHEL7 worker nodes, when the worker machine config pool is updated, create YAML files on those nodes in the <code>/etc/containers/registries.d</code> directory, which specify the location of the detached signatures for a given registry server. The following example works only for images hosted in <code>registry.access.redhat.com</code> and <code>registry.redhat.io</code>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Start a debug session to each RHEL7 worker node:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc debug node/&lt;node_name&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Change your root directory to <code>/host</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">sh-4.2#</span><span class="w"> </span><span class="nb">chroot</span> /host</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>/etc/containers/registries.d/registry.redhat.io.yaml</code> file that contains the following:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">docker:
     registry.redhat.io:
         sigstore: https://registry.redhat.io/containers/sigstore</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>/etc/containers/registries.d/registry.access.redhat.com.yaml</code> file that contains the following:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">docker:
     registry.access.redhat.com:
         sigstore: https://access.redhat.com/webassets/docker/content/sigstore</span></code></pre>
</div>
</div>
</li>
<li>
<p>Exit the debug session.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="containers-signature-verify-application_security-container-signature"><a class="anchor" href="#containers-signature-verify-application_security-container-signature"></a>Verifying the signature verification configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you apply the machine configs to the cluster, the Machine Config Controller detects the new <code>MachineConfig</code> object and generates a new <code>rendered-worker-&lt;hash&gt;</code> version.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You enabled signature verification by using a machine config file.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On the command line, run the following command to display information about a desired worker:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc describe machineconfigpool/worker</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output of initial worker monitoring</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">Name:         worker
Namespace:
Labels:       machineconfiguration.openshift.io/mco-built-in=
</span><span class="gp">Annotations:  &lt;none&gt;</span><span class="w">
</span><span class="go">API Version:  machineconfiguration.openshift.io/v1
Kind:         MachineConfigPool
Metadata:
  Creation Timestamp:  2019-12-19T02:02:12Z
  Generation:          3
  Resource Version:    16229
  Self Link:           /apis/machineconfiguration.openshift.io/v1/machineconfigpools/worker
  UID:                 92697796-2203-11ea-b48c-fa163e3940e5
Spec:
  Configuration:
    Name:  rendered-worker-f6819366eb455a401c42f8d96ab25c02
    Source:
      API Version:  machineconfiguration.openshift.io/v1
      Kind:         MachineConfig
      Name:         00-worker
      API Version:  machineconfiguration.openshift.io/v1
      Kind:         MachineConfig
      Name:         01-worker-container-runtime
      API Version:  machineconfiguration.openshift.io/v1
      Kind:         MachineConfig
      Name:         01-worker-kubelet
      API Version:  machineconfiguration.openshift.io/v1
      Kind:         MachineConfig
      Name:         51-worker-rh-registry-trust
      API Version:  machineconfiguration.openshift.io/v1
      Kind:         MachineConfig
      Name:         99-worker-92697796-2203-11ea-b48c-fa163e3940e5-registries
      API Version:  machineconfiguration.openshift.io/v1
      Kind:         MachineConfig
      Name:         99-worker-ssh
  Machine Config Selector:
    Match Labels:
      machineconfiguration.openshift.io/role:  worker
  Node Selector:
    Match Labels:
      node-role.kubernetes.io/worker:
  Paused:                              false
Status:
  Conditions:
    Last Transition Time:  2019-12-19T02:03:27Z
    Message:
    Reason:
    Status:                False
    Type:                  RenderDegraded
    Last Transition Time:  2019-12-19T02:03:43Z
    Message:
    Reason:
    Status:                False
    Type:                  NodeDegraded
    Last Transition Time:  2019-12-19T02:03:43Z
    Message:
    Reason:
    Status:                False
    Type:                  Degraded
    Last Transition Time:  2019-12-19T02:28:23Z
    Message:
    Reason:
    Status:                False
    Type:                  Updated
    Last Transition Time:  2019-12-19T02:28:23Z
    Message:               All nodes are updating to rendered-worker-f6819366eb455a401c42f8d96ab25c02
    Reason:
    Status:                True
    Type:                  Updating
  Configuration:
    Name:  rendered-worker-d9b3f4ffcfd65c30dcf591a0e8cf9b2e
    Source:
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   00-worker
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   01-worker-container-runtime
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   01-worker-kubelet
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   99-worker-92697796-2203-11ea-b48c-fa163e3940e5-registries
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   99-worker-ssh
  Degraded Machine Count:     0
  Machine Count:              1
  Observed Generation:        3
  Ready Machine Count:        0
  Unavailable Machine Count:  1
  Updated Machine Count:      0
</span><span class="gp">Events:                       &lt;none&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Run the <code>oc describe</code> command again:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc describe machineconfigpool/worker</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output after the worker is updated</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="c">...
</span><span class="go">    Last Transition Time:  2019-12-19T04:53:09Z
    Message:               All nodes are updated with rendered-worker-f6819366eb455a401c42f8d96ab25c02
    Reason:
    Status:                True
    Type:                  Updated
    Last Transition Time:  2019-12-19T04:53:09Z
    Message:
    Reason:
    Status:                False
    Type:                  Updating
  Configuration:
    Name:  rendered-worker-f6819366eb455a401c42f8d96ab25c02
    Source:
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   00-worker
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   01-worker-container-runtime
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   01-worker-kubelet
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   51-worker-rh-registry-trust
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   99-worker-92697796-2203-11ea-b48c-fa163e3940e5-registries
      API Version:            machineconfiguration.openshift.io/v1
      Kind:                   MachineConfig
      Name:                   99-worker-ssh
  Degraded Machine Count:     0
  Machine Count:              3
  Observed Generation:        4
  Ready Machine Count:        3
  Unavailable Machine Count:  0
  Updated Machine Count:      3
</span><span class="c">...</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>Observed Generation</code> parameter shows an increased count based on the generation of the controller-produced configuration. This controller updates this value even if it fails to process the specification and generate a revision. The <code>Configuration Source</code> value points to the <code>51-worker-rh-registry-trust</code> configuration.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Confirm that the <code>policy.json</code> file exists with the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc debug node/&lt;node&gt; <span class="nt">--</span> <span class="nb">chroot</span> /host <span class="nb">cat</span> /etc/containers/policy.json</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">Starting pod/&lt;node&gt;</span><span class="nt">-debug</span> ...
<span class="go">To use host binaries, run `chroot /host`
{
  "default": [
    {
      "type": "insecureAcceptAnything"
    }
  ],
  "transports": {
    "docker": {
      "registry.access.redhat.com": [
        {
          "type": "signedBy",
          "keyType": "GPGKeys",
          "keyPath": "/etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release"
        }
      ],
      "registry.redhat.io": [
        {
          "type": "signedBy",
          "keyType": "GPGKeys",
          "keyPath": "/etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release"
        }
      ]
    },
    "docker-daemon": {
      "": [
        {
          "type": "insecureAcceptAnything"
        }
      ]
    }
  }
}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Confirm that the <code>registry.redhat.io.yaml</code> file exists with the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc debug node/&lt;node&gt; <span class="nt">--</span> <span class="nb">chroot</span> /host <span class="nb">cat</span> /etc/containers/registries.d/registry.redhat.io.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">Starting pod/&lt;node&gt;</span><span class="nt">-debug</span> ...
<span class="go">To use host binaries, run `chroot /host`
docker:
     registry.redhat.io:
         sigstore: https://registry.redhat.io/containers/sigstore</span></code></pre>
</div>
</div>
</li>
<li>
<p>Confirm that the <code>registry.access.redhat.com.yaml</code> file exists with the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc debug node/&lt;node&gt; <span class="nt">--</span> <span class="nb">chroot</span> /host <span class="nb">cat</span> /etc/containers/registries.d/registry.access.redhat.com.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">Starting pod/&lt;node&gt;</span><span class="nt">-debug</span> ...
<span class="go">To use host binaries, run `chroot /host`
docker:
     registry.access.redhat.com:
         sigstore: https://access.redhat.com/webassets/docker/content/sigstore</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="containers-signature-verify-artifacts_security-container-signature"><a class="anchor" href="#containers-signature-verify-artifacts_security-container-signature"></a>Understanding the verification of container images lacking verifiable signatures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each Azure Red Hat OpenShift release image is immutable and signed with a Red Hat production key. During an Azure Red Hat OpenShift update or installation, a release image might deploy container images that do not have verifiable signatures. Each signed release image digest is immutable. Each reference in the release image is to the immutable digest of another image, so the contents can be trusted transitively. In other words, the signature on the release image validates all release contents.</p>
</div>
<div class="paragraph">
<p>For example, the image references lacking a verifiable signature are contained in the signed Azure Red Hat OpenShift release image:</p>
</div>
<div class="listingblock">
<div class="title">Example release info output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm release info quay.io/openshift-release-dev/ocp-release@sha256:2309578b68c5666dad62aed696f1f9d778ae1a089ee461060ba7b9514b7ca417 <span class="nt">-o</span> pullspec <i class="conum" data-value="1"></i><b>(1)</b>
<span class="go">quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9aafb914d5d7d0dec4edd800d02f811d7383a7d49e500af548eab5d00c1bffdb <i class="conum" data-value="2"></i><b>(2)</b>
</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Signed release image SHA.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Container image lacking a verifiable signature included in the release.</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="containers-signature-verification-automatic_security-container-signature"><a class="anchor" href="#containers-signature-verification-automatic_security-container-signature"></a>Automated verification during updates</h3>
<div class="paragraph">
<p>Verification of signatures is automatic. The OpenShift Cluster Version Operator (CVO) verifies signatures on the release images during an Azure Red Hat OpenShift update. This is an internal process. An Azure Red Hat OpenShift installation or update fails if the automated verification fails.</p>
</div>
<div class="paragraph">
<p>Verification of signatures can also be done manually using the <code>skopeo</code> command-line utility.</p>
</div>
<div id="additional-resources" class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="../../updating/understanding_updates/intro-to-updates.html#understanding-openshift-updates">Introduction to OpenShift Updates</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="containers-signature-verify-skopeo_security-container-signature"><a class="anchor" href="#containers-signature-verify-skopeo_security-container-signature"></a>Using skopeo to verify signatures of Red Hat container images</h3>
<div class="paragraph">
<p>You can verify the signatures for container images included in an Azure Red Hat OpenShift release image by pulling those signatures from <a href="https://mirror.openshift.com/pub/openshift-v4/signatures/openshift-release-dev/ocp-release/">OCP release mirror site</a>. Because the signatures on the mirror site are not in a format readily understood by Podman or CRI-O, you can use the <code>skopeo standalone-verify</code> command to verify that the your release images are signed by Red Hat.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the <code>skopeo</code> command-line utility.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Get the full SHA for your release by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm release info &lt;release_version&gt;  <span class="se">\ </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Substitute &lt;release_version&gt; with your release number, for example, <code>4.14.3</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example output snippet</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">---
Pull From: quay.io/openshift-release-dev/ocp-release@sha256:e73ab4b33a9c3ff00c9f800a38d69853ca0c4dfa5a88e3df331f66df8f18ec55
---</span></code></pre>
</div>
</div>
</li>
<li>
<p>Pull down the Red Hat release key by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>curl <span class="nt">-o</span> pub.key https://access.redhat.com/security/data/fd431d51.txt</code></pre>
</div>
</div>
</li>
<li>
<p>Get the signature file for the specific release that you want to verify by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>curl <span class="nt">-o</span> signature-1 https://mirror.openshift.com/pub/openshift-v4/signatures/openshift-release-dev/ocp-release/sha256%&lt;sha_from_version&gt;/signature-1 <span class="se">\ </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code>&lt;sha_from_version&gt;</code> with SHA value from the full link to the mirror site that matches the SHA of your release. For example, the link to the signature for the 4.12.23 release is <code><a href="https://mirror.openshift.com/pub/openshift-v4/signatures/openshift-release-dev/ocp-release/sha256%e73ab4b33a9c3ff00c9f800a38d69853ca0c4dfa5a88e3df331f66df8f18ec55/signature-1" class="bare">https://mirror.openshift.com/pub/openshift-v4/signatures/openshift-release-dev/ocp-release/sha256%e73ab4b33a9c3ff00c9f800a38d69853ca0c4dfa5a88e3df331f66df8f18ec55/signature-1</a></code>, and the SHA value is <code>e73ab4b33a9c3ff00c9f800a38d69853ca0c4dfa5a88e3df331f66df8f18ec55</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Get the manifest for the release image by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>skopeo inspect <span class="nt">--raw</span> docker://&lt;quay_link_to_release&gt; <span class="o">&gt;</span> manifest.json <span class="se">\ </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code>&lt;quay_link_to_release&gt;</code> with the output of the <code>oc adm release info</code> command. For example, <code>quay.io/openshift-release-dev/ocp-release@sha256:e73ab4b33a9c3ff00c9f800a38d69853ca0c4dfa5a88e3df331f66df8f18ec55</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Use skopeo to verify the signature:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>skopeo standalone-verify manifest.json quay.io/openshift-release-dev/ocp-release:&lt;release_number&gt;-&lt;<span class="nb">arch</span><span class="o">&gt;</span> any signature-1 <span class="nt">--public-key-file</span> pub.key</code></pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;release_number&gt;</code></dt>
<dd>
<p>Specifies the release number, for example <code>4.14.3</code>.</p>
</dd>
<dt class="hdlist1"><code>&lt;arch&gt;</code></dt>
<dd>
<p>Specifies the architecture, for example <code>x86_64</code>.</p>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">Signature verified using fingerprint 567E347AD0044ADE55BA8A5F199E2F91FD431D51, digest sha256:e73ab4b33a9c3ff00c9f800a38d69853ca0c4dfa5a88e3df331f66df8f18ec55</span></code></pre>
</div>
</div>
</dd>
</dl>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1 _additional-resources">
<h2 id="additional-resources_security-container-signature"><a class="anchor" href="#additional-resources_security-container-signature"></a>Additional resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../../machine_configuration/index.html#machine-config-overview">Machine Config Overview</a></p>
</li>
</ul>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/nav-tertiary.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/reformat-html.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/hc-search.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/clipboard.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/collapsible.js" type="text/javascript"></script>
  <script>
  var dk = 'openshift-aro';
  var version = 'Branch Build';

  var distros = {
    'openshift-origin': ['docs_origin', version],
    // specific labels are used for OSD instead of the URL filter, due to its unusual URL structure; assume v4
    'openshift-dedicated': ['docs_dedicated_v4'],
    'openshift-online': ['docs_online', version],
    'openshift-enterprise': ['docs_cp', version],
    'openshift-telco': ['docs_telco', version],
    'openshift-aro' : ['docs_aro', version],
    'openshift-rosa' : ['docs_rosa'],
    'openshift-acs' : ['docs_acs', version],
    'openshift-serverless' : ['docs_serverless', version],
    'openshift-pipelines' : ['docs_pipelines', version],
    'openshift-builds' : ['docs_builds', version],
    'openshift-gitops' : ['docs_gitops', version],
    'openshift-lightspeed' : ['docs_lightspeed', version],
    'openshift-service-mesh' : ['docs_service_mesh', version]
  };

  // only OSD v3 docs have the version variable specified
  if (dk == "openshift-dedicated" && version == "3") {
    distros['openshift-dedicated'] = ['docs_dedicated_v3']
  }

  distros[dk] ? hcSearchCategory.apply(null, distros[dk]) : hcSearchCategory("docs");
  </script>
  <script type="text/javascript">
  /*<![CDATA[*/
  $(document).ready(function() {
    $("[id^='topicGroup']").on('show.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicGroup']").on('hide.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });

    const collapsibleContent = document.getElementsByTagName("details");
    for (var i = 0; i < collapsibleContent.length; i++) {
      collapsibleContent[i].setAttribute("open", "");
    }

  });
  /*]]>*/
  </script>

  <footer id="rh">

    <div class="container">
        <div class="row">

            <div class="col-sm-2">
                <img src="https://assets.openshift.net/content/img/Logo-Red_Hat-OpenShift-A-Reverse-RGB.svg" class="img-fluid" alt="Red Hat" style="height: 30px;">
            </div>

            <div class="col-sm-3">
              <p class="text-nowrap">Copyright  2025 Red Hat, Inc.</p>
            </div>



            <div class="col">
                <nav class="nav">
                    <a target="_blank" href="https://www.redhat.com/en/about/privacy-policy" class="nav-link">Privacy statement</a>
                    <a target="_blank" href="https://www.openshift.com/legal/terms/" class="nav-link">Terms of use</a>
                    <a target="_blank" href="https://www.redhat.com/en/about/all-policies-guidelines" class="nav-link">All policies and guidelines</a>
                    <a id="teconsent"></a>
                </nav>
            </div>
        </div>
    </div>
</footer>
<div id="consent_blackbar" style="z-index: 100; position: fixed"></div>



<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->

  <!-- adjust page css based on breadcrumb and/or resize -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      }
    });

    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      } else if ($(window).width() < 1008) {
        sidebar.classList.remove('wide');
        document.querySelector('#hc-search').classList.remove('wide');
        if (sidebar.classList.contains('open')) {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }
        document.querySelector('.main').style.paddingTop = '0px';
      }
    });

    function adjustSide() {
      sidebar.classList.add('wide');
      document.querySelector('#hc-search').classList.add('wide');
      sidebar.style.display = 'block';
      document.querySelector('.sidebar').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 125), 10) + "px";
      document.querySelector('#hc-search').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 95), 10) + "px";
    }

    function adjustToc() {
      if (document.querySelector('#toc') !== null) {
        document.querySelector('#toc').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      }
    }

    function adjustMain() {
      document.querySelector('html').style.scrollPaddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      document.querySelector('.main').style.paddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight - 70), 10) + "px";
    }

  </script>

  <!-- remove toc active class when page is loaded -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      var tocItems = $("#toc a");

      for (let i = 0; i < tocItems.length; i++) {
        tocItems[i].classList.remove("toc-active");
      }
    })
  </script>

  <!-- maintain sidebar scroll position between page loads -->
  <script type="text/javascript">
    let sidebar = document.querySelector(".sidebar");
    let scrolltop = localStorage.getItem("sidebar-scroll");

    if (scrolltop == null) {
      sidebar.scrollTop = parseInt(top, 10);
    }

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
    });

    window.addEventListener('load', () => {
      sidebar.scrollTo(0, scrolltop)
    })
  </script>

  <!-- open/close the nav -->
  <script type="text/javascript">
    function closeNav() {
      let sidebar = document.querySelector(".sidebar");
      sidebar.style.display = "none";
      sidebar.classList.remove('open');
    }

    function openNav() {
      let sidebar = document.querySelector(".sidebar");
      let hc_search = document.querySelector('#hc-search');
      sidebar.style.display = "block";
      sidebar.style.top = "0px";
      hc_search.style.top = 'unset';
      sidebar.classList.add('open');
    }
  </script>

  <!-- clear and add toc-active to clicked toc link -->
  <script type="text/javascript">
  $("#toc a").click(function() {
    var tocItems = $("#toc a");
    for (let i = 0; i < tocItems.length; i++) {
      tocItems[i].classList.remove("toc-active");
    }
    this.classList.add("toc-active");
  });
  </script>

  <!-- update active toc class when mouse scrolls -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener("wheel", () => {

        const ioConfiguration = {
          "rootMargin": "-120px 0px -400px 0px",
          "threshold": 0
        };

        const observer = new IntersectionObserver(setCurrent, ioConfiguration, entries => {
          entries.forEach(entry => {
            var id = entry.target.getAttribute('id');
            //fight with js
            document.querySelector(`#toc li a[href="#${id}"]`).classList.remove('toc-active');
          });
        });

        //track all h1-4 headings that have an id
        document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
          observer.observe(h);
        });

        //runs when the IntersectionObserver fires
        function setCurrent(e) {
          var allTocLinks = document.querySelectorAll("#toc li a");
          if (allTocLinks !== undefined) {
            e.map(i => {
              if (i.isIntersecting && i.intersectionRatio >= 1) {
                allTocLinks.forEach(link => link.classList.remove("toc-active"));
                document.querySelector(`#toc li a[href="#${i.target.id}"]`).classList.add('toc-active')
              }
            })
          }
        };

        //make clicked toc item active and stop IntersectionObserver
        $("#toc a").click(function() {
          //stop tracking all h1-4 headings that have an id
          document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
            observer.unobserve(h);
          });
          var tocItems = $("#toc a");
          if (tocItems !== undefined) {
            for (let i = 0; i < tocItems.length; i++) {
              tocItems[i].classList.remove("toc-active");
            };
            this.classList.add("toc-active");
          }
        })
      })
    })
  </script>

  <!--handle page scroll top and bottom, add toc-active -->
  <script type="text/javascript">
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active")
          };
          tocItems[tocItems.length - 1].classList.add("toc-active");
        };
      //scroll to top
      if(window.pageYOffset === 0) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active");
          };
          tocItems[0].classList.add("toc-active");
        };
      })
  </script>

  <!-- adjust alerts on mobile -->
  <script type="text/javascript">
    alert = document.querySelector('#support-alert')
    window.addEventListener("wheel", () => {
      if ($(window).width() < 1008) {
        //adjust alert
        if(window.pageYOffset > 0) {
          if(alert !== null) {
            document.querySelector('#support-alert').style.position = "fixed";
            document.querySelector('#support-alert').style.bottom = "0px";
            document.querySelector('#support-alert').style.margin = "5px";
            document.querySelector('#support-alert').style.zIndex = "9999999";
          }
        }
      }
   });
    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        if(alert !== null) {
          document.querySelector('#support-alert').style.removeProperty('position');
          document.querySelector('#support-alert').style.removeProperty('bottom');
          document.querySelector('#support-alert').style.removeProperty('margin');
          document.querySelector('#support-alert').style.removeProperty('zIndex');
        }
      }
    })
  </script>

  <!-- hide footer after 3 seconds -->
  <script type="text/javascript">
    const hideFooter = () => {
      document.querySelector('footer#rh, footer.footer-origin-docs').style.display = "none";
    };

    window.addEventListener('load', function() {
      setTimeout(hideFooter, 3000);
    });
  </script>
</body>
</html>
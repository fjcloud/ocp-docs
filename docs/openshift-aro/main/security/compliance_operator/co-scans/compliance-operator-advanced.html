

<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  
  
  <title>Performing advanced Compliance Operator tasks - Compliance Operator | Security and compliance | Azure Red Hat OpenShift Branch Build</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css"/>
  <link href="https://docs.okd.io/latest/_stylesheets/search.css" rel="stylesheet" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/autumn.css" rel="stylesheet"  media="screen"/>
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png"/>
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css"/>
  <link href="https://assets.openshift.net/content/osh-nav-footer.css" rel="stylesheet" type="text/css" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/docs.css" rel="stylesheet"  media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/>
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">

  <!-- Adobe DTM -->
  <script src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <!-- End Adobe DTM -->

  <script id="trustarc" src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
        rel="stylesheet">

</head>

<body onload="selectVersion('Branch Build');">
  
<nav id="main">
  <div class="container">
    <div class="row">
      <div class="navbar navbar-default navbar-openshift" role="navigation">
        <div class="navbar-header">
            <a href="#nav-main" class="dropdown-toggle navbar-menu-toggle hidden visible-xs" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          <a class="navbar-brand" href="/"></a>
        </div>
        <div id="nav-main" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="products" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                Products <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-column flex-md-row">
                  <div class="col-xs-12 col-sm-3">
                    <h3>Overview</h3>
                    <ul class="nav flex-column">
                      <li><a target="_blank" href="https://www.openshift.com/products/features/">Features</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/products/pricing/">Pricing</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-9">
                    <h3>Featured Products</h3>
                    <ul class="nav">
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/container-platform/">Red Hat OpenShift Container&nbsp;Platform</a>
                        <p class="d-none d-md-block">Build, deploy and manage your applications across cloud- and on-premise infrastructure</p>
                      </li>
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/dedicated/">Red Hat OpenShift Dedicated</a>
                        <p class="d-none d-md-block">Single-tenant, high-availability Kubernetes clusters in the public cloud</p>
                      </li>

                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/online/">Red Hat OpenShift Online</a>
                        <p class="d-none d-md-block">The fastest way for developers to build, host and scale applications in the public cloud</p>
                      </li>

                      <li class="nav-item">
                        <a target="_blank" href="https://www.openshift.com/products/">All products <span class="fa fa-angle-right"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li id="learn" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Learn <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-md-nowrap">
                  <div class="col-xs-12 col-sm-6">
                    <h3>Learn</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/what-is-openshift/">What is OpenShift</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/get-started/">Get started</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/partners/">Partners</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/success-stories/">Customer success stories</a></li>
                      <li><a target="_blank" href="https://blog.openshift.com">Blog</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/resources/">Resources</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <h3>Technology Topics</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/knative/">Knative</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/security/">Security</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/kubernetes/">Kubernetes</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/service-brokers/">Service Brokers</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Community <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://commons.openshift.org">OpenShift Commons</a></li>
                <li><a target="_blank" href="https://www.okd.io">Open Source (OKD)</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/startups/">Startups</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/grants/">Grants</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Support <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://help.openshift.com">Help Center</a></li>
                <li><a href="https://docs.openshift.com">OpenShift Docs</a></li>
              </ul>
            </li>

            <li><a target="_blank" class="nav-sign-up" href="https://www.openshift.com/trial/">Free Trial</a></li>

            <li><a target="_blank" href="https://console.redhat.com/openshift" class="nav-sign-in">Log In <span class="fa fa-angle-right"></span></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

  
  <div class="container">
    <button id="hc-open-btn" class="open-btn-sm" onclick="openNav()" aria-label="Open"><span class="fa fa-bars" /></button>
    <ol class="breadcrumb hide-for-print">
      
      <span>
        <div class="alert alert-info" role="primary" id="support-info">
          <strong>Starting on March 12, 2025, OpenShift docs will only be available at <a href="https://docs.redhat.com/en/" style="color: #0C5460 !important" class="link-primary">docs.redhat.com</a>. From that time on, docs.openshift.com links will automatically redirect to their locations on docs.redhat.com.
          </strong>
        </div>
      </span>
      

      

      

      

      

      

      

      
      

      

      


      

      


      

      

      <li class="sitename">
        <a href="/">
          Documentation</a>
      </li>
      <li class="hidden-xs active">
        
          <a href="../../../security/index.html">Azure Red Hat OpenShift Branch Build</a>
        
      </li>
      <li class="hidden-xs active">
        <a href="../../../security/index.html">Security and compliance</a>
      </li>
      <li class="hidden-xs active"><a href="../../../security/compliance_operator/co-overview.html">Compliance Operator</a></li>
      <li class="hidden-xs active"><a href="../../../security/compliance_operator/co-scans/compliance-operator-supported-profiles.html">Compliance Operator scan management</a></li>
      <li class="hidden-xs active">
        Performing advanced Compliance Operator tasks
      </li>
      
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas hide-for-print">
        <div class="row-fluid">
          <div id="btn-close">
            <button id="hc-close-btn" onclick="closeNav()" class="close-btn-sm" aria-label="close"><span class="fa fa-times" /></button>
          </div>
          <div id="hc-search">
            <input id="hc-search-input" type="text" aria-label="search">
            <button id="hc-search-btn" aria-label="search"><span class="fa fa-search" /></button>
          </div>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0"><span id="tgSpan0" class="fa fa-angle-down"></span>Security and compliance</a>
      <ul id="topicGroup0" class="collapse in list-unstyled">
            <li><a class="" href="../../../security/index.html">Security and compliance overview</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-1"><span id="sgSpan-0-1" class="fa fa-caret-right"></span>&nbsp;Container security</a>
              <ul id="topicSubGroup-0-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../../security/container_security/security-understanding.html">Understanding container security</a></li>
                  <li><a class="" href="../../../security/container_security/security-hosts-vms.html">Understanding host and VM security</a></li>
                  <li><a class="" href="../../../security/container_security/security-hardening.html">Hardening Red Hat Enterprise Linux CoreOS</a></li>
                  <li><a class="" href="../../../security/container_security/security-container-signature.html">Container image signatures</a></li>
                  <li><a class="" href="../../../security/container_security/security-compliance.html">Understanding compliance</a></li>
                  <li><a class="" href="../../../security/container_security/security-container-content.html">Securing container content</a></li>
                  <li><a class="" href="../../../security/container_security/security-registries.html">Using container registries securely</a></li>
                  <li><a class="" href="../../../security/container_security/security-build.html">Securing the build process</a></li>
                  <li><a class="" href="../../../security/container_security/security-deploy.html">Deploying containers</a></li>
                  <li><a class="" href="../../../security/container_security/security-platform.html">Securing the container platform</a></li>
                  <li><a class="" href="../../../security/container_security/security-network.html">Securing networks</a></li>
                  <li><a class="" href="../../../security/container_security/security-storage.html">Securing attached storage</a></li>
                  <li><a class="" href="../../../security/container_security/security-monitoring.html">Monitoring cluster events and logs</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-2"><span id="sgSpan-0-2" class="fa fa-caret-down"></span>&nbsp;Compliance Operator</a>
              <ul id="topicSubGroup-0-2" class="nav-tertiary list-unstyled collapse in">

                  <li><a class="" href="../../../security/compliance_operator/co-overview.html">Compliance Operator overview</a></li>
                  <li><a class="" href="../../../security/compliance_operator/compliance-operator-release-notes.html">Compliance Operator release notes</a></li>
                  <li><a class="" href="../../../security/compliance_operator/co-support.html">Compliance Operator support</a></li>
                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-3"><span id="ssgSpan-0-2-3" class="fa fa-caret-right"></span>&nbsp;Compliance Operator concepts</a>
                  <ul id="topicSubSubGroup-0-2-3" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../../security/compliance_operator/co-concepts/compliance-operator-understanding.html" style="padding-left: 70px;">Understanding the Compliance Operator</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-concepts/compliance-operator-crd.html" style="padding-left: 70px;">Understanding the Custom Resource Definitions</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-4"><span id="ssgSpan-0-2-4" class="fa fa-caret-right"></span>&nbsp;Compliance Operator management</a>
                  <ul id="topicSubSubGroup-0-2-4" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../../security/compliance_operator/co-management/compliance-operator-installation.html" style="padding-left: 70px;">Installing the Compliance Operator</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-management/compliance-operator-updating.html" style="padding-left: 70px;">Updating the Compliance Operator</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-management/compliance-operator-manage.html" style="padding-left: 70px;">Managing the Compliance Operator</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-management/compliance-operator-uninstallation.html" style="padding-left: 70px;">Uninstalling the Compliance Operator</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-5"><span id="ssgSpan-0-2-5" class="fa fa-caret-down"></span>&nbsp;Compliance Operator scan management</a>
                  <ul id="topicSubSubGroup-0-2-5" class="nav-tertiary list-unstyled collapse in">

                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-operator-supported-profiles.html" style="padding-left: 70px;">Supported compliance profiles</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-scans.html" style="padding-left: 70px;">Compliance Operator scans</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-operator-tailor.html" style="padding-left: 70px;">Tailoring the Compliance Operator</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-operator-raw-results.html" style="padding-left: 70px;">Retrieving Compliance Operator raw results</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-operator-remediation.html" style="padding-left: 70px;">Managing Compliance Operator remediation</a></li>
                    <li><a class=" active" href="../../../security/compliance_operator/co-scans/compliance-operator-advanced.html" style="padding-left: 70px;">Performing advanced Compliance Operator tasks</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-operator-troubleshooting.html" style="padding-left: 70px;">Troubleshooting Compliance Operator scans</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/oc-compliance-plug-in-using.html" style="padding-left: 70px;">Using the oc-compliance plugin</a></li>                  </ul>
                  </li>
              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-3"><span id="sgSpan-0-3" class="fa fa-caret-right"></span>&nbsp;File Integrity Operator</a>
              <ul id="topicSubGroup-0-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../../security/file_integrity_operator/fio-overview.html">File Integrity Operator Overview</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-release-notes.html">File Integrity Operator release notes</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/fio-support.html">File Integrity Operator support</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-installation.html">Installing the File Integrity Operator</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-updating.html">Updating the File Integrity Operator</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-understanding.html">Understanding the File Integrity Operator</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-configuring.html">Configuring the File Integrity Operator</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-advanced-usage.html">Performing advanced File Integrity Operator tasks</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-troubleshooting.html">Troubleshooting the File Integrity Operator</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-4"><span id="sgSpan-0-4" class="fa fa-caret-right"></span>&nbsp;Security Profiles Operator</a>
              <ul id="topicSubGroup-0-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../../security/security_profiles_operator/spo-overview.html">Security Profiles Operator overview</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-release-notes.html">Security Profiles Operator release notes</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-support.html">Security Profiles Operator support</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-understanding.html">Understanding the Security Profiles Operator</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-enabling.html">Enabling the Security Profiles Operator</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-seccomp.html">Managing seccomp profiles</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-selinux.html">Managing SELinux profiles</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-advanced.html">Advanced Security Profiles Operator tasks</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-troubleshooting.html">Troubleshooting the Security Profiles Operator</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-uninstalling.html">Uninstalling the Security Profiles Operator</a></li>              </ul>
            </li>
            <li><a class="" href="../../../security/audit-log-view.html">Viewing audit logs</a></li>
            <li><a class="" href="../../../security/audit-log-policy-config.html">Configuring the audit log policy</a></li>
            <li><a class="" href="../../../security/tls-security-profiles.html">Configuring TLS security profiles</a></li>
            <li><a class="" href="../../../security/seccomp-profiles.html">Configuring seccomp profiles</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-9"><span id="sgSpan-0-9" class="fa fa-caret-right"></span>&nbsp;Network-Bound Disk Encryption (NBDE)</a>
              <ul id="topicSubGroup-0-9" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../../security/network_bound_disk_encryption/nbde-about-disk-encryption-technology.html">About disk encryption technology</a></li>
                  <li><a class="" href="../../../security/network_bound_disk_encryption/nbde-tang-server-installation-considerations.html">Tang server installation considerations</a></li>
                  <li><a class="" href="../../../security/network_bound_disk_encryption/nbde-managing-encryption-keys.html">Tang server encryption key management</a></li>              </ul>
            </li>
      </ul>
    </li>
</ul>
      </div>
      <div id="hc-search-modal">
        <div id="hc-modal-content">
          <span id="hc-modal-close">&times;</span>
          <div id="hc-search-results-wrapper">
            <div id="hc-search-results"></div>
            <div id="hc-search-progress-indicator" class="text-center search-progress-indicator"><i class="fa fa-circle-o-notch fa-spin" style="font-size:42px"></i></div>
            <div class="text-center">
              <button id="hc-search-more-btn">Show more results</button>
            </div>
          </div>
        </div>
      </div>
      <div class="print-logo" style="display:none;">
        <img src="https://www.redhat.com/cms/managed-files/Logo-Red_Hat-OpenShift-A-Standard-RGB_0_0.svg" alt="print logo"/>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h1>
            Performing advanced Compliance Operator tasks
          </h1>
        </div>
        
        
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#compliance-objects_compliance-advanced">Using the ComplianceSuite and ComplianceScan objects directly</a></li>
<li><a href="#compliance-priorityclass_compliance-advanced">Setting <code>PriorityClass</code> for <code>ScanSetting</code> scans</a></li>
<li><a href="#compliance-raw-tailored_compliance-advanced">Using raw tailored profiles</a></li>
<li><a href="#compliance-rescan_compliance-advanced">Performing a rescan</a></li>
<li><a href="#compliance-custom-storage_compliance-advanced">Setting custom storage size for results</a>
<ul class="sectlevel2">
<li><a href="#using-custom-result-storage-values_compliance-advanced">Using custom result storage values</a></li>
</ul>
</li>
<li><a href="#installing-compliance-operator-cli_compliance-advanced">Applying remediations generated by suite scans</a></li>
<li><a href="#automatically-update-remediations_compliance-advanced">Automatically update remediations</a></li>
<li><a href="#compliance-custom-scc_compliance-advanced">Creating a custom SCC for the Compliance Operator</a></li>
<li><a href="#additional-resources_compliance-operator-advanced">Additional resources</a></li>
</ul>
</div>
<div class="paragraph">
<p>The Compliance Operator includes options for advanced users for the purpose of debugging or integration with existing tooling.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-objects_compliance-advanced"><a class="anchor" href="#compliance-objects_compliance-advanced"></a>Using the ComplianceSuite and ComplianceScan objects directly</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While it is recommended that users take advantage of the <code>ScanSetting</code> and <code>ScanSettingBinding</code> objects to define the suites and scans, there are valid use cases to define the <code>ComplianceSuite</code> objects directly:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Specifying only a single rule to scan. This can be useful for debugging together with the <code>debug: true</code> attribute which increases the OpenSCAP scanner verbosity, as the debug mode tends to get quite verbose otherwise. Limiting the test to one rule helps to lower the amount of debug information.</p>
</li>
<li>
<p>Providing a custom nodeSelector. In order for a remediation to be applicable, the nodeSelector must match a pool.</p>
</li>
<li>
<p>Pointing the Scan to a bespoke config map with a tailoring file.</p>
</li>
<li>
<p>For testing or development when the overhead of parsing profiles from bundles is not required.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example shows a <code>ComplianceSuite</code> that scans the worker machines with only a single rule:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ComplianceSuite</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">workers-compliancesuite</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">scans</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">workers-scan</span>
      <span class="na">profile</span><span class="pi">:</span> <span class="s">xccdf_org.ssgproject.content_profile_moderate</span>
      <span class="na">content</span><span class="pi">:</span> <span class="s">ssg-rhcos4-ds.xml</span>
      <span class="na">contentImage</span><span class="pi">:</span> <span class="s">registry.redhat.io/compliance/openshift-compliance-content-rhel8@sha256:45dc...</span>
      <span class="na">debug</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">rule</span><span class="pi">:</span> <span class="s">xccdf_org.ssgproject.content_rule_no_direct_root_logins</span>
      <span class="na">nodeSelector</span><span class="pi">:</span>
      <span class="s">node-role.kubernetes.io/worker</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ComplianceSuite</code> object and the <code>ComplianceScan</code> objects referred to above specify several attributes in a format that OpenSCAP expects.</p>
</div>
<div class="paragraph">
<p>To find out the profile, content, or rule values, you can start by creating a similar Suite from <code>ScanSetting</code> and <code>ScanSettingBinding</code> or inspect the objects parsed from the <code>ProfileBundle</code> objects like rules or profiles. Those objects contain the <code>xccdf_org</code> identifiers you can use to refer to them from a <code>ComplianceSuite</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-priorityclass_compliance-advanced"><a class="anchor" href="#compliance-priorityclass_compliance-advanced"></a>Setting <code>PriorityClass</code> for <code>ScanSetting</code> scans</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In large scale environments, the default <code>PriorityClass</code> object can be too low to guarantee Pods execute scans on time. For clusters that must maintain compliance or guarantee automated scanning, it is recommended to set the <code>PriorityClass</code> variable to ensure the Compliance Operator is always given priority in resource constrained situations.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Set the <code>PriorityClass</code> variable:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
<span class="na">strictNodeScan</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">default</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-compliance</span>
<span class="na">priorityClass</span><span class="pi">:</span> <span class="s">compliance-high-priority</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ScanSetting</span>
<span class="na">showNotApplicable</span><span class="pi">:</span> <span class="no">false</span>
<span class="na">rawResultStorage</span><span class="pi">:</span>
  <span class="na">nodeSelector</span><span class="pi">:</span>
    <span class="s">node-role.kubernetes.io/master</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>
  <span class="na">pvAccessModes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">ReadWriteOnce</span>
  <span class="na">rotation</span><span class="pi">:</span> <span class="m">3</span>
  <span class="na">size</span><span class="pi">:</span> <span class="s">1Gi</span>
  <span class="na">tolerations</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">effect</span><span class="pi">:</span> <span class="s">NoSchedule</span>
      <span class="na">key</span><span class="pi">:</span> <span class="s">node-role.kubernetes.io/master</span>
      <span class="na">operator</span><span class="pi">:</span> <span class="s">Exists</span>
    <span class="pi">-</span> <span class="na">effect</span><span class="pi">:</span> <span class="s">NoExecute</span>
      <span class="na">key</span><span class="pi">:</span> <span class="s">node.kubernetes.io/not-ready</span>
      <span class="na">operator</span><span class="pi">:</span> <span class="s">Exists</span>
      <span class="na">tolerationSeconds</span><span class="pi">:</span> <span class="m">300</span>
    <span class="pi">-</span> <span class="na">effect</span><span class="pi">:</span> <span class="s">NoExecute</span>
      <span class="na">key</span><span class="pi">:</span> <span class="s">node.kubernetes.io/unreachable</span>
      <span class="na">operator</span><span class="pi">:</span> <span class="s">Exists</span>
      <span class="na">tolerationSeconds</span><span class="pi">:</span> <span class="m">300</span>
    <span class="pi">-</span> <span class="na">effect</span><span class="pi">:</span> <span class="s">NoSchedule</span>
      <span class="na">key</span><span class="pi">:</span> <span class="s">node.kubernetes.io/memory-pressure</span>
      <span class="na">operator</span><span class="pi">:</span> <span class="s">Exists</span>
<span class="na">schedule</span><span class="pi">:</span> <span class="s">0 1 * * *</span>
<span class="na">roles</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">master</span>
  <span class="pi">-</span> <span class="s">worker</span>
<span class="na">scanTolerations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">operator</span><span class="pi">:</span> <span class="s">Exists</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>If the <code>PriorityClass</code> referenced in the <code>ScanSetting</code> cannot be found, the Operator will leave the <code>PriorityClass</code> empty, issue a warning, and continue scheduling scans without a <code>PriorityClass</code>.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-raw-tailored_compliance-advanced"><a class="anchor" href="#compliance-raw-tailored_compliance-advanced"></a>Using raw tailored profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While the <code>TailoredProfile</code> CR enables the most common tailoring operations, the XCCDF standard allows even more flexibility in tailoring OpenSCAP profiles. In addition, if your organization has been using OpenScap previously, you may have an existing XCCDF tailoring file and can reuse it.</p>
</div>
<div class="paragraph">
<p>The <code>ComplianceSuite</code> object contains an optional <code>TailoringConfigMap</code> attribute that you can point to a custom tailoring file. The value of the <code>TailoringConfigMap</code> attribute is a name of a config map which must contain a key called <code>tailoring.xml</code> and the value of this key is the tailoring contents.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create the <code>ConfigMap</code> object from a file:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance <span class="se">\</span>
create configmap nist-moderate-modified <span class="se">\</span>
<span class="nt">--from-file</span><span class="o">=</span>tailoring.xml<span class="o">=</span>/path/to/the/tailoringFile.xml</code></pre>
</div>
</div>
</li>
<li>
<p>Reference the tailoring file in a scan that belongs to a suite:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ComplianceSuite</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">workers-compliancesuite</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">debug</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">scans</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">workers-scan</span>
      <span class="na">profile</span><span class="pi">:</span> <span class="s">xccdf_org.ssgproject.content_profile_moderate</span>
      <span class="na">content</span><span class="pi">:</span> <span class="s">ssg-rhcos4-ds.xml</span>
      <span class="na">contentImage</span><span class="pi">:</span> <span class="s">registry.redhat.io/compliance/openshift-compliance-content-rhel8@sha256:45dc...</span>
      <span class="na">debug</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">tailoringConfigMap</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">nist-moderate-modified</span>
  <span class="na">nodeSelector</span><span class="pi">:</span>
    <span class="s">node-role.kubernetes.io/worker</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-rescan_compliance-advanced"><a class="anchor" href="#compliance-rescan_compliance-advanced"></a>Performing a rescan</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Typically you will want to re-run a scan on a defined schedule, like every Monday or daily. It can also be useful to re-run a scan once after fixing a problem on a node. To perform a single scan, annotate the scan with the <code>compliance.openshift.io/rescan=</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance <span class="se">\</span>
annotate compliancescans/rhcos4-e8-worker compliance.openshift.io/rescan<span class="o">=</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A rescan generates four additional <code>mc</code> for <code>rhcos-moderate</code> profile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get mc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">75-worker-scan-chronyd-or-ntpd-specify-remote-server
75-worker-scan-configure-usbguard-auditbackend
75-worker-scan-service-usbguard-enabled
75-worker-scan-usbguard-allow-hid-and-hub</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When the scan setting <code>default-auto-apply</code> label is applied, remediations are applied automatically and outdated remediations automatically update. If there are remediations that were not applied due to dependencies, or remediations that had been outdated, rescanning applies the remediations and might trigger a reboot. Only remediations that use <code>MachineConfig</code> objects trigger reboots. If there are no updates or dependencies to be applied, no reboot occurs.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-custom-storage_compliance-advanced"><a class="anchor" href="#compliance-custom-storage_compliance-advanced"></a>Setting custom storage size for results</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While the custom resources such as <code>ComplianceCheckResult</code> represent an aggregated result of one check across all scanned nodes, it can be useful to review the raw results as produced by the scanner. The raw results are produced in the ARF format and can be large (tens of megabytes per node), it is impractical to store them in a Kubernetes resource backed by the <code>etcd</code> key-value store. Instead, every scan creates a persistent volume (PV) which defaults to 1GB size. Depending on your environment, you may want to increase the PV size accordingly. This is done using the <code>rawResultStorage.size</code> attribute that is exposed in both the <code>ScanSetting</code> and <code>ComplianceScan</code> resources.</p>
</div>
<div class="paragraph">
<p>A related parameter is <code>rawResultStorage.rotation</code> which controls how many scans are retained in the PV before the older scans are rotated. The default value is 3, setting the rotation policy to 0 disables the rotation. Given the default rotation policy and an estimate of 100MB per a raw ARF scan report, you can calculate the right PV size for your environment.</p>
</div>
<div class="sect2">
<h3 id="using-custom-result-storage-values_compliance-advanced"><a class="anchor" href="#using-custom-result-storage-values_compliance-advanced"></a>Using custom result storage values</h3>
<div class="paragraph">
<p>Because Azure Red Hat OpenShift can be deployed in a variety of public clouds or bare metal, the Compliance Operator cannot determine available storage configurations. By default, the Compliance Operator will try to create the PV for storing results using the default storage class of the cluster, but a custom storage class can be configured using the <code>rawResultStorage.StorageClassName</code> attribute.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If your cluster does not specify a default storage class, this attribute must be set.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Configure the <code>ScanSetting</code> custom resource to use a standard storage class and create persistent volumes that are 10GB in size and keep the last 10 results:</p>
</div>
<div class="listingblock">
<div class="title">Example <code>ScanSetting</code> CR</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ScanSetting</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">default</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-compliance</span>
<span class="na">rawResultStorage</span><span class="pi">:</span>
  <span class="na">storageClassName</span><span class="pi">:</span> <span class="s">standard</span>
  <span class="na">rotation</span><span class="pi">:</span> <span class="m">10</span>
  <span class="na">size</span><span class="pi">:</span> <span class="s">10Gi</span>
<span class="na">roles</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">worker</span>
<span class="pi">-</span> <span class="s">master</span>
<span class="na">scanTolerations</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">effect</span><span class="pi">:</span> <span class="s">NoSchedule</span>
  <span class="na">key</span><span class="pi">:</span> <span class="s">node-role.kubernetes.io/master</span>
  <span class="na">operator</span><span class="pi">:</span> <span class="s">Exists</span>
<span class="na">schedule</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*'</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-compliance-operator-cli_compliance-advanced"><a class="anchor" href="#installing-compliance-operator-cli_compliance-advanced"></a>Applying remediations generated by suite scans</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Although you can use the <code>autoApplyRemediations</code> boolean parameter in a <code>ComplianceSuite</code> object, you can alternatively annotate the object with <code>compliance.openshift.io/apply-remediations</code>. This allows the Operator to apply all of the created remediations.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Apply the <code>compliance.openshift.io/apply-remediations</code> annotation by running:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance <span class="se">\</span>
annotate compliancesuites/workers-compliancesuite compliance.openshift.io/apply-remediations<span class="o">=</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="automatically-update-remediations_compliance-advanced"><a class="anchor" href="#automatically-update-remediations_compliance-advanced"></a>Automatically update remediations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In some cases, a scan with newer content might mark remediations as <code>OUTDATED</code>. As an administrator, you can apply the <code>compliance.openshift.io/remove-outdated</code> annotation to apply new remediations and remove the outdated ones.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Apply the <code>compliance.openshift.io/remove-outdated</code> annotation:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance <span class="se">\</span>
annotate compliancesuites/workers-compliancesuite compliance.openshift.io/remove-outdated<span class="o">=</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, set the <code>autoUpdateRemediations</code> flag in a <code>ScanSetting</code> or <code>ComplianceSuite</code> object to update the remediations automatically.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-custom-scc_compliance-advanced"><a class="anchor" href="#compliance-custom-scc_compliance-advanced"></a>Creating a custom SCC for the Compliance Operator</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In some environments, you must create a custom Security Context Constraints (SCC) file to ensure the correct permissions are available to the Compliance Operator <code>api-resource-collector</code>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have <code>admin</code> privileges.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Define the SCC in a YAML file named <code>restricted-adjusted-compliance.yaml</code>:</p>
<div class="listingblock">
<div class="title"><code>SecurityContextConstraints</code> object definition</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml">  <span class="na">allowHostDirVolumePlugin</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">allowHostIPC</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">allowHostNetwork</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">allowHostPID</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">allowHostPorts</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">allowPrivilegeEscalation</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">allowPrivilegedContainer</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">allowedCapabilities</span><span class="pi">:</span> <span class="no">null</span>
  <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">security.openshift.io/v1</span>
  <span class="na">defaultAddCapabilities</span><span class="pi">:</span> <span class="no">null</span>
  <span class="na">fsGroup</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">MustRunAs</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">SecurityContextConstraints</span>
  <span class="na">metadata</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">restricted-adjusted-compliance</span>
  <span class="na">priority</span><span class="pi">:</span> <span class="s">30</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="na">readOnlyRootFilesystem</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">requiredDropCapabilities</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">KILL</span>
  <span class="pi">-</span> <span class="s">SETUID</span>
  <span class="pi">-</span> <span class="s">SETGID</span>
  <span class="pi">-</span> <span class="s">MKNOD</span>
  <span class="na">runAsUser</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">MustRunAsRange</span>
  <span class="na">seLinuxContext</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">MustRunAs</span>
  <span class="na">supplementalGroups</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">RunAsAny</span>
  <span class="na">users</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">system:serviceaccount:openshift-compliance:api-resource-collector</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="na">volumes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">configMap</span>
  <span class="pi">-</span> <span class="s">downwardAPI</span>
  <span class="pi">-</span> <span class="s">emptyDir</span>
  <span class="pi">-</span> <span class="s">persistentVolumeClaim</span>
  <span class="pi">-</span> <span class="s">projected</span>
  <span class="pi">-</span> <span class="s">secret</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The priority of this SCC must be higher than any other SCC that applies to the <code>system:authenticated</code> group.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Service Account used by Compliance Operator Scanner pod.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create the SCC:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create <span class="nt">-n</span> openshift-compliance  <span class="nt">-f</span> restricted-adjusted-compliance.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">securitycontextconstraints.security.openshift.io/restricted-adjusted-compliance created</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Verify the SCC was created:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get <span class="nt">-n</span> openshift-compliance scc restricted-adjusted-compliance</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME                             PRIV    CAPS         SELINUX     RUNASUSER        FSGROUP     SUPGROUP   PRIORITY   READONLYROOTFS   VOLUMES
</span><span class="gp">restricted-adjusted-compliance   false   &lt;no value&gt;</span><span class="w">   </span>MustRunAs   MustRunAsRange   MustRunAs   RunAsAny   30         <span class="nb">false</span>            <span class="o">[</span><span class="s2">"configMap"</span>,<span class="s2">"downwardAPI"</span>,<span class="s2">"emptyDir"</span>,<span class="s2">"persistentVolumeClaim"</span>,<span class="s2">"projected"</span>,<span class="s2">"secret"</span><span class="o">]</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1 _additional-resources">
<h2 id="additional-resources_compliance-operator-advanced"><a class="anchor" href="#additional-resources_compliance-operator-advanced"></a>Additional resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../../../authentication/managing-security-context-constraints.html">Managing security context constraints</a></p>
</li>
</ul>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/nav-tertiary.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/reformat-html.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/hc-search.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/clipboard.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/collapsible.js" type="text/javascript"></script>
  <script>
  var dk = 'openshift-aro';
  var version = 'Branch Build';

  var distros = {
    'openshift-origin': ['docs_origin', version],
    // specific labels are used for OSD instead of the URL filter, due to its unusual URL structure; assume v4
    'openshift-dedicated': ['docs_dedicated_v4'],
    'openshift-online': ['docs_online', version],
    'openshift-enterprise': ['docs_cp', version],
    'openshift-telco': ['docs_telco', version],
    'openshift-aro' : ['docs_aro', version],
    'openshift-rosa' : ['docs_rosa'],
    'openshift-acs' : ['docs_acs', version],
    'openshift-serverless' : ['docs_serverless', version],
    'openshift-pipelines' : ['docs_pipelines', version],
    'openshift-builds' : ['docs_builds', version],
    'openshift-gitops' : ['docs_gitops', version],
    'openshift-lightspeed' : ['docs_lightspeed', version],
    'openshift-service-mesh' : ['docs_service_mesh', version]
  };

  // only OSD v3 docs have the version variable specified
  if (dk == "openshift-dedicated" && version == "3") {
    distros['openshift-dedicated'] = ['docs_dedicated_v3']
  }

  distros[dk] ? hcSearchCategory.apply(null, distros[dk]) : hcSearchCategory("docs");
  </script>
  <script type="text/javascript">
  /*<![CDATA[*/
  $(document).ready(function() {
    $("[id^='topicGroup']").on('show.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicGroup']").on('hide.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });

    const collapsibleContent = document.getElementsByTagName("details");
    for (var i = 0; i < collapsibleContent.length; i++) {
      collapsibleContent[i].setAttribute("open", "");
    }

  });
  /*]]>*/
  </script>

  <footer id="rh">

    <div class="container">
        <div class="row">

            <div class="col-sm-2">
                <img src="https://assets.openshift.net/content/img/Logo-Red_Hat-OpenShift-A-Reverse-RGB.svg" class="img-fluid" alt="Red Hat" style="height: 30px;">
            </div>

            <div class="col-sm-3">
              <p class="text-nowrap">Copyright © 2025 Red Hat, Inc.</p>
            </div>



            <div class="col">
                <nav class="nav">
                    <a target="_blank" href="https://www.redhat.com/en/about/privacy-policy" class="nav-link">Privacy statement</a>
                    <a target="_blank" href="https://www.openshift.com/legal/terms/" class="nav-link">Terms of use</a>
                    <a target="_blank" href="https://www.redhat.com/en/about/all-policies-guidelines" class="nav-link">All policies and guidelines</a>
                    <a id="teconsent"></a>
                </nav>
            </div>
        </div>
    </div>
</footer>
<div id="consent_blackbar" style="z-index: 100; position: fixed"></div>



<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->

  <!-- adjust page css based on breadcrumb and/or resize -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      }
    });

    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      } else if ($(window).width() < 1008) {
        sidebar.classList.remove('wide');
        document.querySelector('#hc-search').classList.remove('wide');
        if (sidebar.classList.contains('open')) {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }
        document.querySelector('.main').style.paddingTop = '0px';
      }
    });

    function adjustSide() {
      sidebar.classList.add('wide');
      document.querySelector('#hc-search').classList.add('wide');
      sidebar.style.display = 'block';
      document.querySelector('.sidebar').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 125), 10) + "px";
      document.querySelector('#hc-search').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 95), 10) + "px";
    }

    function adjustToc() {
      if (document.querySelector('#toc') !== null) {
        document.querySelector('#toc').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      }
    }

    function adjustMain() {
      document.querySelector('html').style.scrollPaddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      document.querySelector('.main').style.paddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight - 70), 10) + "px";
    }

  </script>

  <!-- remove toc active class when page is loaded -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      var tocItems = $("#toc a");

      for (let i = 0; i < tocItems.length; i++) {
        tocItems[i].classList.remove("toc-active");
      }
    })
  </script>

  <!-- maintain sidebar scroll position between page loads -->
  <script type="text/javascript">
    let sidebar = document.querySelector(".sidebar");
    let scrolltop = localStorage.getItem("sidebar-scroll");

    if (scrolltop == null) {
      sidebar.scrollTop = parseInt(top, 10);
    }

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
    });

    window.addEventListener('load', () => {
      sidebar.scrollTo(0, scrolltop)
    })
  </script>

  <!-- open/close the nav -->
  <script type="text/javascript">
    function closeNav() {
      let sidebar = document.querySelector(".sidebar");
      sidebar.style.display = "none";
      sidebar.classList.remove('open');
    }

    function openNav() {
      let sidebar = document.querySelector(".sidebar");
      let hc_search = document.querySelector('#hc-search');
      sidebar.style.display = "block";
      sidebar.style.top = "0px";
      hc_search.style.top = 'unset';
      sidebar.classList.add('open');
    }
  </script>

  <!-- clear and add toc-active to clicked toc link -->
  <script type="text/javascript">
  $("#toc a").click(function() {
    var tocItems = $("#toc a");
    for (let i = 0; i < tocItems.length; i++) {
      tocItems[i].classList.remove("toc-active");
    }
    this.classList.add("toc-active");
  });
  </script>

  <!-- update active toc class when mouse scrolls -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener("wheel", () => {

        const ioConfiguration = {
          "rootMargin": "-120px 0px -400px 0px",
          "threshold": 0
        };

        const observer = new IntersectionObserver(setCurrent, ioConfiguration, entries => {
          entries.forEach(entry => {
            var id = entry.target.getAttribute('id');
            //fight with js
            document.querySelector(`#toc li a[href="#${id}"]`).classList.remove('toc-active');
          });
        });

        //track all h1-4 headings that have an id
        document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
          observer.observe(h);
        });

        //runs when the IntersectionObserver fires
        function setCurrent(e) {
          var allTocLinks = document.querySelectorAll("#toc li a");
          if (allTocLinks !== undefined) {
            e.map(i => {
              if (i.isIntersecting && i.intersectionRatio >= 1) {
                allTocLinks.forEach(link => link.classList.remove("toc-active"));
                document.querySelector(`#toc li a[href="#${i.target.id}"]`).classList.add('toc-active')
              }
            })
          }
        };

        //make clicked toc item active and stop IntersectionObserver
        $("#toc a").click(function() {
          //stop tracking all h1-4 headings that have an id
          document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
            observer.unobserve(h);
          });
          var tocItems = $("#toc a");
          if (tocItems !== undefined) {
            for (let i = 0; i < tocItems.length; i++) {
              tocItems[i].classList.remove("toc-active");
            };
            this.classList.add("toc-active");
          }
        })
      })
    })
  </script>

  <!--handle page scroll top and bottom, add toc-active -->
  <script type="text/javascript">
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active")
          };
          tocItems[tocItems.length - 1].classList.add("toc-active");
        };
      //scroll to top
      if(window.pageYOffset === 0) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active");
          };
          tocItems[0].classList.add("toc-active");
        };
      })
  </script>

  <!-- adjust alerts on mobile -->
  <script type="text/javascript">
    alert = document.querySelector('#support-alert')
    window.addEventListener("wheel", () => {
      if ($(window).width() < 1008) {
        //adjust alert
        if(window.pageYOffset > 0) {
          if(alert !== null) {
            document.querySelector('#support-alert').style.position = "fixed";
            document.querySelector('#support-alert').style.bottom = "0px";
            document.querySelector('#support-alert').style.margin = "5px";
            document.querySelector('#support-alert').style.zIndex = "9999999";
          }
        }
      }
   });
    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        if(alert !== null) {
          document.querySelector('#support-alert').style.removeProperty('position');
          document.querySelector('#support-alert').style.removeProperty('bottom');
          document.querySelector('#support-alert').style.removeProperty('margin');
          document.querySelector('#support-alert').style.removeProperty('zIndex');
        }
      }
    })
  </script>

  <!-- hide footer after 3 seconds -->
  <script type="text/javascript">
    const hideFooter = () => {
      document.querySelector('footer#rh, footer.footer-origin-docs').style.display = "none";
    };

    window.addEventListener('load', function() {
      setTimeout(hideFooter, 3000);
    });
  </script>
</body>
</html>
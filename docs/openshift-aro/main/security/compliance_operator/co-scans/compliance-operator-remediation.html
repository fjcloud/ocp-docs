

<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  
  
  <title>Managing Compliance Operator remediation - Compliance Operator | Security and compliance | Azure Red Hat OpenShift Branch Build</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css"/>
  <link href="https://docs.okd.io/latest/_stylesheets/search.css" rel="stylesheet" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/autumn.css" rel="stylesheet"  media="screen"/>
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png"/>
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css"/>
  <link href="https://assets.openshift.net/content/osh-nav-footer.css" rel="stylesheet" type="text/css" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/docs.css" rel="stylesheet"  media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/>
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">

  <!-- Adobe DTM -->
  <script src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <!-- End Adobe DTM -->

  <script id="trustarc" src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
        rel="stylesheet">

</head>

<body onload="selectVersion('Branch Build');">
  
<nav id="main">
  <div class="container">
    <div class="row">
      <div class="navbar navbar-default navbar-openshift" role="navigation">
        <div class="navbar-header">
            <a href="#nav-main" class="dropdown-toggle navbar-menu-toggle hidden visible-xs" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          <a class="navbar-brand" href="/"></a>
        </div>
        <div id="nav-main" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="products" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                Products <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-column flex-md-row">
                  <div class="col-xs-12 col-sm-3">
                    <h3>Overview</h3>
                    <ul class="nav flex-column">
                      <li><a target="_blank" href="https://www.openshift.com/products/features/">Features</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/products/pricing/">Pricing</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-9">
                    <h3>Featured Products</h3>
                    <ul class="nav">
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/container-platform/">Red Hat OpenShift Container&nbsp;Platform</a>
                        <p class="d-none d-md-block">Build, deploy and manage your applications across cloud- and on-premise infrastructure</p>
                      </li>
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/dedicated/">Red Hat OpenShift Dedicated</a>
                        <p class="d-none d-md-block">Single-tenant, high-availability Kubernetes clusters in the public cloud</p>
                      </li>

                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/online/">Red Hat OpenShift Online</a>
                        <p class="d-none d-md-block">The fastest way for developers to build, host and scale applications in the public cloud</p>
                      </li>

                      <li class="nav-item">
                        <a target="_blank" href="https://www.openshift.com/products/">All products <span class="fa fa-angle-right"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li id="learn" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Learn <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-md-nowrap">
                  <div class="col-xs-12 col-sm-6">
                    <h3>Learn</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/what-is-openshift/">What is OpenShift</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/get-started/">Get started</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/partners/">Partners</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/success-stories/">Customer success stories</a></li>
                      <li><a target="_blank" href="https://blog.openshift.com">Blog</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/resources/">Resources</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <h3>Technology Topics</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/knative/">Knative</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/security/">Security</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/kubernetes/">Kubernetes</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/service-brokers/">Service Brokers</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Community <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://commons.openshift.org">OpenShift Commons</a></li>
                <li><a target="_blank" href="https://www.okd.io">Open Source (OKD)</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/startups/">Startups</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/grants/">Grants</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Support <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://help.openshift.com">Help Center</a></li>
                <li><a href="https://docs.openshift.com">OpenShift Docs</a></li>
              </ul>
            </li>

            <li><a target="_blank" class="nav-sign-up" href="https://www.openshift.com/trial/">Free Trial</a></li>

            <li><a target="_blank" href="https://console.redhat.com/openshift" class="nav-sign-in">Log In <span class="fa fa-angle-right"></span></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

  
  <div class="container">
    <button id="hc-open-btn" class="open-btn-sm" onclick="openNav()" aria-label="Open"><span class="fa fa-bars" /></button>
    <ol class="breadcrumb hide-for-print">
      
      <span>
        <div class="alert alert-info" role="primary" id="support-info">
          <strong>Starting on March 12, 2025, OpenShift docs will only be available at <a href="https://docs.redhat.com/en/" style="color: #0C5460 !important" class="link-primary">docs.redhat.com</a>. From that time on, docs.openshift.com links will automatically redirect to their locations on docs.redhat.com.
          </strong>
        </div>
      </span>
      

      

      

      

      

      

      

      
      

      

      


      

      


      

      

      <li class="sitename">
        <a href="/">
          Documentation</a>
      </li>
      <li class="hidden-xs active">
        
          <a href="../../../security/index.html">Azure Red Hat OpenShift Branch Build</a>
        
      </li>
      <li class="hidden-xs active">
        <a href="../../../security/index.html">Security and compliance</a>
      </li>
      <li class="hidden-xs active"><a href="../../../security/compliance_operator/co-overview.html">Compliance Operator</a></li>
      <li class="hidden-xs active"><a href="../../../security/compliance_operator/co-scans/compliance-operator-supported-profiles.html">Compliance Operator scan management</a></li>
      <li class="hidden-xs active">
        Managing Compliance Operator remediation
      </li>
      
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas hide-for-print">
        <div class="row-fluid">
          <div id="btn-close">
            <button id="hc-close-btn" onclick="closeNav()" class="close-btn-sm" aria-label="close"><span class="fa fa-times" /></button>
          </div>
          <div id="hc-search">
            <input id="hc-search-input" type="text" aria-label="search">
            <button id="hc-search-btn" aria-label="search"><span class="fa fa-search" /></button>
          </div>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0"><span id="tgSpan0" class="fa fa-angle-down"></span>Security and compliance</a>
      <ul id="topicGroup0" class="collapse in list-unstyled">
            <li><a class="" href="../../../security/index.html">Security and compliance overview</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-1"><span id="sgSpan-0-1" class="fa fa-caret-right"></span>&nbsp;Container security</a>
              <ul id="topicSubGroup-0-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../../security/container_security/security-understanding.html">Understanding container security</a></li>
                  <li><a class="" href="../../../security/container_security/security-hosts-vms.html">Understanding host and VM security</a></li>
                  <li><a class="" href="../../../security/container_security/security-hardening.html">Hardening Red Hat Enterprise Linux CoreOS</a></li>
                  <li><a class="" href="../../../security/container_security/security-container-signature.html">Container image signatures</a></li>
                  <li><a class="" href="../../../security/container_security/security-compliance.html">Understanding compliance</a></li>
                  <li><a class="" href="../../../security/container_security/security-container-content.html">Securing container content</a></li>
                  <li><a class="" href="../../../security/container_security/security-registries.html">Using container registries securely</a></li>
                  <li><a class="" href="../../../security/container_security/security-build.html">Securing the build process</a></li>
                  <li><a class="" href="../../../security/container_security/security-deploy.html">Deploying containers</a></li>
                  <li><a class="" href="../../../security/container_security/security-platform.html">Securing the container platform</a></li>
                  <li><a class="" href="../../../security/container_security/security-network.html">Securing networks</a></li>
                  <li><a class="" href="../../../security/container_security/security-storage.html">Securing attached storage</a></li>
                  <li><a class="" href="../../../security/container_security/security-monitoring.html">Monitoring cluster events and logs</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-2"><span id="sgSpan-0-2" class="fa fa-caret-down"></span>&nbsp;Compliance Operator</a>
              <ul id="topicSubGroup-0-2" class="nav-tertiary list-unstyled collapse in">

                  <li><a class="" href="../../../security/compliance_operator/co-overview.html">Compliance Operator overview</a></li>
                  <li><a class="" href="../../../security/compliance_operator/compliance-operator-release-notes.html">Compliance Operator release notes</a></li>
                  <li><a class="" href="../../../security/compliance_operator/co-support.html">Compliance Operator support</a></li>
                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-3"><span id="ssgSpan-0-2-3" class="fa fa-caret-right"></span>&nbsp;Compliance Operator concepts</a>
                  <ul id="topicSubSubGroup-0-2-3" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../../security/compliance_operator/co-concepts/compliance-operator-understanding.html" style="padding-left: 70px;">Understanding the Compliance Operator</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-concepts/compliance-operator-crd.html" style="padding-left: 70px;">Understanding the Custom Resource Definitions</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-4"><span id="ssgSpan-0-2-4" class="fa fa-caret-right"></span>&nbsp;Compliance Operator management</a>
                  <ul id="topicSubSubGroup-0-2-4" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../../security/compliance_operator/co-management/compliance-operator-installation.html" style="padding-left: 70px;">Installing the Compliance Operator</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-management/compliance-operator-updating.html" style="padding-left: 70px;">Updating the Compliance Operator</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-management/compliance-operator-manage.html" style="padding-left: 70px;">Managing the Compliance Operator</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-management/compliance-operator-uninstallation.html" style="padding-left: 70px;">Uninstalling the Compliance Operator</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-5"><span id="ssgSpan-0-2-5" class="fa fa-caret-down"></span>&nbsp;Compliance Operator scan management</a>
                  <ul id="topicSubSubGroup-0-2-5" class="nav-tertiary list-unstyled collapse in">

                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-operator-supported-profiles.html" style="padding-left: 70px;">Supported compliance profiles</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-scans.html" style="padding-left: 70px;">Compliance Operator scans</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-operator-tailor.html" style="padding-left: 70px;">Tailoring the Compliance Operator</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-operator-raw-results.html" style="padding-left: 70px;">Retrieving Compliance Operator raw results</a></li>
                    <li><a class=" active" href="../../../security/compliance_operator/co-scans/compliance-operator-remediation.html" style="padding-left: 70px;">Managing Compliance Operator remediation</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-operator-advanced.html" style="padding-left: 70px;">Performing advanced Compliance Operator tasks</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/compliance-operator-troubleshooting.html" style="padding-left: 70px;">Troubleshooting Compliance Operator scans</a></li>
                    <li><a class="" href="../../../security/compliance_operator/co-scans/oc-compliance-plug-in-using.html" style="padding-left: 70px;">Using the oc-compliance plugin</a></li>                  </ul>
                  </li>
              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-3"><span id="sgSpan-0-3" class="fa fa-caret-right"></span>&nbsp;File Integrity Operator</a>
              <ul id="topicSubGroup-0-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../../security/file_integrity_operator/fio-overview.html">File Integrity Operator Overview</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-release-notes.html">File Integrity Operator release notes</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/fio-support.html">File Integrity Operator support</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-installation.html">Installing the File Integrity Operator</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-updating.html">Updating the File Integrity Operator</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-understanding.html">Understanding the File Integrity Operator</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-configuring.html">Configuring the File Integrity Operator</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-advanced-usage.html">Performing advanced File Integrity Operator tasks</a></li>
                  <li><a class="" href="../../../security/file_integrity_operator/file-integrity-operator-troubleshooting.html">Troubleshooting the File Integrity Operator</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-4"><span id="sgSpan-0-4" class="fa fa-caret-right"></span>&nbsp;Security Profiles Operator</a>
              <ul id="topicSubGroup-0-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../../security/security_profiles_operator/spo-overview.html">Security Profiles Operator overview</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-release-notes.html">Security Profiles Operator release notes</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-support.html">Security Profiles Operator support</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-understanding.html">Understanding the Security Profiles Operator</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-enabling.html">Enabling the Security Profiles Operator</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-seccomp.html">Managing seccomp profiles</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-selinux.html">Managing SELinux profiles</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-advanced.html">Advanced Security Profiles Operator tasks</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-troubleshooting.html">Troubleshooting the Security Profiles Operator</a></li>
                  <li><a class="" href="../../../security/security_profiles_operator/spo-uninstalling.html">Uninstalling the Security Profiles Operator</a></li>              </ul>
            </li>
            <li><a class="" href="../../../security/audit-log-view.html">Viewing audit logs</a></li>
            <li><a class="" href="../../../security/audit-log-policy-config.html">Configuring the audit log policy</a></li>
            <li><a class="" href="../../../security/tls-security-profiles.html">Configuring TLS security profiles</a></li>
            <li><a class="" href="../../../security/seccomp-profiles.html">Configuring seccomp profiles</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-9"><span id="sgSpan-0-9" class="fa fa-caret-right"></span>&nbsp;Network-Bound Disk Encryption (NBDE)</a>
              <ul id="topicSubGroup-0-9" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../../security/network_bound_disk_encryption/nbde-about-disk-encryption-technology.html">About disk encryption technology</a></li>
                  <li><a class="" href="../../../security/network_bound_disk_encryption/nbde-tang-server-installation-considerations.html">Tang server installation considerations</a></li>
                  <li><a class="" href="../../../security/network_bound_disk_encryption/nbde-managing-encryption-keys.html">Tang server encryption key management</a></li>              </ul>
            </li>
      </ul>
    </li>
</ul>
      </div>
      <div id="hc-search-modal">
        <div id="hc-modal-content">
          <span id="hc-modal-close">&times;</span>
          <div id="hc-search-results-wrapper">
            <div id="hc-search-results"></div>
            <div id="hc-search-progress-indicator" class="text-center search-progress-indicator"><i class="fa fa-circle-o-notch fa-spin" style="font-size:42px"></i></div>
            <div class="text-center">
              <button id="hc-search-more-btn">Show more results</button>
            </div>
          </div>
        </div>
      </div>
      <div class="print-logo" style="display:none;">
        <img src="https://www.redhat.com/cms/managed-files/Logo-Red_Hat-OpenShift-A-Standard-RGB_0_0.svg" alt="print logo"/>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h1>
            Managing Compliance Operator result and remediation
          </h1>
        </div>
        
        
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#filtering-compliance-check-results_compliance-remediation">Filters for compliance check results</a></li>
<li><a href="#compliance-review_compliance-remediation">Reviewing a remediation</a></li>
<li><a href="#compliance-operator-apply-remediation-for-customized-mcp">Applying remediation when using customized machine config pools</a></li>
<li><a href="#compliance-evaluate-kubeletconfig-rules_compliance-remediation">Evaluating KubeletConfig rules against default configuration values</a></li>
<li><a href="#compliance-custom-node-pools_compliance-remediation">Scanning custom node pools</a></li>
<li><a href="#compliance-kubeletconfig-sub-pool-remediation_compliance-remediation">Remediating <code>KubeletConfig</code> sub pools</a></li>
<li><a href="#compliance-applying_compliance-remediation">Applying a remediation</a></li>
<li><a href="#compliance-manual_compliance-remediation">Remediating a platform check manually</a></li>
<li><a href="#compliance-updating_compliance-remediation">Updating remediations</a></li>
<li><a href="#compliance-unapplying_compliance-remediation">Unapplying a remediation</a></li>
<li><a href="#compliance-removing-kubeletconfig_compliance-remediation">Removing a KubeletConfig remediation</a></li>
<li><a href="#compliance-inconsistent_compliance-remediation">Inconsistent ComplianceScan</a></li>
<li><a href="#additional-resources">Additional resources</a></li>
</ul>
</div>
<div class="paragraph">
<p>Each <code>ComplianceCheckResult</code> represents a result of one compliance rule check. If the rule can be remediated automatically, a <code>ComplianceRemediation</code> object with the same name, owned by the <code>ComplianceCheckResult</code> is created. Unless requested, the remediations are not applied automatically, which gives an Azure Red Hat OpenShift administrator the opportunity to review what the remediation does and only apply a remediation once it has been verified.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Full remediation for Federal Information Processing Standards (FIPS) compliance requires enabling FIPS mode for the cluster. To enable FIPS mode, you must run the installation program from a Red Hat Enterprise Linux (RHEL) computer configured to operate in FIPS mode. For more information about configuring FIPS mode on RHEL, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/assembly_installing-the-system-in-fips-mode_security-hardening">Installing the system in FIPS mode</a>.</p>
</div>
<div class="paragraph">
<p>FIPS mode is supported on the following architectures:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>x86_64</code></p>
</li>
<li>
<p><code>ppc64le</code></p>
</li>
<li>
<p><code>s390x</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filtering-compliance-check-results_compliance-remediation"><a class="anchor" href="#filtering-compliance-check-results_compliance-remediation"></a>Filters for compliance check results</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, the <code>ComplianceCheckResult</code> objects are labeled with several useful labels that allow you to query the checks and decide on the next steps after the results are generated.</p>
</div>
<div class="paragraph">
<p>List checks that belong to a specific suite:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get <span class="nt">-n</span> openshift-compliance compliancecheckresults <span class="se">\</span>
  <span class="nt">-l</span> compliance.openshift.io/suite<span class="o">=</span>workers-compliancesuite</code></pre>
</div>
</div>
<div class="paragraph">
<p>List checks that belong to a specific scan:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get <span class="nt">-n</span> openshift-compliance compliancecheckresults <span class="se">\</span>
<span class="nt">-l</span> compliance.openshift.io/scan<span class="o">=</span>workers-scan</code></pre>
</div>
</div>
<div class="paragraph">
<p>Not all <code>ComplianceCheckResult</code> objects create <code>ComplianceRemediation</code> objects. Only <code>ComplianceCheckResult</code> objects that can be remediated automatically do. A <code>ComplianceCheckResult</code> object has a related remediation if it is labeled with the <code>compliance.openshift.io/automated-remediation</code> label. The name of the remediation is the same as the name of the check.</p>
</div>
<div class="paragraph">
<p>List all failing checks that can be remediated automatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get <span class="nt">-n</span> openshift-compliance compliancecheckresults <span class="se">\</span>
<span class="nt">-l</span> <span class="s1">'compliance.openshift.io/check-status=FAIL,compliance.openshift.io/automated-remediation'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>List all failing checks sorted by severity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get compliancecheckresults <span class="nt">-n</span> openshift-compliance <span class="se">\</span>
<span class="nt">-l</span> <span class="s1">'compliance.openshift.io/check-status=FAIL,compliance.openshift.io/check-severity=high'</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME                                                           STATUS   SEVERITY
nist-moderate-modified-master-configure-crypto-policy          FAIL     high
nist-moderate-modified-master-coreos-pti-kernel-argument       FAIL     high
nist-moderate-modified-master-disable-ctrlaltdel-burstaction   FAIL     high
nist-moderate-modified-master-disable-ctrlaltdel-reboot        FAIL     high
nist-moderate-modified-master-enable-fips-mode                 FAIL     high
nist-moderate-modified-master-no-empty-passwords               FAIL     high
nist-moderate-modified-master-selinux-state                    FAIL     high
nist-moderate-modified-worker-configure-crypto-policy          FAIL     high
nist-moderate-modified-worker-coreos-pti-kernel-argument       FAIL     high
nist-moderate-modified-worker-disable-ctrlaltdel-burstaction   FAIL     high
nist-moderate-modified-worker-disable-ctrlaltdel-reboot        FAIL     high
nist-moderate-modified-worker-enable-fips-mode                 FAIL     high
nist-moderate-modified-worker-no-empty-passwords               FAIL     high
nist-moderate-modified-worker-selinux-state                    FAIL     high
ocp4-moderate-configure-network-policies-namespaces            FAIL     high
ocp4-moderate-fips-mode-enabled-on-all-nodes                   FAIL     high</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>List all failing checks that must be remediated manually:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get <span class="nt">-n</span> openshift-compliance compliancecheckresults <span class="se">\</span>
<span class="nt">-l</span> <span class="s1">'compliance.openshift.io/check-status=FAIL,!compliance.openshift.io/automated-remediation'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The manual remediation steps are typically stored in the <code>description</code> attribute in the <code>ComplianceCheckResult</code> object.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. ComplianceCheckResult Status</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ComplianceCheckResult Status</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PASS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance check ran to completion and passed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAIL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance check ran to completion and failed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INFO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance check ran to completion and found something not severe enough to be considered an error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MANUAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance check does not have a way to automatically assess the success or failure and must be checked manually.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INCONSISTENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance check reports different results from different sources, typically cluster nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance check ran, but could not complete properly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT-APPLICABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance check did not run because it is not applicable or not selected.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="compliance-review_compliance-remediation"><a class="anchor" href="#compliance-review_compliance-remediation"></a>Reviewing a remediation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Review both the <code>ComplianceRemediation</code> object and the <code>ComplianceCheckResult</code> object that owns the remediation. The <code>ComplianceCheckResult</code> object contains human-readable descriptions of what the check does and the hardening trying to prevent, as well as other <code>metadata</code> like the severity and the associated security controls. The <code>ComplianceRemediation</code> object represents a way to fix the problem described in the <code>ComplianceCheckResult</code>. After first scan, check for remediations with the state <code>MissingDependencies</code>.</p>
</div>
<div class="paragraph">
<p>Below is an example of a check and a remediation called <code>sysctl-net-ipv4-conf-all-accept-redirects</code>. This example is redacted to only show <code>spec</code> and <code>status</code> and omits <code>metadata</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">spec</span><span class="pi">:</span>
  <span class="na">apply</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">current</span><span class="pi">:</span>
  <span class="na">object</span><span class="pi">:</span>
    <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">machineconfiguration.openshift.io/v1</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">MachineConfig</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">config</span><span class="pi">:</span>
        <span class="na">ignition</span><span class="pi">:</span>
          <span class="na">version</span><span class="pi">:</span> <span class="s">3.2.0</span>
        <span class="na">storage</span><span class="pi">:</span>
          <span class="na">files</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/etc/sysctl.d/75-sysctl_net_ipv4_conf_all_accept_redirects.conf</span>
              <span class="na">mode</span><span class="pi">:</span> <span class="m">0644</span>
              <span class="na">contents</span><span class="pi">:</span>
                <span class="na">source</span><span class="pi">:</span> <span class="s">data:,net.ipv4.conf.all.accept_redirects%3D0</span>
  <span class="na">outdated</span><span class="pi">:</span> <span class="pi">{}</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">applicationState</span><span class="pi">:</span> <span class="s">NotApplied</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The remediation payload is stored in the <code>spec.current</code> attribute. The payload can be any Kubernetes object, but because this remediation was produced by a node scan, the remediation payload in the above example is a <code>MachineConfig</code> object. For Platform scans, the remediation payload is often a different kind of an object (for example, a <code>ConfigMap</code> or <code>Secret</code> object), but typically applying that remediation is up to the administrator, because otherwise the Compliance Operator would have required a very broad set of permissions to manipulate any generic Kubernetes object. An example of remediating a Platform check is provided later in the text.</p>
</div>
<div class="paragraph">
<p>To see exactly what the remediation does when applied, the <code>MachineConfig</code> object contents use the Ignition objects for the configuration. See the <a href="https://coreos.github.io/ignition/specs/">Ignition specification</a> for further information about the format. In our example, <code>the spec.config.storage.files[0].path</code> attribute specifies the file that is being create by this remediation (<code>/etc/sysctl.d/75-sysctl_net_ipv4_conf_all_accept_redirects.conf</code>) and the <code>spec.config.storage.files[0].contents.source</code> attribute specifies the contents of that file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The contents of the files are URL-encoded.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Use the following Python script to view the contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="s2">"net.ipv4.conf.all.accept_redirects%3D0"</span> | python3 <span class="nt">-c</span> <span class="s2">"import sys, urllib.parse; print(urllib.parse.unquote(''.join(sys.stdin.readlines())))"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">net.ipv4.conf.all.accept_redirects=0</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Compliance Operator does not automatically resolve dependency issues that can occur between remediations. Users should perform a rescan after remediations are applied to ensure accurate results.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-operator-apply-remediation-for-customized-mcp"><a class="anchor" href="#compliance-operator-apply-remediation-for-customized-mcp"></a>Applying remediation when using customized machine config pools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you create a custom <code>MachineConfigPool</code>, add a label to the <code>MachineConfigPool</code> so that <code>machineConfigPoolSelector</code> present in the <code>KubeletConfig</code> can match the label with <code>MachineConfigPool</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not set <code>protectKernelDefaults: false</code> in the <code>KubeletConfig</code> file, because the <code>MachineConfigPool</code> object might fail to unpause unexpectedly after the Compliance Operator finishes applying remediation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>List the nodes.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get nodes <span class="nt">-n</span> openshift-compliance</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME                                       STATUS  ROLES  AGE    VERSION
ip-10-0-128-92.us-east-2.compute.internal  Ready   master 5h21m  v1.31.3
ip-10-0-158-32.us-east-2.compute.internal  Ready   worker 5h17m  v1.31.3
ip-10-0-166-81.us-east-2.compute.internal  Ready   worker 5h17m  v1.31.3
ip-10-0-171-170.us-east-2.compute.internal Ready   master 5h21m  v1.31.3
ip-10-0-197-35.us-east-2.compute.internal  Ready   master 5h22m  v1.31.3</span></code></pre>
</div>
</div>
</li>
<li>
<p>Add a label to nodes.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance <span class="se">\</span>
label node ip-10-0-166-81.us-east-2.compute.internal <span class="se">\</span>
node-role.kubernetes.io/&lt;machine_config_pool_name&gt;<span class="o">=</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">node/ip-10-0-166-81.us-east-2.compute.internal labeled</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create custom <code>MachineConfigPool</code> CR.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">machineconfiguration.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">MachineConfigPool</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;machine_config_pool_name&gt;</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="s">pools.operator.machineconfiguration.openshift.io/&lt;machine_config_pool_name&gt;</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">machineConfigSelector</span><span class="pi">:</span>
  <span class="na">matchExpressions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="pi">{</span><span class="nv">key</span><span class="pi">:</span> <span class="nv">machineconfiguration.openshift.io/role</span><span class="pi">,</span> <span class="nv">operator</span><span class="pi">:</span> <span class="nv">In</span><span class="pi">,</span> <span class="nv">values</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">worker</span><span class="pi">,</span><span class="nv">&lt;machine_config_pool_name&gt;</span><span class="pi">]}</span>
  <span class="na">nodeSelector</span><span class="pi">:</span>
  <span class="na">matchLabels</span><span class="pi">:</span>
    <span class="s">node-role.kubernetes.io/&lt;machine_config_pool_name&gt;</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>labels</code> field defines label name to add for Machine config pool(MCP).</td>
</tr>
</table>
</div>
</li>
<li>
<p>Verify MCP created successfully.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get mcp <span class="nt">-w</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-evaluate-kubeletconfig-rules_compliance-remediation"><a class="anchor" href="#compliance-evaluate-kubeletconfig-rules_compliance-remediation"></a>Evaluating KubeletConfig rules against default configuration values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Azure Red Hat OpenShift infrastructure might contain incomplete configuration files at run time, and nodes assume default configuration values for missing configuration options. Some configuration options can be passed as command line arguments. As a result, the Compliance Operator cannot verify if the configuration file on the node is complete because it might be missing options used in the rule checks.</p>
</div>
<div class="paragraph">
<p>To prevent false negative results where the default configuration value passes a check, the Compliance Operator uses the Node/Proxy API to fetch the configuration for each node in a node pool, then all configuration options that are consistent across nodes in the node pool are stored in a file that represents the configuration for all nodes within that node pool. This increases the accuracy of the scan results.</p>
</div>
<div class="paragraph">
<p>No additional configuration changes are required to use this feature with default <code>master</code> and <code>worker</code> node pools configurations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-custom-node-pools_compliance-remediation"><a class="anchor" href="#compliance-custom-node-pools_compliance-remediation"></a>Scanning custom node pools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Compliance Operator does not maintain a copy of each node pool configuration. The Compliance Operator aggregates consistent configuration options for all nodes within a single node pool into one copy of the configuration file. The Compliance Operator then uses the configuration file for a particular node pool to evaluate rules against nodes within that pool.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Add the <code>example</code> role to the <code>ScanSetting</code> object that will be stored in the <code>ScanSettingBinding</code> CR:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ScanSetting</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">default</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-compliance</span>
<span class="na">rawResultStorage</span><span class="pi">:</span>
  <span class="na">rotation</span><span class="pi">:</span> <span class="m">3</span>
  <span class="na">size</span><span class="pi">:</span> <span class="s">1Gi</span>
<span class="na">roles</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">worker</span>
<span class="pi">-</span> <span class="s">master</span>
<span class="pi">-</span> <span class="s">example</span>
<span class="na">scanTolerations</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">effect</span><span class="pi">:</span> <span class="s">NoSchedule</span>
  <span class="na">key</span><span class="pi">:</span> <span class="s">node-role.kubernetes.io/master</span>
  <span class="na">operator</span><span class="pi">:</span> <span class="s">Exists</span>
<span class="na">schedule</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*'</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create a scan that uses the <code>ScanSettingBinding</code> CR:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ScanSettingBinding</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">cis</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-compliance</span>
<span class="na">profiles</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">Profile</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ocp4-cis</span>
<span class="pi">-</span> <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">Profile</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ocp4-cis-node</span>
<span class="na">settingsRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">ScanSetting</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">default</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>The Platform KubeletConfig rules are checked through the <code>Node/Proxy</code> object. You can find those rules by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get rules <span class="nt">-o</span> json | jq <span class="s1">'.items[] | select(.checkType == "Platform") | select(.metadata.name | contains("ocp4-kubelet-")) | .metadata.name'</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-kubeletconfig-sub-pool-remediation_compliance-remediation"><a class="anchor" href="#compliance-kubeletconfig-sub-pool-remediation_compliance-remediation"></a>Remediating <code>KubeletConfig</code> sub pools</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>KubeletConfig</code> remediation labels can be applied to <code>MachineConfigPool</code> sub-pools.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Add a label to the sub-pool <code>MachineConfigPool</code> CR:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc label mcp &lt;sub-pool-name&gt; pools.operator.machineconfiguration.openshift.io/&lt;sub-pool-name&gt;<span class="o">=</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-applying_compliance-remediation"><a class="anchor" href="#compliance-applying_compliance-remediation"></a>Applying a remediation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The boolean attribute <code>spec.apply</code> controls whether the remediation should be applied by the Compliance Operator.  You can apply the remediation by setting the attribute to <code>true</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance <span class="se">\</span>
patch complianceremediations/&lt;scan-name&gt;-sysctl-net-ipv4-conf-all-accept-redirects <span class="se">\</span>
<span class="nt">--patch</span> <span class="s1">'{"spec":{"apply":true}}'</span> <span class="nt">--type</span><span class="o">=</span>merge</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the Compliance Operator processes the applied remediation, the <code>status.ApplicationState</code> attribute would change to <strong>Applied</strong> or to <strong>Error</strong> if incorrect. When a machine config remediation is applied, that remediation along with all other applied remediations are rendered into a <code>MachineConfig</code> object named <code>75-$scan-name-$suite-name</code>. That <code>MachineConfig</code> object is subsequently rendered by the Machine Config Operator and finally applied to all the nodes in a machine config pool by an instance of the machine control daemon running on each node.</p>
</div>
<div class="paragraph">
<p>Note that when the Machine Config Operator applies a new <code>MachineConfig</code> object to nodes in a pool, all the nodes belonging to the pool are rebooted. This might be inconvenient when applying multiple remediations, each of which re-renders the composite <code>75-$scan-name-$suite-name</code> <code>MachineConfig</code> object. To prevent applying the remediation immediately, you can pause the machine config pool by setting the <code>.spec.paused</code> attribute of a <code>MachineConfigPool</code> object to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>The Compliance Operator can apply remediations automatically. Set <code>autoApplyRemediations: true</code> in the <code>ScanSetting</code> top-level object.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Applying remediations automatically should only be done with careful consideration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Compliance Operator does not automatically resolve dependency issues that can occur between remediations. Users should perform a rescan after remediations are applied to ensure accurate results.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-manual_compliance-remediation"><a class="anchor" href="#compliance-manual_compliance-remediation"></a>Remediating a platform check manually</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Checks for Platform scans typically have to be remediated manually by the administrator for two reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is not always possible to automatically determine the value that must be set. One of the checks requires that a list of allowed registries is provided, but the scanner has no way of knowing which registries the organization wants to allow.</p>
</li>
<li>
<p>Different checks modify different API objects, requiring automated remediation to possess <code>root</code> or superuser access to modify objects in the cluster, which is not advised.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>The example below uses the <code>ocp4-ocp-allowed-registries-for-import</code> rule, which would fail on a default Azure Red Hat OpenShift installation. Inspect the rule <code>oc get rule.compliance/ocp4-ocp-allowed-registries-for-import -oyaml</code>, the rule is to limit the registries the users are allowed to import images from by setting the <code>allowedRegistriesForImport</code> attribute, The <em>warning</em> attribute of the rule also shows the API object checked, so it can be modified and remediate the issue:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc edit image.config.openshift.io/cluster</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">config.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Image</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">release.openshift.io/create-only</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
  <span class="na">creationTimestamp</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2020-09-10T10:12:54Z"</span>
  <span class="na">generation</span><span class="pi">:</span> <span class="m">2</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">cluster</span>
  <span class="na">resourceVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">363096"</span>
  <span class="na">selfLink</span><span class="pi">:</span> <span class="s">/apis/config.openshift.io/v1/images/cluster</span>
  <span class="na">uid</span><span class="pi">:</span> <span class="s">2dcb614e-2f8a-4a23-ba9a-8e33cd0ff77e</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">allowedRegistriesForImport</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">domainName</span><span class="pi">:</span> <span class="s">registry.redhat.io</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">externalRegistryHostnames</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">default-route-openshift-image-registry.apps.user-cluster-09-10-12-07.devcluster.openshift.com</span>
  <span class="na">internalRegistryHostname</span><span class="pi">:</span> <span class="s">image-registry.openshift-image-registry.svc:5000</span></code></pre>
</div>
</div>
</li>
<li>
<p>Re-run the scan:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance <span class="se">\</span>
annotate compliancescans/rhcos4-e8-worker compliance.openshift.io/rescan<span class="o">=</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-updating_compliance-remediation"><a class="anchor" href="#compliance-updating_compliance-remediation"></a>Updating remediations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a new version of compliance content is used, it might deliver a new and different version of a remediation than the previous version. The Compliance Operator will keep the old version of the remediation applied. The Azure Red Hat OpenShift administrator is also notified of the new version to review and apply. A ComplianceRemediation object that had been applied earlier, but was updated changes its status to <strong>Outdated</strong>. The outdated objects are labeled so that they can be searched for easily.</p>
</div>
<div class="paragraph">
<p>The previously applied remediation contents would then be stored in the <code>spec.outdated</code> attribute of a <code>ComplianceRemediation</code> object and the new updated contents would be stored in the <code>spec.current</code> attribute. After updating the content to a newer version, the administrator then needs to review the remediation. As long as the <code>spec.outdated</code> attribute exists, it would be used to render the resulting <code>MachineConfig</code> object. After the <code>spec.outdated</code> attribute is removed, the Compliance Operator re-renders the resulting <code>MachineConfig</code> object, which causes the Operator to push the configuration to the nodes.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Search for any outdated remediations:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance get complianceremediations <span class="se">\</span>
<span class="nt">-l</span> complianceoperator.openshift.io/outdated-remediation<span class="o">=</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME                              STATE
workers-scan-no-empty-passwords   Outdated</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The currently applied remediation is stored in the <code>Outdated</code> attribute and the new, unapplied remediation is stored in the <code>Current</code> attribute. If you are satisfied with the new version, remove the <code>Outdated</code> field. If you want to keep the updated content, remove the <code>Current</code> and <code>Outdated</code> attributes.</p>
</div>
</li>
<li>
<p>Apply the newer version of the remediation:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance patch complianceremediations workers-scan-no-empty-passwords <span class="se">\</span>
<span class="nt">--type</span> json <span class="nt">-p</span> <span class="s1">'[{"op":"remove", "path":/spec/outdated}]'</span></code></pre>
</div>
</div>
</li>
<li>
<p>The remediation state will switch from <code>Outdated</code> to <code>Applied</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get <span class="nt">-n</span> openshift-compliance complianceremediations workers-scan-no-empty-passwords</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME                              STATE
workers-scan-no-empty-passwords   Applied</span></code></pre>
</div>
</div>
</li>
<li>
<p>The nodes will apply the newer remediation version and reboot.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Compliance Operator does not automatically resolve dependency issues that can occur between remediations. Users should perform a rescan after remediations are applied to ensure accurate results.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-unapplying_compliance-remediation"><a class="anchor" href="#compliance-unapplying_compliance-remediation"></a>Unapplying a remediation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It might be required to unapply a remediation that was previously applied.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Set the <code>apply</code> flag to <code>false</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance <span class="se">\</span>
patch complianceremediations/rhcos4-moderate-worker-sysctl-net-ipv4-conf-all-accept-redirects <span class="se">\</span>
<span class="nt">--patch</span> <span class="s1">'{"spec":{"apply":false}}'</span> <span class="nt">--type</span><span class="o">=</span>merge</code></pre>
</div>
</div>
</li>
<li>
<p>The remediation status will change to <code>NotApplied</code> and the composite <code>MachineConfig</code> object would be re-rendered to not include the remediation.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All affected nodes with the remediation will be rebooted.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Compliance Operator does not automatically resolve dependency issues that can occur between remediations. Users should perform a rescan after remediations are applied to ensure accurate results.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-removing-kubeletconfig_compliance-remediation"><a class="anchor" href="#compliance-removing-kubeletconfig_compliance-remediation"></a>Removing a KubeletConfig remediation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>KubeletConfig</code> remediations are included in node-level profiles. In order to remove a KubeletConfig remediation, you must manually remove it from the <code>KubeletConfig</code> objects. This example demonstrates how to remove the compliance check for the <code>one-rule-tp-node-master-kubelet-eviction-thresholds-set-hard-imagefs-available</code> remediation.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Locate the <code>scan-name</code> and compliance check for the <code>one-rule-tp-node-master-kubelet-eviction-thresholds-set-hard-imagefs-available</code> remediation:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance get remediation <span class="se">\ </span>one-rule-tp-node-master-kubelet-eviction-thresholds-set-hard-imagefs-available <span class="nt">-o</span> yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ComplianceRemediation</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">compliance.openshift.io/xccdf-value-used</span><span class="pi">:</span> <span class="s">var-kubelet-evictionhard-imagefs-available</span>
  <span class="na">creationTimestamp</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2022-01-05T19:52:27Z"</span>
  <span class="na">generation</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="s">compliance.openshift.io/scan-name</span><span class="pi">:</span> <span class="s">one-rule-tp-node-master</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="s">compliance.openshift.io/suite</span><span class="pi">:</span> <span class="s">one-rule-ssb-node</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">one-rule-tp-node-master-kubelet-eviction-thresholds-set-hard-imagefs-available</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-compliance</span>
  <span class="na">ownerReferences</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">compliance.openshift.io/v1alpha1</span>
    <span class="na">blockOwnerDeletion</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">controller</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">ComplianceCheckResult</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">one-rule-tp-node-master-kubelet-eviction-thresholds-set-hard-imagefs-available</span>
    <span class="na">uid</span><span class="pi">:</span> <span class="s">fe8e1577-9060-4c59-95b2-3e2c51709adc</span>
  <span class="na">resourceVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">84820"</span>
  <span class="na">uid</span><span class="pi">:</span> <span class="s">5339d21a-24d7-40cb-84d2-7a2ebb015355</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">apply</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">current</span><span class="pi">:</span>
    <span class="na">object</span><span class="pi">:</span>
      <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">machineconfiguration.openshift.io/v1</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">KubeletConfig</span>
      <span class="na">spec</span><span class="pi">:</span>
        <span class="na">kubeletConfig</span><span class="pi">:</span>
          <span class="na">evictionHard</span><span class="pi">:</span>
            <span class="s">imagefs.available</span><span class="pi">:</span> <span class="s">10%</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="na">outdated</span><span class="pi">:</span> <span class="pi">{}</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">Configuration</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">applicationState</span><span class="pi">:</span> <span class="s">Applied</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The scan name of the remediation.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The remediation that was added to the <code>KubeletConfig</code> objects.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the remediation invokes an <code>evictionHard</code> kubelet configuration, you must specify all of the <code>evictionHard</code> parameters: <code>memory.available</code>, <code>nodefs.available</code>, <code>nodefs.inodesFree</code>, <code>imagefs.available</code>, and <code>imagefs.inodesFree</code>. If you do not specify all parameters, only the specified parameters are applied and the remediation will not function properly.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Remove the remediation:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set <code>apply</code> to false for the remediation object:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance patch <span class="se">\</span>
complianceremediations/one-rule-tp-node-master-kubelet-eviction-thresholds-set-hard-imagefs-available <span class="se">\</span>
<span class="nt">-p</span> <span class="s1">'{"spec":{"apply":false}}'</span> <span class="nt">--type</span><span class="o">=</span>merge</code></pre>
</div>
</div>
</li>
<li>
<p>Using the <code>scan-name</code>, find the <code>KubeletConfig</code> object that the remediation was applied to:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance get kubeletconfig <span class="se">\</span>
<span class="nt">--selector</span> compliance.openshift.io/scan-name<span class="o">=</span>one-rule-tp-node-master</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME                                 AGE
compliance-operator-kubelet-master   2m34s</span></code></pre>
</div>
</div>
</li>
<li>
<p>Manually remove the remediation, <code>imagefs.available: 10%</code>, from the <code>KubeletConfig</code> object:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc edit <span class="nt">-n</span> openshift-compliance KubeletConfig compliance-operator-kubelet-master</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All affected nodes with the remediation will be rebooted.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must also exclude the rule from any scheduled scans in your tailored profiles that auto-applies the remediation, otherwise, the remediation will be re-applied during the next scheduled scan.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compliance-inconsistent_compliance-remediation"><a class="anchor" href="#compliance-inconsistent_compliance-remediation"></a>Inconsistent ComplianceScan</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>ScanSetting</code> object lists the node roles that the compliance scans generated from the <code>ScanSetting</code> or <code>ScanSettingBinding</code> objects would scan. Each node role usually maps to a machine config pool.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is expected that all machines in a machine config pool are identical and all scan results from the nodes in a pool should be identical.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If some of the results are different from others, the Compliance Operator flags a <code>ComplianceCheckResult</code> object where some of the nodes will report as <code>INCONSISTENT</code>. All <code>ComplianceCheckResult</code> objects are also labeled with <code>compliance.openshift.io/inconsistent-check</code>.</p>
</div>
<div class="paragraph">
<p>Because the number of machines in a pool might be quite large, the Compliance Operator attempts to find the most common state and list the nodes that differ from the common state. The most common state is stored in the <code>compliance.openshift.io/most-common-status</code> annotation and the annotation <code>compliance.openshift.io/inconsistent-source</code> contains pairs of <code>hostname:status</code> of check statuses that differ from the most common status. If no common state can be found, all the <code>hostname:status</code> pairs are listed in the <code>compliance.openshift.io/inconsistent-source annotation</code>.</p>
</div>
<div class="paragraph">
<p>If possible, a remediation is still created so that the cluster can converge to a compliant status. However, this might not always be possible and correcting the difference between nodes must be done manually. The compliance scan must be re-run to get a consistent result by annotating the scan with the <code>compliance.openshift.io/rescan=</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-compliance <span class="se">\</span>
annotate compliancescans/rhcos4-e8-worker compliance.openshift.io/rescan<span class="o">=</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1 _additional-resources">
<h2 id="additional-resources"><a class="anchor" href="#additional-resources"></a>Additional resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../../../nodes/nodes/nodes-nodes-managing.html#nodes-nodes-managing-about_nodes-nodes-managing">Modifying nodes</a>.</p>
</li>
</ul>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/nav-tertiary.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/reformat-html.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/hc-search.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/clipboard.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/collapsible.js" type="text/javascript"></script>
  <script>
  var dk = 'openshift-aro';
  var version = 'Branch Build';

  var distros = {
    'openshift-origin': ['docs_origin', version],
    // specific labels are used for OSD instead of the URL filter, due to its unusual URL structure; assume v4
    'openshift-dedicated': ['docs_dedicated_v4'],
    'openshift-online': ['docs_online', version],
    'openshift-enterprise': ['docs_cp', version],
    'openshift-telco': ['docs_telco', version],
    'openshift-aro' : ['docs_aro', version],
    'openshift-rosa' : ['docs_rosa'],
    'openshift-acs' : ['docs_acs', version],
    'openshift-serverless' : ['docs_serverless', version],
    'openshift-pipelines' : ['docs_pipelines', version],
    'openshift-builds' : ['docs_builds', version],
    'openshift-gitops' : ['docs_gitops', version],
    'openshift-lightspeed' : ['docs_lightspeed', version],
    'openshift-service-mesh' : ['docs_service_mesh', version]
  };

  // only OSD v3 docs have the version variable specified
  if (dk == "openshift-dedicated" && version == "3") {
    distros['openshift-dedicated'] = ['docs_dedicated_v3']
  }

  distros[dk] ? hcSearchCategory.apply(null, distros[dk]) : hcSearchCategory("docs");
  </script>
  <script type="text/javascript">
  /*<![CDATA[*/
  $(document).ready(function() {
    $("[id^='topicGroup']").on('show.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicGroup']").on('hide.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });

    const collapsibleContent = document.getElementsByTagName("details");
    for (var i = 0; i < collapsibleContent.length; i++) {
      collapsibleContent[i].setAttribute("open", "");
    }

  });
  /*]]>*/
  </script>

  <footer id="rh">

    <div class="container">
        <div class="row">

            <div class="col-sm-2">
                <img src="https://assets.openshift.net/content/img/Logo-Red_Hat-OpenShift-A-Reverse-RGB.svg" class="img-fluid" alt="Red Hat" style="height: 30px;">
            </div>

            <div class="col-sm-3">
              <p class="text-nowrap">Copyright © 2025 Red Hat, Inc.</p>
            </div>



            <div class="col">
                <nav class="nav">
                    <a target="_blank" href="https://www.redhat.com/en/about/privacy-policy" class="nav-link">Privacy statement</a>
                    <a target="_blank" href="https://www.openshift.com/legal/terms/" class="nav-link">Terms of use</a>
                    <a target="_blank" href="https://www.redhat.com/en/about/all-policies-guidelines" class="nav-link">All policies and guidelines</a>
                    <a id="teconsent"></a>
                </nav>
            </div>
        </div>
    </div>
</footer>
<div id="consent_blackbar" style="z-index: 100; position: fixed"></div>



<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->

  <!-- adjust page css based on breadcrumb and/or resize -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      }
    });

    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      } else if ($(window).width() < 1008) {
        sidebar.classList.remove('wide');
        document.querySelector('#hc-search').classList.remove('wide');
        if (sidebar.classList.contains('open')) {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }
        document.querySelector('.main').style.paddingTop = '0px';
      }
    });

    function adjustSide() {
      sidebar.classList.add('wide');
      document.querySelector('#hc-search').classList.add('wide');
      sidebar.style.display = 'block';
      document.querySelector('.sidebar').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 125), 10) + "px";
      document.querySelector('#hc-search').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 95), 10) + "px";
    }

    function adjustToc() {
      if (document.querySelector('#toc') !== null) {
        document.querySelector('#toc').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      }
    }

    function adjustMain() {
      document.querySelector('html').style.scrollPaddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      document.querySelector('.main').style.paddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight - 70), 10) + "px";
    }

  </script>

  <!-- remove toc active class when page is loaded -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      var tocItems = $("#toc a");

      for (let i = 0; i < tocItems.length; i++) {
        tocItems[i].classList.remove("toc-active");
      }
    })
  </script>

  <!-- maintain sidebar scroll position between page loads -->
  <script type="text/javascript">
    let sidebar = document.querySelector(".sidebar");
    let scrolltop = localStorage.getItem("sidebar-scroll");

    if (scrolltop == null) {
      sidebar.scrollTop = parseInt(top, 10);
    }

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
    });

    window.addEventListener('load', () => {
      sidebar.scrollTo(0, scrolltop)
    })
  </script>

  <!-- open/close the nav -->
  <script type="text/javascript">
    function closeNav() {
      let sidebar = document.querySelector(".sidebar");
      sidebar.style.display = "none";
      sidebar.classList.remove('open');
    }

    function openNav() {
      let sidebar = document.querySelector(".sidebar");
      let hc_search = document.querySelector('#hc-search');
      sidebar.style.display = "block";
      sidebar.style.top = "0px";
      hc_search.style.top = 'unset';
      sidebar.classList.add('open');
    }
  </script>

  <!-- clear and add toc-active to clicked toc link -->
  <script type="text/javascript">
  $("#toc a").click(function() {
    var tocItems = $("#toc a");
    for (let i = 0; i < tocItems.length; i++) {
      tocItems[i].classList.remove("toc-active");
    }
    this.classList.add("toc-active");
  });
  </script>

  <!-- update active toc class when mouse scrolls -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener("wheel", () => {

        const ioConfiguration = {
          "rootMargin": "-120px 0px -400px 0px",
          "threshold": 0
        };

        const observer = new IntersectionObserver(setCurrent, ioConfiguration, entries => {
          entries.forEach(entry => {
            var id = entry.target.getAttribute('id');
            //fight with js
            document.querySelector(`#toc li a[href="#${id}"]`).classList.remove('toc-active');
          });
        });

        //track all h1-4 headings that have an id
        document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
          observer.observe(h);
        });

        //runs when the IntersectionObserver fires
        function setCurrent(e) {
          var allTocLinks = document.querySelectorAll("#toc li a");
          if (allTocLinks !== undefined) {
            e.map(i => {
              if (i.isIntersecting && i.intersectionRatio >= 1) {
                allTocLinks.forEach(link => link.classList.remove("toc-active"));
                document.querySelector(`#toc li a[href="#${i.target.id}"]`).classList.add('toc-active')
              }
            })
          }
        };

        //make clicked toc item active and stop IntersectionObserver
        $("#toc a").click(function() {
          //stop tracking all h1-4 headings that have an id
          document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
            observer.unobserve(h);
          });
          var tocItems = $("#toc a");
          if (tocItems !== undefined) {
            for (let i = 0; i < tocItems.length; i++) {
              tocItems[i].classList.remove("toc-active");
            };
            this.classList.add("toc-active");
          }
        })
      })
    })
  </script>

  <!--handle page scroll top and bottom, add toc-active -->
  <script type="text/javascript">
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active")
          };
          tocItems[tocItems.length - 1].classList.add("toc-active");
        };
      //scroll to top
      if(window.pageYOffset === 0) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active");
          };
          tocItems[0].classList.add("toc-active");
        };
      })
  </script>

  <!-- adjust alerts on mobile -->
  <script type="text/javascript">
    alert = document.querySelector('#support-alert')
    window.addEventListener("wheel", () => {
      if ($(window).width() < 1008) {
        //adjust alert
        if(window.pageYOffset > 0) {
          if(alert !== null) {
            document.querySelector('#support-alert').style.position = "fixed";
            document.querySelector('#support-alert').style.bottom = "0px";
            document.querySelector('#support-alert').style.margin = "5px";
            document.querySelector('#support-alert').style.zIndex = "9999999";
          }
        }
      }
   });
    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        if(alert !== null) {
          document.querySelector('#support-alert').style.removeProperty('position');
          document.querySelector('#support-alert').style.removeProperty('bottom');
          document.querySelector('#support-alert').style.removeProperty('margin');
          document.querySelector('#support-alert').style.removeProperty('zIndex');
        }
      }
    })
  </script>

  <!-- hide footer after 3 seconds -->
  <script type="text/javascript">
    const hideFooter = () => {
      document.querySelector('footer#rh, footer.footer-origin-docs').style.display = "none";
    };

    window.addEventListener('load', function() {
      setTimeout(hideFooter, 3000);
    });
  </script>
</body>
</html>
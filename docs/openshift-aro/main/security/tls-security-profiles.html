

<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  
  
  <title>Configuring TLS security profiles | Security and compliance | Azure Red Hat OpenShift Branch Build</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css"/>
  <link href="https://docs.okd.io/latest/_stylesheets/search.css" rel="stylesheet" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/autumn.css" rel="stylesheet"  media="screen"/>
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png"/>
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css"/>
  <link href="https://assets.openshift.net/content/osh-nav-footer.css" rel="stylesheet" type="text/css" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/docs.css" rel="stylesheet"  media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/>
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">

  <!-- Adobe DTM -->
  <script src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <!-- End Adobe DTM -->

  <script id="trustarc" src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
        rel="stylesheet">

</head>

<body onload="selectVersion('Branch Build');">
  
<nav id="main">
  <div class="container">
    <div class="row">
      <div class="navbar navbar-default navbar-openshift" role="navigation">
        <div class="navbar-header">
            <a href="#nav-main" class="dropdown-toggle navbar-menu-toggle hidden visible-xs" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          <a class="navbar-brand" href="/"></a>
        </div>
        <div id="nav-main" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="products" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                Products <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-column flex-md-row">
                  <div class="col-xs-12 col-sm-3">
                    <h3>Overview</h3>
                    <ul class="nav flex-column">
                      <li><a target="_blank" href="https://www.openshift.com/products/features/">Features</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/products/pricing/">Pricing</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-9">
                    <h3>Featured Products</h3>
                    <ul class="nav">
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/container-platform/">Red Hat OpenShift Container&nbsp;Platform</a>
                        <p class="d-none d-md-block">Build, deploy and manage your applications across cloud- and on-premise infrastructure</p>
                      </li>
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/dedicated/">Red Hat OpenShift Dedicated</a>
                        <p class="d-none d-md-block">Single-tenant, high-availability Kubernetes clusters in the public cloud</p>
                      </li>

                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/online/">Red Hat OpenShift Online</a>
                        <p class="d-none d-md-block">The fastest way for developers to build, host and scale applications in the public cloud</p>
                      </li>

                      <li class="nav-item">
                        <a target="_blank" href="https://www.openshift.com/products/">All products <span class="fa fa-angle-right"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li id="learn" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Learn <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-md-nowrap">
                  <div class="col-xs-12 col-sm-6">
                    <h3>Learn</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/what-is-openshift/">What is OpenShift</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/get-started/">Get started</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/partners/">Partners</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/success-stories/">Customer success stories</a></li>
                      <li><a target="_blank" href="https://blog.openshift.com">Blog</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/resources/">Resources</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <h3>Technology Topics</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/knative/">Knative</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/security/">Security</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/kubernetes/">Kubernetes</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/service-brokers/">Service Brokers</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Community <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://commons.openshift.org">OpenShift Commons</a></li>
                <li><a target="_blank" href="https://www.okd.io">Open Source (OKD)</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/startups/">Startups</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/grants/">Grants</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Support <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://help.openshift.com">Help Center</a></li>
                <li><a href="https://docs.openshift.com">OpenShift Docs</a></li>
              </ul>
            </li>

            <li><a target="_blank" class="nav-sign-up" href="https://www.openshift.com/trial/">Free Trial</a></li>

            <li><a target="_blank" href="https://console.redhat.com/openshift" class="nav-sign-in">Log In <span class="fa fa-angle-right"></span></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

  
  <div class="container">
    <button id="hc-open-btn" class="open-btn-sm" onclick="openNav()" aria-label="Open"><span class="fa fa-bars" /></button>
    <ol class="breadcrumb hide-for-print">
      
      <span>
        <div class="alert alert-info" role="primary" id="support-info">
          <strong>Starting on March 12, 2025, OpenShift docs will only be available at <a href="https://docs.redhat.com/en/" style="color: #0C5460 !important" class="link-primary">docs.redhat.com</a>. From that time on, docs.openshift.com links will automatically redirect to their locations on docs.redhat.com.
          </strong>
        </div>
      </span>
      

      

      

      

      

      

      

      
      

      

      


      

      


      

      

      <li class="sitename">
        <a href="/">
          Documentation</a>
      </li>
      <li class="hidden-xs active">
        
          <a href="../security/index.html">Azure Red Hat OpenShift Branch Build</a>
        
      </li>
      <li class="hidden-xs active">
        <a href="../security/index.html">Security and compliance</a>
      </li>
      
      
      <li class="hidden-xs active">
        Configuring TLS security profiles
      </li>
      
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas hide-for-print">
        <div class="row-fluid">
          <div id="btn-close">
            <button id="hc-close-btn" onclick="closeNav()" class="close-btn-sm" aria-label="close"><span class="fa fa-times" /></button>
          </div>
          <div id="hc-search">
            <input id="hc-search-input" type="text" aria-label="search">
            <button id="hc-search-btn" aria-label="search"><span class="fa fa-search" /></button>
          </div>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0"><span id="tgSpan0" class="fa fa-angle-down"></span>Security and compliance</a>
      <ul id="topicGroup0" class="collapse in list-unstyled">
            <li><a class="" href="../security/index.html">Security and compliance overview</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-1"><span id="sgSpan-0-1" class="fa fa-caret-right"></span>&nbsp;Container security</a>
              <ul id="topicSubGroup-0-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../security/container_security/security-understanding.html">Understanding container security</a></li>
                  <li><a class="" href="../security/container_security/security-hosts-vms.html">Understanding host and VM security</a></li>
                  <li><a class="" href="../security/container_security/security-hardening.html">Hardening Red Hat Enterprise Linux CoreOS</a></li>
                  <li><a class="" href="../security/container_security/security-container-signature.html">Container image signatures</a></li>
                  <li><a class="" href="../security/container_security/security-compliance.html">Understanding compliance</a></li>
                  <li><a class="" href="../security/container_security/security-container-content.html">Securing container content</a></li>
                  <li><a class="" href="../security/container_security/security-registries.html">Using container registries securely</a></li>
                  <li><a class="" href="../security/container_security/security-build.html">Securing the build process</a></li>
                  <li><a class="" href="../security/container_security/security-deploy.html">Deploying containers</a></li>
                  <li><a class="" href="../security/container_security/security-platform.html">Securing the container platform</a></li>
                  <li><a class="" href="../security/container_security/security-network.html">Securing networks</a></li>
                  <li><a class="" href="../security/container_security/security-storage.html">Securing attached storage</a></li>
                  <li><a class="" href="../security/container_security/security-monitoring.html">Monitoring cluster events and logs</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-2"><span id="sgSpan-0-2" class="fa fa-caret-right"></span>&nbsp;Compliance Operator</a>
              <ul id="topicSubGroup-0-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../security/compliance_operator/co-overview.html">Compliance Operator overview</a></li>
                  <li><a class="" href="../security/compliance_operator/compliance-operator-release-notes.html">Compliance Operator release notes</a></li>
                  <li><a class="" href="../security/compliance_operator/co-support.html">Compliance Operator support</a></li>
                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-3"><span id="ssgSpan-0-2-3" class="fa fa-caret-right"></span>&nbsp;Compliance Operator concepts</a>
                  <ul id="topicSubSubGroup-0-2-3" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../security/compliance_operator/co-concepts/compliance-operator-understanding.html" style="padding-left: 70px;">Understanding the Compliance Operator</a></li>
                    <li><a class="" href="../security/compliance_operator/co-concepts/compliance-operator-crd.html" style="padding-left: 70px;">Understanding the Custom Resource Definitions</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-4"><span id="ssgSpan-0-2-4" class="fa fa-caret-right"></span>&nbsp;Compliance Operator management</a>
                  <ul id="topicSubSubGroup-0-2-4" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../security/compliance_operator/co-management/compliance-operator-installation.html" style="padding-left: 70px;">Installing the Compliance Operator</a></li>
                    <li><a class="" href="../security/compliance_operator/co-management/compliance-operator-updating.html" style="padding-left: 70px;">Updating the Compliance Operator</a></li>
                    <li><a class="" href="../security/compliance_operator/co-management/compliance-operator-manage.html" style="padding-left: 70px;">Managing the Compliance Operator</a></li>
                    <li><a class="" href="../security/compliance_operator/co-management/compliance-operator-uninstallation.html" style="padding-left: 70px;">Uninstalling the Compliance Operator</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-5"><span id="ssgSpan-0-2-5" class="fa fa-caret-right"></span>&nbsp;Compliance Operator scan management</a>
                  <ul id="topicSubSubGroup-0-2-5" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-supported-profiles.html" style="padding-left: 70px;">Supported compliance profiles</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-scans.html" style="padding-left: 70px;">Compliance Operator scans</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-tailor.html" style="padding-left: 70px;">Tailoring the Compliance Operator</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-raw-results.html" style="padding-left: 70px;">Retrieving Compliance Operator raw results</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-remediation.html" style="padding-left: 70px;">Managing Compliance Operator remediation</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-advanced.html" style="padding-left: 70px;">Performing advanced Compliance Operator tasks</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-troubleshooting.html" style="padding-left: 70px;">Troubleshooting Compliance Operator scans</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/oc-compliance-plug-in-using.html" style="padding-left: 70px;">Using the oc-compliance plugin</a></li>                  </ul>
                  </li>
              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-3"><span id="sgSpan-0-3" class="fa fa-caret-right"></span>&nbsp;File Integrity Operator</a>
              <ul id="topicSubGroup-0-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../security/file_integrity_operator/fio-overview.html">File Integrity Operator Overview</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-release-notes.html">File Integrity Operator release notes</a></li>
                  <li><a class="" href="../security/file_integrity_operator/fio-support.html">File Integrity Operator support</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-installation.html">Installing the File Integrity Operator</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-updating.html">Updating the File Integrity Operator</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-understanding.html">Understanding the File Integrity Operator</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-configuring.html">Configuring the File Integrity Operator</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-advanced-usage.html">Performing advanced File Integrity Operator tasks</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-troubleshooting.html">Troubleshooting the File Integrity Operator</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-4"><span id="sgSpan-0-4" class="fa fa-caret-right"></span>&nbsp;Security Profiles Operator</a>
              <ul id="topicSubGroup-0-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../security/security_profiles_operator/spo-overview.html">Security Profiles Operator overview</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-release-notes.html">Security Profiles Operator release notes</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-support.html">Security Profiles Operator support</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-understanding.html">Understanding the Security Profiles Operator</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-enabling.html">Enabling the Security Profiles Operator</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-seccomp.html">Managing seccomp profiles</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-selinux.html">Managing SELinux profiles</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-advanced.html">Advanced Security Profiles Operator tasks</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-troubleshooting.html">Troubleshooting the Security Profiles Operator</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-uninstalling.html">Uninstalling the Security Profiles Operator</a></li>              </ul>
            </li>
            <li><a class="" href="../security/audit-log-view.html">Viewing audit logs</a></li>
            <li><a class="" href="../security/audit-log-policy-config.html">Configuring the audit log policy</a></li>
            <li><a class=" active" href="../security/tls-security-profiles.html">Configuring TLS security profiles</a></li>
            <li><a class="" href="../security/seccomp-profiles.html">Configuring seccomp profiles</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-9"><span id="sgSpan-0-9" class="fa fa-caret-right"></span>&nbsp;Network-Bound Disk Encryption (NBDE)</a>
              <ul id="topicSubGroup-0-9" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../security/network_bound_disk_encryption/nbde-about-disk-encryption-technology.html">About disk encryption technology</a></li>
                  <li><a class="" href="../security/network_bound_disk_encryption/nbde-tang-server-installation-considerations.html">Tang server installation considerations</a></li>
                  <li><a class="" href="../security/network_bound_disk_encryption/nbde-managing-encryption-keys.html">Tang server encryption key management</a></li>              </ul>
            </li>
      </ul>
    </li>
</ul>
      </div>
      <div id="hc-search-modal">
        <div id="hc-modal-content">
          <span id="hc-modal-close">&times;</span>
          <div id="hc-search-results-wrapper">
            <div id="hc-search-results"></div>
            <div id="hc-search-progress-indicator" class="text-center search-progress-indicator"><i class="fa fa-circle-o-notch fa-spin" style="font-size:42px"></i></div>
            <div class="text-center">
              <button id="hc-search-more-btn">Show more results</button>
            </div>
          </div>
        </div>
      </div>
      <div class="print-logo" style="display:none;">
        <img src="https://www.redhat.com/cms/managed-files/Logo-Red_Hat-OpenShift-A-Standard-RGB_0_0.svg" alt="print logo"/>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h1>
            Configuring TLS security profiles
          </h1>
        </div>
        
        
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#tls-profiles-understanding_tls-security-profiles">Understanding TLS security profiles</a></li>
<li><a href="#tls-profiles-view-details_tls-security-profiles">Viewing TLS security profile details</a></li>
<li><a href="#tls-profiles-ingress-configuring_tls-security-profiles">Configuring the TLS security profile for the Ingress Controller</a></li>
<li><a href="#tls-profiles-kubernetes-configuring_tls-security-profiles">Configuring the TLS security profile for the control plane</a></li>
<li><a href="#tls-profiles-kubelet-configuring_tls-security-profiles">Configuring the TLS security profile for the kubelet</a></li>
</ul>
</div>
<div class="paragraph">
<p>TLS security profiles provide a way for servers to regulate which ciphers a client can use when connecting to the server. This ensures that Azure Red Hat OpenShift components use cryptographic libraries that do not allow known insecure protocols, ciphers, or algorithms.</p>
</div>
<div class="paragraph">
<p>Cluster administrators can choose which TLS security profile to use for each of the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the Ingress Controller</p>
</li>
<li>
<p>the control plane</p>
<div class="paragraph">
<p>This includes the Kubernetes API server, Kubernetes controller manager, Kubernetes scheduler, OpenShift API server, OpenShift OAuth API server, OpenShift OAuth server, etcd, the Machine Config Operator, and the Machine Config Server.</p>
</div>
</li>
<li>
<p>the kubelet, when it acts as an HTTP server for the Kubernetes API server</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tls-profiles-understanding_tls-security-profiles"><a class="anchor" href="#tls-profiles-understanding_tls-security-profiles"></a>Understanding TLS security profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use a TLS (Transport Layer Security) security profile to define which TLS ciphers are required by various Azure Red Hat OpenShift components. The Azure Red Hat OpenShift TLS security profiles are based on <a href="https://wiki.mozilla.org/Security/Server_Side_TLS">Mozilla recommended configurations</a>.</p>
</div>
<div class="paragraph">
<p>You can specify one of the following TLS security profiles for each component:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. TLS security profiles</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Profile</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Old</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This profile is intended for use with legacy clients or libraries. The profile is based on the <a href="https://wiki.mozilla.org/Security/Server_Side_TLS#Old_backward_compatibility">Old backward compatibility</a> recommended configuration.</p>
</div>
<div class="paragraph">
<p>The <code>Old</code> profile requires a minimum TLS version of 1.0.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For the Ingress Controller, the minimum TLS version is converted from 1.0 to 1.1.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Intermediate</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This profile is the recommended configuration for the majority of clients. It is the  default TLS security profile for the Ingress Controller, kubelet, and control plane. The profile is based on the <a href="https://wiki.mozilla.org/Security/Server_Side_TLS#Intermediate_compatibility_.28recommended.29">Intermediate compatibility</a> recommended configuration.</p>
</div>
<div class="paragraph">
<p>The <code>Intermediate</code> profile requires a minimum TLS version of 1.2.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Modern</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This profile is intended for use with modern clients that have no need for backwards compatibility. This profile is based on the <a href="https://wiki.mozilla.org/Security/Server_Side_TLS#Modern_compatibility">Modern compatibility</a> recommended configuration.</p>
</div>
<div class="paragraph">
<p>The <code>Modern</code> profile requires a minimum TLS version of 1.3.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In Azure Red Hat OpenShift 4.6, 4.7, and 4.8, the <code>Modern</code> profile is unsupported. If selected, the <code>Intermediate</code> profile is enabled.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Custom</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This profile allows you to define the TLS version and ciphers to use.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Use caution when using a <code>Custom</code> profile, because invalid configurations can cause problems.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using one of the predefined profile types, the effective profile configuration is subject to change between releases. For example, given a specification to use the Intermediate profile deployed on release X.Y.Z, an upgrade to release X.Y.Z+1 might cause a new profile configuration to be applied, resulting in a rollout.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tls-profiles-view-details_tls-security-profiles"><a class="anchor" href="#tls-profiles-view-details_tls-security-profiles"></a>Viewing TLS security profile details</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can view the minimum TLS version and ciphers for the predefined TLS security profiles for each of the following components: Ingress Controller, control plane, and kubelet.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The effective configuration of minimum TLS version and list of ciphers for a profile might differ between components.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>View details for a specific TLS security profile:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc explain &lt;component&gt;.spec.tlsSecurityProfile.&lt;profile&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>For <code>&lt;component&gt;</code>, specify <code>ingresscontroller</code>, <code>apiserver</code>, or <code>kubeletconfig</code>. For <code>&lt;profile&gt;</code>, specify <code>old</code>, <code>intermediate</code>, or <code>custom</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, to check the ciphers included for the <code>intermediate</code> profile for the control plane:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc explain apiserver.spec.tlsSecurityProfile.intermediate</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">KIND:     APIServer
VERSION:  config.openshift.io/v1

DESCRIPTION:
    intermediate is a TLS security profile based on:
</span><span class="gp">    https://wiki.mozilla.org/Security/Server_Side_TLS#</span>Intermediate_compatibility_.28recommended.29
<span class="go">    and looks like this (yaml):
    ciphers: - TLS_AES_128_GCM_SHA256 - TLS_AES_256_GCM_SHA384 -
    TLS_CHACHA20_POLY1305_SHA256 - ECDHE-ECDSA-AES128-GCM-SHA256 -
    ECDHE-RSA-AES128-GCM-SHA256 - ECDHE-ECDSA-AES256-GCM-SHA384 -
    ECDHE-RSA-AES256-GCM-SHA384 - ECDHE-ECDSA-CHACHA20-POLY1305 -
    ECDHE-RSA-CHACHA20-POLY1305 - DHE-RSA-AES128-GCM-SHA256 -
    DHE-RSA-AES256-GCM-SHA384 minTLSVersion: TLSv1.2</span></code></pre>
</div>
</div>
</li>
<li>
<p>View all details for the <code>tlsSecurityProfile</code> field of a component:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc explain &lt;component&gt;.spec.tlsSecurityProfile <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>For <code>&lt;component&gt;</code>, specify <code>ingresscontroller</code>, <code>apiserver</code>, or <code>kubeletconfig</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, to check all details for the <code>tlsSecurityProfile</code> field for the Ingress Controller:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc explain ingresscontroller.spec.tlsSecurityProfile</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">KIND:     IngressController
VERSION:  operator.openshift.io/v1

</span><span class="gp">RESOURCE: tlsSecurityProfile &lt;Object&gt;</span><span class="w">
</span><span class="go">
DESCRIPTION:
</span><span class="c">     ...
</span><span class="go">
FIELDS:
</span><span class="gp">   custom	&lt;&gt;</span><span class="w">
</span><span class="go">     custom is a user-defined TLS security profile. Be extremely careful using a
     custom profile as invalid configurations can be catastrophic. An example
     custom profile looks like this:
     ciphers: - ECDHE-ECDSA-CHACHA20-POLY1305 - ECDHE-RSA-CHACHA20-POLY1305 -
     ECDHE-RSA-AES128-GCM-SHA256 - ECDHE-ECDSA-AES128-GCM-SHA256 minTLSVersion:
     TLSv1.1

</span><span class="gp">   intermediate	&lt;&gt;</span><span class="w">
</span><span class="go">     intermediate is a TLS security profile based on:
</span><span class="gp">     https://wiki.mozilla.org/Security/Server_Side_TLS#</span>Intermediate_compatibility_.28recommended.29
<span class="go">     and looks like this (yaml):
</span><span class="c">     ... <i class="conum" data-value="1"></i><b>(1)</b>
</span><span class="go">
</span><span class="gp">   modern	&lt;&gt;</span><span class="w">
</span><span class="go">     modern is a TLS security profile based on:
</span><span class="gp">     https://wiki.mozilla.org/Security/Server_Side_TLS#</span>Modern_compatibility and
<span class="go">     looks like this (yaml):
</span><span class="c">     ... <i class="conum" data-value="2"></i><b>(2)</b>
</span><span class="go">     NOTE: Currently unsupported.

</span><span class="gp">   old	&lt;&gt;</span><span class="w">
</span><span class="go">     old is a TLS security profile based on:
</span><span class="gp">     https://wiki.mozilla.org/Security/Server_Side_TLS#</span>Old_backward_compatibility
<span class="go">     and looks like this (yaml):
</span><span class="c">     ... <i class="conum" data-value="3"></i><b>(3)</b>
</span><span class="go">
</span><span class="gp">   type	&lt;string&gt;</span><span class="w">
</span><span class="c">     ...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Lists ciphers and minimum version for the <code>intermediate</code> profile here.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Lists ciphers and minimum version for the <code>modern</code> profile here.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Lists ciphers and minimum version for the <code>old</code> profile here.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tls-profiles-ingress-configuring_tls-security-profiles"><a class="anchor" href="#tls-profiles-ingress-configuring_tls-security-profiles"></a>Configuring the TLS security profile for the Ingress Controller</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To configure a TLS security profile for an Ingress Controller, edit the <code>IngressController</code> custom resource (CR) to specify a predefined or custom TLS security profile. If a TLS security profile is not configured, the default value is based on the TLS security profile set for the API server.</p>
</div>
<div class="listingblock">
<div class="title">Sample <code>IngressController</code> CR that configures the <code>Old</code> TLS security profile</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">operator.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">IngressController</span>
 <span class="s">...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">tlsSecurityProfile</span><span class="pi">:</span>
    <span class="na">old</span><span class="pi">:</span> <span class="pi">{}</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">Old</span>
 <span class="s">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The TLS security profile defines the minimum TLS version and the TLS ciphers for TLS connections for Ingress Controllers.</p>
</div>
<div class="paragraph">
<p>You can see the ciphers and the minimum TLS version of the configured TLS security profile in the <code>IngressController</code> custom resource (CR) under <code>Status.Tls Profile</code> and the configured TLS security profile under <code>Spec.Tls Security Profile</code>. For the <code>Custom</code> TLS security profile, the specific ciphers and minimum TLS version are listed under both parameters.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The HAProxy Ingress Controller image supports TLS <code>1.3</code> and the <code>Modern</code> profile.</p>
</div>
<div class="paragraph">
<p>The Ingress Operator also converts the TLS <code>1.0</code> of an <code>Old</code> or <code>Custom</code> profile to <code>1.1</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>cluster-admin</code> role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>IngressController</code> CR in the <code>openshift-ingress-operator</code> project to configure the TLS security profile:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc edit IngressController default <span class="nt">-n</span> openshift-ingress-operator</code></pre>
</div>
</div>
</li>
<li>
<p>Add the <code>spec.tlsSecurityProfile</code> field:</p>
<div class="listingblock">
<div class="title">Sample <code>IngressController</code> CR for a <code>Custom</code> profile</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">operator.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">IngressController</span>
 <span class="s">...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">tlsSecurityProfile</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">Custom</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="na">custom</span><span class="pi">:</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="na">ciphers</span><span class="pi">:</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="pi">-</span> <span class="s">ECDHE-ECDSA-CHACHA20-POLY1305</span>
      <span class="pi">-</span> <span class="s">ECDHE-RSA-CHACHA20-POLY1305</span>
      <span class="pi">-</span> <span class="s">ECDHE-RSA-AES128-GCM-SHA256</span>
      <span class="pi">-</span> <span class="s">ECDHE-ECDSA-AES128-GCM-SHA256</span>
      <span class="na">minTLSVersion</span><span class="pi">:</span> <span class="s">VersionTLS11</span>
 <span class="s">...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the TLS security profile type (<code>Old</code>, <code>Intermediate</code>, or <code>Custom</code>). The default is <code>Intermediate</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the appropriate field for the selected type:
<div class="ulist">
<ul>
<li>
<p><code>old: {}</code></p>
</li>
<li>
<p><code>intermediate: {}</code></p>
</li>
<li>
<p><code>custom:</code></p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>For the <code>custom</code> type, specify a list of TLS ciphers and minimum accepted TLS version.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the file to apply the changes.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Verify that the profile is set in the <code>IngressController</code> CR:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc describe IngressController default <span class="nt">-n</span> openshift-ingress-operator</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">Name:         default
Namespace:    openshift-ingress-operator
</span><span class="gp">Labels:       &lt;none&gt;</span><span class="w">
</span><span class="gp">Annotations:  &lt;none&gt;</span><span class="w">
</span><span class="go">API Version:  operator.openshift.io/v1
Kind:         IngressController
</span><span class="c"> ...
</span><span class="go">Spec:
</span><span class="c"> ...
</span><span class="go">  Tls Security Profile:
    Custom:
      Ciphers:
        ECDHE-ECDSA-CHACHA20-POLY1305
        ECDHE-RSA-CHACHA20-POLY1305
        ECDHE-RSA-AES128-GCM-SHA256
        ECDHE-ECDSA-AES128-GCM-SHA256
      Min TLS Version:  VersionTLS11
    Type:               Custom
</span><span class="c"> ...</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tls-profiles-kubernetes-configuring_tls-security-profiles"><a class="anchor" href="#tls-profiles-kubernetes-configuring_tls-security-profiles"></a>Configuring the TLS security profile for the control plane</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To configure a TLS security profile for the control plane, edit the <code>APIServer</code> custom resource (CR) to specify a predefined or custom TLS security profile. Setting the TLS security profile in the <code>APIServer</code> CR propagates the setting to the following control plane components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Kubernetes API server</p>
</li>
<li>
<p>Kubernetes controller manager</p>
</li>
<li>
<p>Kubernetes scheduler</p>
</li>
<li>
<p>OpenShift API server</p>
</li>
<li>
<p>OpenShift OAuth API server</p>
</li>
<li>
<p>OpenShift OAuth server</p>
</li>
<li>
<p>etcd</p>
</li>
<li>
<p>Machine Config Operator</p>
</li>
<li>
<p>Machine Config Server</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a TLS security profile is not configured, the default TLS security profile is <code>Intermediate</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The default TLS security profile for the Ingress Controller is based on the TLS security profile set for the API server.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Sample <code>APIServer</code> CR that configures the <code>Old</code> TLS security profile</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">config.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">APIServer</span>
 <span class="s">...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">tlsSecurityProfile</span><span class="pi">:</span>
    <span class="na">old</span><span class="pi">:</span> <span class="pi">{}</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">Old</span>
 <span class="s">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The TLS security profile defines the minimum TLS version and the TLS ciphers required to communicate with the control plane components.</p>
</div>
<div class="paragraph">
<p>You can see the configured TLS security profile in the <code>APIServer</code> custom resource (CR) under <code>Spec.Tls Security Profile</code>. For the <code>Custom</code> TLS security profile, the specific ciphers and minimum TLS version are listed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The control plane does not support TLS <code>1.3</code> as the minimum TLS version; the <code>Modern</code> profile is not supported because it requires TLS <code>1.3</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>cluster-admin</code> role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the default <code>APIServer</code> CR to configure the TLS security profile:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc edit APIServer cluster</code></pre>
</div>
</div>
</li>
<li>
<p>Add the <code>spec.tlsSecurityProfile</code> field:</p>
<div class="listingblock">
<div class="title">Sample <code>APIServer</code> CR for a <code>Custom</code> profile</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">config.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">APIServer</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">cluster</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">tlsSecurityProfile</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">Custom</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="na">custom</span><span class="pi">:</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="na">ciphers</span><span class="pi">:</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="pi">-</span> <span class="s">ECDHE-ECDSA-CHACHA20-POLY1305</span>
      <span class="pi">-</span> <span class="s">ECDHE-RSA-CHACHA20-POLY1305</span>
      <span class="pi">-</span> <span class="s">ECDHE-RSA-AES128-GCM-SHA256</span>
      <span class="pi">-</span> <span class="s">ECDHE-ECDSA-AES128-GCM-SHA256</span>
      <span class="na">minTLSVersion</span><span class="pi">:</span> <span class="s">VersionTLS11</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the TLS security profile type (<code>Old</code>, <code>Intermediate</code>, or <code>Custom</code>). The default is <code>Intermediate</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the appropriate field for the selected type:
<div class="ulist">
<ul>
<li>
<p><code>old: {}</code></p>
</li>
<li>
<p><code>intermediate: {}</code></p>
</li>
<li>
<p><code>custom:</code></p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>For the <code>custom</code> type, specify a list of TLS ciphers and minimum accepted TLS version.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the file to apply the changes.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Verify that the TLS security profile is set in the <code>APIServer</code> CR:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc describe apiserver cluster</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">Name:         cluster
Namespace:
</span><span class="c"> ...
</span><span class="go">API Version:  config.openshift.io/v1
Kind:         APIServer
</span><span class="c"> ...
</span><span class="go">Spec:
  Audit:
    Profile:  Default
  Tls Security Profile:
    Custom:
      Ciphers:
        ECDHE-ECDSA-CHACHA20-POLY1305
        ECDHE-RSA-CHACHA20-POLY1305
        ECDHE-RSA-AES128-GCM-SHA256
        ECDHE-ECDSA-AES128-GCM-SHA256
      Min TLS Version:  VersionTLS11
    Type:               Custom
</span><span class="c"> ...</span></code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the TLS security profile is set in the <code>etcd</code> CR:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc describe etcd cluster</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">Name:         cluster
Namespace:
</span><span class="c"> ...
</span><span class="go">API Version:  operator.openshift.io/v1
Kind:         Etcd
</span><span class="c"> ...
</span><span class="go">Spec:
  Log Level:         Normal
  Management State:  Managed
  Observed Config:
    Serving Info:
      Cipher Suites:
        TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
        TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
        TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
        TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
        TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256
        TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256
      Min TLS Version:           VersionTLS12
</span><span class="c"> ...</span></code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the TLS security profile is set in the Machine Config Server pod:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc logs machine-config-server-5msdv <span class="nt">-n</span> openshift-machine-config-operator</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">#</span><span class="w"> </span>...
<span class="go">I0905 13:48:36.968688       1 start.go:51] Launching server with tls min version: VersionTLS12 &amp; cipher suites [TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384 TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256]
</span><span class="gp">#</span><span class="w"> </span>...</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tls-profiles-kubelet-configuring_tls-security-profiles"><a class="anchor" href="#tls-profiles-kubelet-configuring_tls-security-profiles"></a>Configuring the TLS security profile for the kubelet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To configure a TLS security profile for the kubelet when it is acting as an HTTP server, create a <code>KubeletConfig</code> custom resource (CR) to specify a predefined or custom TLS security profile for specific nodes. If a TLS security profile is not configured, the default TLS security profile is <code>Intermediate</code>.</p>
</div>
<div class="paragraph">
<p>The kubelet uses its HTTP/GRPC server to communicate with the Kubernetes API server, which sends commands to pods, gathers logs, and run exec commands on pods through the kubelet.</p>
</div>
<div class="listingblock">
<div class="title">Sample <code>KubeletConfig</code> CR that configures the <code>Old</code> TLS security profile on worker nodes</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">machineconfiguration.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">KubeletConfig</span>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">tlsSecurityProfile</span><span class="pi">:</span>
    <span class="na">old</span><span class="pi">:</span> <span class="pi">{}</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">Old</span>
  <span class="na">machineConfigPoolSelector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="s">pools.operator.machineconfiguration.openshift.io/worker</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
<span class="c1"># ...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see the ciphers and the minimum TLS version of the configured TLS security profile in the <code>kubelet.conf</code> file on a configured node.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You are logged in to Azure Red Hat OpenShift as a user with the <code>cluster-admin</code> role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a <code>KubeletConfig</code> CR to configure the TLS security profile:</p>
<div class="listingblock">
<div class="title">Sample <code>KubeletConfig</code> CR for a <code>Custom</code> profile</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">machineconfiguration.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">KubeletConfig</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">set-kubelet-tls-security-profile</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">tlsSecurityProfile</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">Custom</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="na">custom</span><span class="pi">:</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="na">ciphers</span><span class="pi">:</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="pi">-</span> <span class="s">ECDHE-ECDSA-CHACHA20-POLY1305</span>
      <span class="pi">-</span> <span class="s">ECDHE-RSA-CHACHA20-POLY1305</span>
      <span class="pi">-</span> <span class="s">ECDHE-RSA-AES128-GCM-SHA256</span>
      <span class="pi">-</span> <span class="s">ECDHE-ECDSA-AES128-GCM-SHA256</span>
      <span class="na">minTLSVersion</span><span class="pi">:</span> <span class="s">VersionTLS11</span>
  <span class="na">machineConfigPoolSelector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="s">pools.operator.machineconfiguration.openshift.io/worker</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span> <i class="conum" data-value="4"></i><b>(4)</b>
<span class="c1">#...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the TLS security profile type (<code>Old</code>, <code>Intermediate</code>, or <code>Custom</code>). The default is <code>Intermediate</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the appropriate field for the selected type:
<div class="ulist">
<ul>
<li>
<p><code>old: {}</code></p>
</li>
<li>
<p><code>intermediate: {}</code></p>
</li>
<li>
<p><code>custom:</code></p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>For the <code>custom</code> type, specify a list of TLS ciphers and minimum accepted TLS version.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Optional: Specify the machine config pool label for the nodes you want to apply the TLS security profile.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create the <code>KubeletConfig</code> object:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create <span class="nt">-f</span> &lt;filename&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the number of worker nodes in the cluster, wait for the configured nodes to be rebooted one by one.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Verification</div>
<p>To verify that the profile is set,  perform the following steps after the nodes are in the <code>Ready</code> state:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start a debug session for a configured node:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc debug node/&lt;node_name&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Set <code>/host</code> as the root directory within the debug shell:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">sh-4.4#</span><span class="w"> </span><span class="nb">chroot</span> /host</code></pre>
</div>
</div>
</li>
<li>
<p>View the <code>kubelet.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">sh-4.4#</span><span class="w"> </span><span class="nb">cat</span> /etc/kubernetes/kubelet.conf</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">  "kind": "KubeletConfiguration",
  "apiVersion": "kubelet.config.k8s.io/v1beta1",
</span><span class="gp">#</span>...
<span class="go">  "tlsCipherSuites": [
    "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256",
    "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
    "TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384",
    "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384",
    "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256",
    "TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
  ],
  "tlsMinVersion": "VersionTLS12",
</span><span class="gp">#</span>...</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/nav-tertiary.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/reformat-html.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/hc-search.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/clipboard.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/collapsible.js" type="text/javascript"></script>
  <script>
  var dk = 'openshift-aro';
  var version = 'Branch Build';

  var distros = {
    'openshift-origin': ['docs_origin', version],
    // specific labels are used for OSD instead of the URL filter, due to its unusual URL structure; assume v4
    'openshift-dedicated': ['docs_dedicated_v4'],
    'openshift-online': ['docs_online', version],
    'openshift-enterprise': ['docs_cp', version],
    'openshift-telco': ['docs_telco', version],
    'openshift-aro' : ['docs_aro', version],
    'openshift-rosa' : ['docs_rosa'],
    'openshift-acs' : ['docs_acs', version],
    'openshift-serverless' : ['docs_serverless', version],
    'openshift-pipelines' : ['docs_pipelines', version],
    'openshift-builds' : ['docs_builds', version],
    'openshift-gitops' : ['docs_gitops', version],
    'openshift-lightspeed' : ['docs_lightspeed', version],
    'openshift-service-mesh' : ['docs_service_mesh', version]
  };

  // only OSD v3 docs have the version variable specified
  if (dk == "openshift-dedicated" && version == "3") {
    distros['openshift-dedicated'] = ['docs_dedicated_v3']
  }

  distros[dk] ? hcSearchCategory.apply(null, distros[dk]) : hcSearchCategory("docs");
  </script>
  <script type="text/javascript">
  /*<![CDATA[*/
  $(document).ready(function() {
    $("[id^='topicGroup']").on('show.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicGroup']").on('hide.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });

    const collapsibleContent = document.getElementsByTagName("details");
    for (var i = 0; i < collapsibleContent.length; i++) {
      collapsibleContent[i].setAttribute("open", "");
    }

  });
  /*]]>*/
  </script>

  <footer id="rh">

    <div class="container">
        <div class="row">

            <div class="col-sm-2">
                <img src="https://assets.openshift.net/content/img/Logo-Red_Hat-OpenShift-A-Reverse-RGB.svg" class="img-fluid" alt="Red Hat" style="height: 30px;">
            </div>

            <div class="col-sm-3">
              <p class="text-nowrap">Copyright  2025 Red Hat, Inc.</p>
            </div>



            <div class="col">
                <nav class="nav">
                    <a target="_blank" href="https://www.redhat.com/en/about/privacy-policy" class="nav-link">Privacy statement</a>
                    <a target="_blank" href="https://www.openshift.com/legal/terms/" class="nav-link">Terms of use</a>
                    <a target="_blank" href="https://www.redhat.com/en/about/all-policies-guidelines" class="nav-link">All policies and guidelines</a>
                    <a id="teconsent"></a>
                </nav>
            </div>
        </div>
    </div>
</footer>
<div id="consent_blackbar" style="z-index: 100; position: fixed"></div>



<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->

  <!-- adjust page css based on breadcrumb and/or resize -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      }
    });

    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      } else if ($(window).width() < 1008) {
        sidebar.classList.remove('wide');
        document.querySelector('#hc-search').classList.remove('wide');
        if (sidebar.classList.contains('open')) {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }
        document.querySelector('.main').style.paddingTop = '0px';
      }
    });

    function adjustSide() {
      sidebar.classList.add('wide');
      document.querySelector('#hc-search').classList.add('wide');
      sidebar.style.display = 'block';
      document.querySelector('.sidebar').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 125), 10) + "px";
      document.querySelector('#hc-search').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 95), 10) + "px";
    }

    function adjustToc() {
      if (document.querySelector('#toc') !== null) {
        document.querySelector('#toc').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      }
    }

    function adjustMain() {
      document.querySelector('html').style.scrollPaddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      document.querySelector('.main').style.paddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight - 70), 10) + "px";
    }

  </script>

  <!-- remove toc active class when page is loaded -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      var tocItems = $("#toc a");

      for (let i = 0; i < tocItems.length; i++) {
        tocItems[i].classList.remove("toc-active");
      }
    })
  </script>

  <!-- maintain sidebar scroll position between page loads -->
  <script type="text/javascript">
    let sidebar = document.querySelector(".sidebar");
    let scrolltop = localStorage.getItem("sidebar-scroll");

    if (scrolltop == null) {
      sidebar.scrollTop = parseInt(top, 10);
    }

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
    });

    window.addEventListener('load', () => {
      sidebar.scrollTo(0, scrolltop)
    })
  </script>

  <!-- open/close the nav -->
  <script type="text/javascript">
    function closeNav() {
      let sidebar = document.querySelector(".sidebar");
      sidebar.style.display = "none";
      sidebar.classList.remove('open');
    }

    function openNav() {
      let sidebar = document.querySelector(".sidebar");
      let hc_search = document.querySelector('#hc-search');
      sidebar.style.display = "block";
      sidebar.style.top = "0px";
      hc_search.style.top = 'unset';
      sidebar.classList.add('open');
    }
  </script>

  <!-- clear and add toc-active to clicked toc link -->
  <script type="text/javascript">
  $("#toc a").click(function() {
    var tocItems = $("#toc a");
    for (let i = 0; i < tocItems.length; i++) {
      tocItems[i].classList.remove("toc-active");
    }
    this.classList.add("toc-active");
  });
  </script>

  <!-- update active toc class when mouse scrolls -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener("wheel", () => {

        const ioConfiguration = {
          "rootMargin": "-120px 0px -400px 0px",
          "threshold": 0
        };

        const observer = new IntersectionObserver(setCurrent, ioConfiguration, entries => {
          entries.forEach(entry => {
            var id = entry.target.getAttribute('id');
            //fight with js
            document.querySelector(`#toc li a[href="#${id}"]`).classList.remove('toc-active');
          });
        });

        //track all h1-4 headings that have an id
        document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
          observer.observe(h);
        });

        //runs when the IntersectionObserver fires
        function setCurrent(e) {
          var allTocLinks = document.querySelectorAll("#toc li a");
          if (allTocLinks !== undefined) {
            e.map(i => {
              if (i.isIntersecting && i.intersectionRatio >= 1) {
                allTocLinks.forEach(link => link.classList.remove("toc-active"));
                document.querySelector(`#toc li a[href="#${i.target.id}"]`).classList.add('toc-active')
              }
            })
          }
        };

        //make clicked toc item active and stop IntersectionObserver
        $("#toc a").click(function() {
          //stop tracking all h1-4 headings that have an id
          document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
            observer.unobserve(h);
          });
          var tocItems = $("#toc a");
          if (tocItems !== undefined) {
            for (let i = 0; i < tocItems.length; i++) {
              tocItems[i].classList.remove("toc-active");
            };
            this.classList.add("toc-active");
          }
        })
      })
    })
  </script>

  <!--handle page scroll top and bottom, add toc-active -->
  <script type="text/javascript">
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active")
          };
          tocItems[tocItems.length - 1].classList.add("toc-active");
        };
      //scroll to top
      if(window.pageYOffset === 0) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active");
          };
          tocItems[0].classList.add("toc-active");
        };
      })
  </script>

  <!-- adjust alerts on mobile -->
  <script type="text/javascript">
    alert = document.querySelector('#support-alert')
    window.addEventListener("wheel", () => {
      if ($(window).width() < 1008) {
        //adjust alert
        if(window.pageYOffset > 0) {
          if(alert !== null) {
            document.querySelector('#support-alert').style.position = "fixed";
            document.querySelector('#support-alert').style.bottom = "0px";
            document.querySelector('#support-alert').style.margin = "5px";
            document.querySelector('#support-alert').style.zIndex = "9999999";
          }
        }
      }
   });
    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        if(alert !== null) {
          document.querySelector('#support-alert').style.removeProperty('position');
          document.querySelector('#support-alert').style.removeProperty('bottom');
          document.querySelector('#support-alert').style.removeProperty('margin');
          document.querySelector('#support-alert').style.removeProperty('zIndex');
        }
      }
    })
  </script>

  <!-- hide footer after 3 seconds -->
  <script type="text/javascript">
    const hideFooter = () => {
      document.querySelector('footer#rh, footer.footer-origin-docs').style.display = "none";
    };

    window.addEventListener('load', function() {
      setTimeout(hideFooter, 3000);
    });
  </script>
</body>
</html>
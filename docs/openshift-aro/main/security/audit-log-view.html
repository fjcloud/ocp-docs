

<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  
  
  <title>Viewing audit logs | Security and compliance | Azure Red Hat OpenShift Branch Build</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css"/>
  <link href="https://docs.okd.io/latest/_stylesheets/search.css" rel="stylesheet" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/autumn.css" rel="stylesheet"  media="screen"/>
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png"/>
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css"/>
  <link href="https://assets.openshift.net/content/osh-nav-footer.css" rel="stylesheet" type="text/css" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/docs.css" rel="stylesheet"  media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/>
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">

  <!-- Adobe DTM -->
  <script src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <!-- End Adobe DTM -->

  <script id="trustarc" src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
        rel="stylesheet">

</head>

<body onload="selectVersion('Branch Build');">
  
<nav id="main">
  <div class="container">
    <div class="row">
      <div class="navbar navbar-default navbar-openshift" role="navigation">
        <div class="navbar-header">
            <a href="#nav-main" class="dropdown-toggle navbar-menu-toggle hidden visible-xs" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          <a class="navbar-brand" href="/"></a>
        </div>
        <div id="nav-main" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="products" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                Products <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-column flex-md-row">
                  <div class="col-xs-12 col-sm-3">
                    <h3>Overview</h3>
                    <ul class="nav flex-column">
                      <li><a target="_blank" href="https://www.openshift.com/products/features/">Features</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/products/pricing/">Pricing</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-9">
                    <h3>Featured Products</h3>
                    <ul class="nav">
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/container-platform/">Red Hat OpenShift Container&nbsp;Platform</a>
                        <p class="d-none d-md-block">Build, deploy and manage your applications across cloud- and on-premise infrastructure</p>
                      </li>
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/dedicated/">Red Hat OpenShift Dedicated</a>
                        <p class="d-none d-md-block">Single-tenant, high-availability Kubernetes clusters in the public cloud</p>
                      </li>

                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/online/">Red Hat OpenShift Online</a>
                        <p class="d-none d-md-block">The fastest way for developers to build, host and scale applications in the public cloud</p>
                      </li>

                      <li class="nav-item">
                        <a target="_blank" href="https://www.openshift.com/products/">All products <span class="fa fa-angle-right"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li id="learn" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Learn <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-md-nowrap">
                  <div class="col-xs-12 col-sm-6">
                    <h3>Learn</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/what-is-openshift/">What is OpenShift</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/get-started/">Get started</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/partners/">Partners</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/success-stories/">Customer success stories</a></li>
                      <li><a target="_blank" href="https://blog.openshift.com">Blog</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/resources/">Resources</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <h3>Technology Topics</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/knative/">Knative</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/security/">Security</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/kubernetes/">Kubernetes</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/service-brokers/">Service Brokers</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Community <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://commons.openshift.org">OpenShift Commons</a></li>
                <li><a target="_blank" href="https://www.okd.io">Open Source (OKD)</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/startups/">Startups</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/grants/">Grants</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Support <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://help.openshift.com">Help Center</a></li>
                <li><a href="https://docs.openshift.com">OpenShift Docs</a></li>
              </ul>
            </li>

            <li><a target="_blank" class="nav-sign-up" href="https://www.openshift.com/trial/">Free Trial</a></li>

            <li><a target="_blank" href="https://console.redhat.com/openshift" class="nav-sign-in">Log In <span class="fa fa-angle-right"></span></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

  
  <div class="container">
    <button id="hc-open-btn" class="open-btn-sm" onclick="openNav()" aria-label="Open"><span class="fa fa-bars" /></button>
    <ol class="breadcrumb hide-for-print">
      
      <span>
        <div class="alert alert-info" role="primary" id="support-info">
          <strong>Starting on March 12, 2025, OpenShift docs will only be available at <a href="https://docs.redhat.com/en/" style="color: #0C5460 !important" class="link-primary">docs.redhat.com</a>. From that time on, docs.openshift.com links will automatically redirect to their locations on docs.redhat.com.
          </strong>
        </div>
      </span>
      

      

      

      

      

      

      

      
      

      

      


      

      


      

      

      <li class="sitename">
        <a href="/">
          Documentation</a>
      </li>
      <li class="hidden-xs active">
        
          <a href="../security/index.html">Azure Red Hat OpenShift Branch Build</a>
        
      </li>
      <li class="hidden-xs active">
        <a href="../security/index.html">Security and compliance</a>
      </li>
      
      
      <li class="hidden-xs active">
        Viewing audit logs
      </li>
      
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas hide-for-print">
        <div class="row-fluid">
          <div id="btn-close">
            <button id="hc-close-btn" onclick="closeNav()" class="close-btn-sm" aria-label="close"><span class="fa fa-times" /></button>
          </div>
          <div id="hc-search">
            <input id="hc-search-input" type="text" aria-label="search">
            <button id="hc-search-btn" aria-label="search"><span class="fa fa-search" /></button>
          </div>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0"><span id="tgSpan0" class="fa fa-angle-down"></span>Security and compliance</a>
      <ul id="topicGroup0" class="collapse in list-unstyled">
            <li><a class="" href="../security/index.html">Security and compliance overview</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-1"><span id="sgSpan-0-1" class="fa fa-caret-right"></span>&nbsp;Container security</a>
              <ul id="topicSubGroup-0-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../security/container_security/security-understanding.html">Understanding container security</a></li>
                  <li><a class="" href="../security/container_security/security-hosts-vms.html">Understanding host and VM security</a></li>
                  <li><a class="" href="../security/container_security/security-hardening.html">Hardening Red Hat Enterprise Linux CoreOS</a></li>
                  <li><a class="" href="../security/container_security/security-container-signature.html">Container image signatures</a></li>
                  <li><a class="" href="../security/container_security/security-compliance.html">Understanding compliance</a></li>
                  <li><a class="" href="../security/container_security/security-container-content.html">Securing container content</a></li>
                  <li><a class="" href="../security/container_security/security-registries.html">Using container registries securely</a></li>
                  <li><a class="" href="../security/container_security/security-build.html">Securing the build process</a></li>
                  <li><a class="" href="../security/container_security/security-deploy.html">Deploying containers</a></li>
                  <li><a class="" href="../security/container_security/security-platform.html">Securing the container platform</a></li>
                  <li><a class="" href="../security/container_security/security-network.html">Securing networks</a></li>
                  <li><a class="" href="../security/container_security/security-storage.html">Securing attached storage</a></li>
                  <li><a class="" href="../security/container_security/security-monitoring.html">Monitoring cluster events and logs</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-2"><span id="sgSpan-0-2" class="fa fa-caret-right"></span>&nbsp;Compliance Operator</a>
              <ul id="topicSubGroup-0-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../security/compliance_operator/co-overview.html">Compliance Operator overview</a></li>
                  <li><a class="" href="../security/compliance_operator/compliance-operator-release-notes.html">Compliance Operator release notes</a></li>
                  <li><a class="" href="../security/compliance_operator/co-support.html">Compliance Operator support</a></li>
                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-3"><span id="ssgSpan-0-2-3" class="fa fa-caret-right"></span>&nbsp;Compliance Operator concepts</a>
                  <ul id="topicSubSubGroup-0-2-3" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../security/compliance_operator/co-concepts/compliance-operator-understanding.html" style="padding-left: 70px;">Understanding the Compliance Operator</a></li>
                    <li><a class="" href="../security/compliance_operator/co-concepts/compliance-operator-crd.html" style="padding-left: 70px;">Understanding the Custom Resource Definitions</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-4"><span id="ssgSpan-0-2-4" class="fa fa-caret-right"></span>&nbsp;Compliance Operator management</a>
                  <ul id="topicSubSubGroup-0-2-4" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../security/compliance_operator/co-management/compliance-operator-installation.html" style="padding-left: 70px;">Installing the Compliance Operator</a></li>
                    <li><a class="" href="../security/compliance_operator/co-management/compliance-operator-updating.html" style="padding-left: 70px;">Updating the Compliance Operator</a></li>
                    <li><a class="" href="../security/compliance_operator/co-management/compliance-operator-manage.html" style="padding-left: 70px;">Managing the Compliance Operator</a></li>
                    <li><a class="" href="../security/compliance_operator/co-management/compliance-operator-uninstallation.html" style="padding-left: 70px;">Uninstalling the Compliance Operator</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-0-2-5"><span id="ssgSpan-0-2-5" class="fa fa-caret-right"></span>&nbsp;Compliance Operator scan management</a>
                  <ul id="topicSubSubGroup-0-2-5" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-supported-profiles.html" style="padding-left: 70px;">Supported compliance profiles</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-scans.html" style="padding-left: 70px;">Compliance Operator scans</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-tailor.html" style="padding-left: 70px;">Tailoring the Compliance Operator</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-raw-results.html" style="padding-left: 70px;">Retrieving Compliance Operator raw results</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-remediation.html" style="padding-left: 70px;">Managing Compliance Operator remediation</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-advanced.html" style="padding-left: 70px;">Performing advanced Compliance Operator tasks</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/compliance-operator-troubleshooting.html" style="padding-left: 70px;">Troubleshooting Compliance Operator scans</a></li>
                    <li><a class="" href="../security/compliance_operator/co-scans/oc-compliance-plug-in-using.html" style="padding-left: 70px;">Using the oc-compliance plugin</a></li>                  </ul>
                  </li>
              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-3"><span id="sgSpan-0-3" class="fa fa-caret-right"></span>&nbsp;File Integrity Operator</a>
              <ul id="topicSubGroup-0-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../security/file_integrity_operator/fio-overview.html">File Integrity Operator Overview</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-release-notes.html">File Integrity Operator release notes</a></li>
                  <li><a class="" href="../security/file_integrity_operator/fio-support.html">File Integrity Operator support</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-installation.html">Installing the File Integrity Operator</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-updating.html">Updating the File Integrity Operator</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-understanding.html">Understanding the File Integrity Operator</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-configuring.html">Configuring the File Integrity Operator</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-advanced-usage.html">Performing advanced File Integrity Operator tasks</a></li>
                  <li><a class="" href="../security/file_integrity_operator/file-integrity-operator-troubleshooting.html">Troubleshooting the File Integrity Operator</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-4"><span id="sgSpan-0-4" class="fa fa-caret-right"></span>&nbsp;Security Profiles Operator</a>
              <ul id="topicSubGroup-0-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../security/security_profiles_operator/spo-overview.html">Security Profiles Operator overview</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-release-notes.html">Security Profiles Operator release notes</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-support.html">Security Profiles Operator support</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-understanding.html">Understanding the Security Profiles Operator</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-enabling.html">Enabling the Security Profiles Operator</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-seccomp.html">Managing seccomp profiles</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-selinux.html">Managing SELinux profiles</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-advanced.html">Advanced Security Profiles Operator tasks</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-troubleshooting.html">Troubleshooting the Security Profiles Operator</a></li>
                  <li><a class="" href="../security/security_profiles_operator/spo-uninstalling.html">Uninstalling the Security Profiles Operator</a></li>              </ul>
            </li>
            <li><a class=" active" href="../security/audit-log-view.html">Viewing audit logs</a></li>
            <li><a class="" href="../security/audit-log-policy-config.html">Configuring the audit log policy</a></li>
            <li><a class="" href="../security/tls-security-profiles.html">Configuring TLS security profiles</a></li>
            <li><a class="" href="../security/seccomp-profiles.html">Configuring seccomp profiles</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-9"><span id="sgSpan-0-9" class="fa fa-caret-right"></span>&nbsp;Network-Bound Disk Encryption (NBDE)</a>
              <ul id="topicSubGroup-0-9" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../security/network_bound_disk_encryption/nbde-about-disk-encryption-technology.html">About disk encryption technology</a></li>
                  <li><a class="" href="../security/network_bound_disk_encryption/nbde-tang-server-installation-considerations.html">Tang server installation considerations</a></li>
                  <li><a class="" href="../security/network_bound_disk_encryption/nbde-managing-encryption-keys.html">Tang server encryption key management</a></li>              </ul>
            </li>
      </ul>
    </li>
</ul>
      </div>
      <div id="hc-search-modal">
        <div id="hc-modal-content">
          <span id="hc-modal-close">&times;</span>
          <div id="hc-search-results-wrapper">
            <div id="hc-search-results"></div>
            <div id="hc-search-progress-indicator" class="text-center search-progress-indicator"><i class="fa fa-circle-o-notch fa-spin" style="font-size:42px"></i></div>
            <div class="text-center">
              <button id="hc-search-more-btn">Show more results</button>
            </div>
          </div>
        </div>
      </div>
      <div class="print-logo" style="display:none;">
        <img src="https://www.redhat.com/cms/managed-files/Logo-Red_Hat-OpenShift-A-Standard-RGB_0_0.svg" alt="print logo"/>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h1>
            Viewing audit logs
          </h1>
        </div>
        
        
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#nodes-pods-audit-log-basic_audit-log-view">About the API audit log</a></li>
<li><a href="#nodes-nodes-audit-log-basic-viewing_audit-log-view">Viewing the audit logs</a></li>
<li><a href="#security-audit-log-basic-filtering_audit-log-view">Filtering audit logs</a></li>
<li><a href="#gathering-data-audit-logs_audit-log-view">Gathering audit logs</a></li>
<li><a href="#viewing-audit-logs-additional-resources">Additional resources</a></li>
</ul>
</div>
<div class="paragraph">
<p>Azure Red Hat OpenShift auditing provides a security-relevant chronological set of records documenting the sequence of activities that have affected the system by individual users, administrators, or other components of the system.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nodes-pods-audit-log-basic_audit-log-view"><a class="anchor" href="#nodes-pods-audit-log-basic_audit-log-view"></a>About the API audit log</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Audit works at the API server level, logging all requests coming to the server. Each audit log contains the following information:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Audit log fields</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The audit level at which the event was generated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>auditID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A unique audit ID, generated for each request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The stage of the request handling when this event instance was generated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestURI</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request URI as sent by the client to a server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>verb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Kubernetes verb associated with the request. For non-resource requests, this is the lowercase HTTP method.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authenticated user information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>impersonatedUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The impersonated user information, if the request is impersonating another user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sourceIPs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The source IPs, from where the request originated and any intermediate proxies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userAgent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The user agent string reported by the client. Note that the user agent is provided by the client, and must not be trusted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>objectRef</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The object reference this request is targeted at. This does not apply for <code>List</code>-type requests, or non-resource requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>responseStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The response status, populated even when the <code>ResponseObject</code> is not a <code>Status</code> type. For successful responses, this will only include the code. For non-status type error responses, this will be auto-populated with the error message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestObject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The API object from the request, in JSON format. The <code>RequestObject</code> is recorded as is in the request (possibly re-encoded as JSON), prior to version conversion, defaulting, admission or merging. It is an external versioned object type, and might not be a valid object on its own. This is omitted for non-resource requests and is only logged at request level and higher.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>responseObject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The API object returned in the response, in JSON format. The <code>ResponseObject</code> is recorded after conversion to the external type, and serialized as JSON. This is omitted for non-resource requests and is only logged at response level.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestReceivedTimestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time that the request reached the API server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stageTimestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time that the request reached the current audit stage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>annotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. An unstructured key value map stored with an audit event that may be set by plugins invoked in the request serving chain, including authentication, authorization and admission plugins. Note that these annotations are for the audit event, and do not correspond to the <code>metadata.annotations</code> of the submitted object. Keys should uniquely identify the informing component to avoid name collisions, for example <code>podsecuritypolicy.admission.k8s.io/policy</code>. Values should be short. Annotations are included in the metadata level.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example output for the Kubernetes API server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json"><span class="p">{</span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"Event"</span><span class="p">,</span><span class="nl">"apiVersion"</span><span class="p">:</span><span class="s2">"audit.k8s.io/v1"</span><span class="p">,</span><span class="nl">"level"</span><span class="p">:</span><span class="s2">"Metadata"</span><span class="p">,</span><span class="nl">"auditID"</span><span class="p">:</span><span class="s2">"ad209ce1-fec7-4130-8192-c4cc63f1d8cd"</span><span class="p">,</span><span class="nl">"stage"</span><span class="p">:</span><span class="s2">"ResponseComplete"</span><span class="p">,</span><span class="nl">"requestURI"</span><span class="p">:</span><span class="s2">"/api/v1/namespaces/openshift-kube-controller-manager/configmaps/cert-recovery-controller-lock?timeout=35s"</span><span class="p">,</span><span class="nl">"verb"</span><span class="p">:</span><span class="s2">"update"</span><span class="p">,</span><span class="nl">"user"</span><span class="p">:{</span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"system:serviceaccount:openshift-kube-controller-manager:localhost-recovery-client"</span><span class="p">,</span><span class="nl">"uid"</span><span class="p">:</span><span class="s2">"dd4997e3-d565-4e37-80f8-7fc122ccd785"</span><span class="p">,</span><span class="nl">"groups"</span><span class="p">:[</span><span class="s2">"system:serviceaccounts"</span><span class="p">,</span><span class="s2">"system:serviceaccounts:openshift-kube-controller-manager"</span><span class="p">,</span><span class="s2">"system:authenticated"</span><span class="p">]},</span><span class="nl">"sourceIPs"</span><span class="p">:[</span><span class="s2">"::1"</span><span class="p">],</span><span class="nl">"userAgent"</span><span class="p">:</span><span class="s2">"cluster-kube-controller-manager-operator/v0.0.0 (linux/amd64) kubernetes/$Format"</span><span class="p">,</span><span class="nl">"objectRef"</span><span class="p">:{</span><span class="nl">"resource"</span><span class="p">:</span><span class="s2">"configmaps"</span><span class="p">,</span><span class="nl">"namespace"</span><span class="p">:</span><span class="s2">"openshift-kube-controller-manager"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"cert-recovery-controller-lock"</span><span class="p">,</span><span class="nl">"uid"</span><span class="p">:</span><span class="s2">"5c57190b-6993-425d-8101-8337e48c7548"</span><span class="p">,</span><span class="nl">"apiVersion"</span><span class="p">:</span><span class="s2">"v1"</span><span class="p">,</span><span class="nl">"resourceVersion"</span><span class="p">:</span><span class="s2">"574307"</span><span class="p">},</span><span class="nl">"responseStatus"</span><span class="p">:{</span><span class="nl">"metadata"</span><span class="p">:{},</span><span class="nl">"code"</span><span class="p">:</span><span class="mi">200</span><span class="p">},</span><span class="nl">"requestReceivedTimestamp"</span><span class="p">:</span><span class="s2">"2020-04-02T08:27:20.200962Z"</span><span class="p">,</span><span class="nl">"stageTimestamp"</span><span class="p">:</span><span class="s2">"2020-04-02T08:27:20.206710Z"</span><span class="p">,</span><span class="nl">"annotations"</span><span class="p">:{</span><span class="nl">"authorization.k8s.io/decision"</span><span class="p">:</span><span class="s2">"allow"</span><span class="p">,</span><span class="nl">"authorization.k8s.io/reason"</span><span class="p">:</span><span class="s2">"RBAC: allowed by ClusterRoleBinding </span><span class="se">\"</span><span class="s2">system:openshift:operator:kube-controller-manager-recovery</span><span class="se">\"</span><span class="s2"> of ClusterRole </span><span class="se">\"</span><span class="s2">cluster-admin</span><span class="se">\"</span><span class="s2"> to ServiceAccount </span><span class="se">\"</span><span class="s2">localhost-recovery-client/openshift-kube-controller-manager</span><span class="se">\"</span><span class="s2">"</span><span class="p">}}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nodes-nodes-audit-log-basic-viewing_audit-log-view"><a class="anchor" href="#nodes-nodes-audit-log-basic-viewing_audit-log-view"></a>Viewing the audit logs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can view the logs for the OpenShift API server, Kubernetes API server, OpenShift OAuth API server, and OpenShift OAuth server for each control plane node.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To view the audit logs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View the OpenShift API server audit logs:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>List the OpenShift API server audit logs that are available for each control plane node:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs <span class="nt">--role</span><span class="o">=</span>master <span class="nt">--path</span><span class="o">=</span>openshift-apiserver/</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">ci-ln-m0wpfjb-f76d1-vnb5x-master-0 audit-2021-03-09T00-12-19.834.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-0 audit.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-1 audit-2021-03-09T00-11-49.835.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-1 audit.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-2 audit-2021-03-09T00-13-00.128.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-2 audit.log</span></code></pre>
</div>
</div>
</li>
<li>
<p>View a specific OpenShift API server audit log by providing the node name and the log name:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs &lt;node_name&gt; <span class="nt">--path</span><span class="o">=</span>openshift-apiserver/&lt;log_name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs ci-ln-m0wpfjb-f76d1-vnb5x-master-0 <span class="nt">--path</span><span class="o">=</span>openshift-apiserver/audit-2021-03-09T00-12-19.834.log</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">{"kind":"Event","apiVersion":"audit.k8s.io/v1","level":"Metadata","auditID":"381acf6d-5f30-4c7d-8175-c9c317ae5893","stage":"ResponseComplete","requestURI":"/metrics","verb":"get","user":{"username":"system:serviceaccount:openshift-monitoring:prometheus-k8s","uid":"825b60a0-3976-4861-a342-3b2b561e8f82","groups":["system:serviceaccounts","system:serviceaccounts:openshift-monitoring","system:authenticated"]},"sourceIPs":["10.129.2.6"],"userAgent":"Prometheus/2.23.0","responseStatus":{"metadata":{},"code":200},"requestReceivedTimestamp":"2021-03-08T18:02:04.086545Z","stageTimestamp":"2021-03-08T18:02:04.107102Z","annotations":{"authorization.k8s.io/decision":"allow","authorization.k8s.io/reason":"RBAC: allowed by ClusterRoleBinding \"prometheus-k8s\" of ClusterRole \"prometheus-k8s\" to ServiceAccount \"prometheus-k8s/openshift-monitoring\""}}</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>View the Kubernetes API server audit logs:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>List the Kubernetes API server audit logs that are available for each control plane node:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs <span class="nt">--role</span><span class="o">=</span>master <span class="nt">--path</span><span class="o">=</span>kube-apiserver/</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">ci-ln-m0wpfjb-f76d1-vnb5x-master-0 audit-2021-03-09T14-07-27.129.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-0 audit.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-1 audit-2021-03-09T19-24-22.620.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-1 audit.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-2 audit-2021-03-09T18-37-07.511.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-2 audit.log</span></code></pre>
</div>
</div>
</li>
<li>
<p>View a specific Kubernetes API server audit log by providing the node name and the log name:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs &lt;node_name&gt; <span class="nt">--path</span><span class="o">=</span>kube-apiserver/&lt;log_name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs ci-ln-m0wpfjb-f76d1-vnb5x-master-0 <span class="nt">--path</span><span class="o">=</span>kube-apiserver/audit-2021-03-09T14-07-27.129.log</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">{"kind":"Event","apiVersion":"audit.k8s.io/v1","level":"Metadata","auditID":"cfce8a0b-b5f5-4365-8c9f-79c1227d10f9","stage":"ResponseComplete","requestURI":"/api/v1/namespaces/openshift-kube-scheduler/serviceaccounts/openshift-kube-scheduler-sa","verb":"get","user":{"username":"system:serviceaccount:openshift-kube-scheduler-operator:openshift-kube-scheduler-operator","uid":"2574b041-f3c8-44e6-a057-baef7aa81516","groups":["system:serviceaccounts","system:serviceaccounts:openshift-kube-scheduler-operator","system:authenticated"]},"sourceIPs":["10.128.0.8"],"userAgent":"cluster-kube-scheduler-operator/v0.0.0 (linux/amd64) kubernetes/$</span>Format<span class="s2">","</span>objectRef<span class="s2">":{"</span>resource<span class="s2">":"</span>serviceaccounts<span class="s2">","</span>namespace<span class="s2">":"</span>openshift-kube-scheduler<span class="s2">","</span>name<span class="s2">":"</span>openshift-kube-scheduler-sa<span class="s2">","</span>apiVersion<span class="s2">":"</span>v1<span class="s2">"},"</span>responseStatus<span class="s2">":{"</span>metadata<span class="s2">":{},"</span>code<span class="s2">":200},"</span>requestReceivedTimestamp<span class="s2">":"</span>2021-03-08T18:06:42.512619Z<span class="s2">","</span>stageTimestamp<span class="s2">":"</span>2021-03-08T18:06:42.516145Z<span class="s2">","</span>annotations<span class="s2">":{"</span>authentication.k8s.io/legacy-token<span class="s2">":"</span>system:serviceaccount:openshift-kube-scheduler-operator:openshift-kube-scheduler-operator<span class="s2">","</span>authorization.k8s.io/decision<span class="s2">":"</span>allow<span class="s2">","</span>authorization.k8s.io/reason<span class="s2">":"</span>RBAC: allowed by ClusterRoleBinding <span class="se">\"</span>system:openshift:operator:cluster-kube-scheduler-operator<span class="se">\"</span> of ClusterRole <span class="se">\"</span>cluster-admin<span class="se">\"</span> to ServiceAccount <span class="se">\"</span>openshift-kube-scheduler-operator/openshift-kube-scheduler-operator<span class="se">\"</span><span class="s2">"}}</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>View the OpenShift OAuth API server audit logs:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>List the OpenShift OAuth API server audit logs that are available for each control plane node:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs <span class="nt">--role</span><span class="o">=</span>master <span class="nt">--path</span><span class="o">=</span>oauth-apiserver/</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">ci-ln-m0wpfjb-f76d1-vnb5x-master-0 audit-2021-03-09T13-06-26.128.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-0 audit.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-1 audit-2021-03-09T18-23-21.619.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-1 audit.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-2 audit-2021-03-09T17-36-06.510.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-2 audit.log</span></code></pre>
</div>
</div>
</li>
<li>
<p>View a specific OpenShift OAuth API server audit log by providing the node name and the log name:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs &lt;node_name&gt; <span class="nt">--path</span><span class="o">=</span>oauth-apiserver/&lt;log_name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs ci-ln-m0wpfjb-f76d1-vnb5x-master-0 <span class="nt">--path</span><span class="o">=</span>oauth-apiserver/audit-2021-03-09T13-06-26.128.log</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">{"kind":"Event","apiVersion":"audit.k8s.io/v1","level":"Metadata","auditID":"dd4c44e2-3ea1-4830-9ab7-c91a5f1388d6","stage":"ResponseComplete","requestURI":"/apis/user.openshift.io/v1/users/~","verb":"get","user":{"username":"system:serviceaccount:openshift-monitoring:prometheus-k8s","groups":["system:serviceaccounts","system:serviceaccounts:openshift-monitoring","system:authenticated"]},"sourceIPs":["10.0.32.4","10.128.0.1"],"userAgent":"dockerregistry/v0.0.0 (linux/amd64) kubernetes/$</span>Format<span class="s2">","</span>objectRef<span class="s2">":{"</span>resource<span class="s2">":"</span><span class="nb">users</span><span class="s2">","</span>name<span class="s2">":"</span>~<span class="s2">","</span>apiGroup<span class="s2">":"</span>user.openshift.io<span class="s2">","</span>apiVersion<span class="s2">":"</span>v1<span class="s2">"},"</span>responseStatus<span class="s2">":{"</span>metadata<span class="s2">":{},"</span>code<span class="s2">":200},"</span>requestReceivedTimestamp<span class="s2">":"</span>2021-03-08T17:47:43.653187Z<span class="s2">","</span>stageTimestamp<span class="s2">":"</span>2021-03-08T17:47:43.660187Z<span class="s2">","</span>annotations<span class="s2">":{"</span>authorization.k8s.io/decision<span class="s2">":"</span>allow<span class="s2">","</span>authorization.k8s.io/reason<span class="s2">":"</span>RBAC: allowed by ClusterRoleBinding <span class="se">\"</span>basic-users<span class="se">\"</span> of ClusterRole <span class="se">\"</span>basic-user<span class="se">\"</span> to Group <span class="se">\"</span>system:authenticated<span class="se">\"</span><span class="s2">"}}</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>View the OpenShift OAuth server audit logs:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>List the OpenShift OAuth server audit logs that are available for each control plane node:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs <span class="nt">--role</span><span class="o">=</span>master <span class="nt">--path</span><span class="o">=</span>oauth-server/</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">ci-ln-m0wpfjb-f76d1-vnb5x-master-0 audit-2022-05-11T18-57-32.395.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-0 audit.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-1 audit-2022-05-11T19-07-07.021.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-1 audit.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-2 audit-2022-05-11T19-06-51.844.log
ci-ln-m0wpfjb-f76d1-vnb5x-master-2 audit.log</span></code></pre>
</div>
</div>
</li>
<li>
<p>View a specific OpenShift OAuth server audit log by providing the node name and the log name:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs &lt;node_name&gt; <span class="nt">--path</span><span class="o">=</span>oauth-server/&lt;log_name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs ci-ln-m0wpfjb-f76d1-vnb5x-master-0 <span class="nt">--path</span><span class="o">=</span>oauth-server/audit-2022-05-11T18-57-32.395.log</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">{"kind":"Event","apiVersion":"audit.k8s.io/v1","level":"Metadata","auditID":"13c20345-f33b-4b7d-b3b6-e7793f805621","stage":"ResponseComplete","requestURI":"/login","verb":"post","user":{"username":"system:anonymous","groups":["system:unauthenticated"]},"sourceIPs":["10.128.2.6"],"userAgent":"Mozilla/5.0 (X11;</span><span class="w"> </span>Linux x86_64<span class="p">;</span> rv:91.0<span class="o">)</span> Gecko/20100101 Firefox/91.0<span class="s2">","</span>responseStatus<span class="s2">":{"</span>metadata<span class="s2">":{},"</span>code<span class="s2">":302},"</span>requestReceivedTimestamp<span class="s2">":"</span>2022-05-11T17:31:16.280155Z<span class="s2">","</span>stageTimestamp<span class="s2">":"</span>2022-05-11T17:31:16.297083Z<span class="s2">","</span>annotations<span class="s2">":{"</span>authentication.openshift.io/decision<span class="s2">":"</span>error<span class="s2">","</span>authentication.openshift.io/username<span class="s2">":"</span>kubeadmin<span class="s2">","</span>authorization.k8s.io/decision<span class="s2">":"</span>allow<span class="s2">","</span>authorization.k8s.io/reason<span class="s2">":""}}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The possible values for the <code>authentication.openshift.io/decision</code> annotation are <code>allow</code>, <code>deny</code>, or <code>error</code>.</p>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security-audit-log-basic-filtering_audit-log-view"><a class="anchor" href="#security-audit-log-basic-filtering_audit-log-view"></a>Filtering audit logs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use <code>jq</code> or another JSON parsing tool to filter the API server audit logs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The amount of information logged to the API server audit logs is controlled by the audit log policy that is set.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following procedure provides examples of using <code>jq</code> to filter audit logs on control plane node <code>node-1.example.com</code>. See the <a href="https://stedolan.github.io/jq/manual/">jq Manual</a> for detailed information on using <code>jq</code>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>cluster-admin</code> role.</p>
</li>
<li>
<p>You have installed <code>jq</code>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Filter OpenShift API server audit logs by user:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs node-1.example.com  <span class="se">\</span>
  <span class="nt">--path</span><span class="o">=</span>openshift-apiserver/audit.log <span class="se">\</span>
  | jq <span class="s1">'select(.user.username == "myusername")'</span></code></pre>
</div>
</div>
</li>
<li>
<p>Filter OpenShift API server audit logs by user agent:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs node-1.example.com  <span class="se">\</span>
  <span class="nt">--path</span><span class="o">=</span>openshift-apiserver/audit.log <span class="se">\</span>
  | jq <span class="s1">'select(.userAgent == "cluster-version-operator/v0.0.0 (linux/amd64) kubernetes/$Format")'</span></code></pre>
</div>
</div>
</li>
<li>
<p>Filter Kubernetes API server audit logs by a certain API version and only output the user agent:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs node-1.example.com  <span class="se">\</span>
  <span class="nt">--path</span><span class="o">=</span>kube-apiserver/audit.log <span class="se">\</span>
  | jq <span class="s1">'select(.requestURI | startswith("/apis/apiextensions.k8s.io/v1beta1")) | .userAgent'</span></code></pre>
</div>
</div>
</li>
<li>
<p>Filter OpenShift OAuth API server audit logs by excluding a verb:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs node-1.example.com  <span class="se">\</span>
  <span class="nt">--path</span><span class="o">=</span>oauth-apiserver/audit.log <span class="se">\</span>
  | jq <span class="s1">'select(.verb != "get")'</span></code></pre>
</div>
</div>
</li>
<li>
<p>Filter OpenShift OAuth server audit logs by events that identified a username and failed with an error:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm node-logs node-1.example.com  <span class="se">\</span>
  <span class="nt">--path</span><span class="o">=</span>oauth-server/audit.log <span class="se">\</span>
  | jq <span class="s1">'select(.annotations["authentication.openshift.io/username"] != null and .annotations["authentication.openshift.io/decision"] == "error")'</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gathering-data-audit-logs_audit-log-view"><a class="anchor" href="#gathering-data-audit-logs_audit-log-view"></a>Gathering audit logs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the must-gather tool to collect the audit logs for debugging your cluster, which you can review or send to Red Hat Support.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the <code>oc adm must-gather</code> command with <code>-- /usr/bin/gather_audit_logs</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc adm must-gather <span class="nt">--</span> /usr/bin/gather_audit_logs</code></pre>
</div>
</div>
</li>
<li>
<p>Create a compressed file from the <code>must-gather</code> directory that was just created in your working directory. For example, on a computer that uses a Linux operating system, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">tar </span>cvaf must-gather.tar.gz must-gather.local.472290403699006248 <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code>must-gather-local.472290403699006248</code> with the actual directory name.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Attach the compressed file to your support case on the <a href="https://access.redhat.com/support/cases/#/case/list">the <strong>Customer Support</strong> page</a> of the Red Hat Customer Portal.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1 _additional-resources">
<h2 id="viewing-audit-logs-additional-resources"><a class="anchor" href="#viewing-audit-logs-additional-resources"></a>Additional resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../support/gathering-cluster-data.html#about-must-gather_gathering-cluster-data">Must-gather tool</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/apiserver/blob/master/pkg/apis/audit/v1/types.go#L72">API audit log event structure</a></p>
</li>
<li>
<p><a href="../security/audit-log-policy-config.html#audit-log-policy-config">Configuring the audit log policy</a></p>
</li>
</ul>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/nav-tertiary.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/reformat-html.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/hc-search.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/clipboard.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/collapsible.js" type="text/javascript"></script>
  <script>
  var dk = 'openshift-aro';
  var version = 'Branch Build';

  var distros = {
    'openshift-origin': ['docs_origin', version],
    // specific labels are used for OSD instead of the URL filter, due to its unusual URL structure; assume v4
    'openshift-dedicated': ['docs_dedicated_v4'],
    'openshift-online': ['docs_online', version],
    'openshift-enterprise': ['docs_cp', version],
    'openshift-telco': ['docs_telco', version],
    'openshift-aro' : ['docs_aro', version],
    'openshift-rosa' : ['docs_rosa'],
    'openshift-acs' : ['docs_acs', version],
    'openshift-serverless' : ['docs_serverless', version],
    'openshift-pipelines' : ['docs_pipelines', version],
    'openshift-builds' : ['docs_builds', version],
    'openshift-gitops' : ['docs_gitops', version],
    'openshift-lightspeed' : ['docs_lightspeed', version],
    'openshift-service-mesh' : ['docs_service_mesh', version]
  };

  // only OSD v3 docs have the version variable specified
  if (dk == "openshift-dedicated" && version == "3") {
    distros['openshift-dedicated'] = ['docs_dedicated_v3']
  }

  distros[dk] ? hcSearchCategory.apply(null, distros[dk]) : hcSearchCategory("docs");
  </script>
  <script type="text/javascript">
  /*<![CDATA[*/
  $(document).ready(function() {
    $("[id^='topicGroup']").on('show.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicGroup']").on('hide.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });

    const collapsibleContent = document.getElementsByTagName("details");
    for (var i = 0; i < collapsibleContent.length; i++) {
      collapsibleContent[i].setAttribute("open", "");
    }

  });
  /*]]>*/
  </script>

  <footer id="rh">

    <div class="container">
        <div class="row">

            <div class="col-sm-2">
                <img src="https://assets.openshift.net/content/img/Logo-Red_Hat-OpenShift-A-Reverse-RGB.svg" class="img-fluid" alt="Red Hat" style="height: 30px;">
            </div>

            <div class="col-sm-3">
              <p class="text-nowrap">Copyright  2025 Red Hat, Inc.</p>
            </div>



            <div class="col">
                <nav class="nav">
                    <a target="_blank" href="https://www.redhat.com/en/about/privacy-policy" class="nav-link">Privacy statement</a>
                    <a target="_blank" href="https://www.openshift.com/legal/terms/" class="nav-link">Terms of use</a>
                    <a target="_blank" href="https://www.redhat.com/en/about/all-policies-guidelines" class="nav-link">All policies and guidelines</a>
                    <a id="teconsent"></a>
                </nav>
            </div>
        </div>
    </div>
</footer>
<div id="consent_blackbar" style="z-index: 100; position: fixed"></div>



<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->

  <!-- adjust page css based on breadcrumb and/or resize -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      }
    });

    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      } else if ($(window).width() < 1008) {
        sidebar.classList.remove('wide');
        document.querySelector('#hc-search').classList.remove('wide');
        if (sidebar.classList.contains('open')) {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }
        document.querySelector('.main').style.paddingTop = '0px';
      }
    });

    function adjustSide() {
      sidebar.classList.add('wide');
      document.querySelector('#hc-search').classList.add('wide');
      sidebar.style.display = 'block';
      document.querySelector('.sidebar').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 125), 10) + "px";
      document.querySelector('#hc-search').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 95), 10) + "px";
    }

    function adjustToc() {
      if (document.querySelector('#toc') !== null) {
        document.querySelector('#toc').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      }
    }

    function adjustMain() {
      document.querySelector('html').style.scrollPaddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      document.querySelector('.main').style.paddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight - 70), 10) + "px";
    }

  </script>

  <!-- remove toc active class when page is loaded -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      var tocItems = $("#toc a");

      for (let i = 0; i < tocItems.length; i++) {
        tocItems[i].classList.remove("toc-active");
      }
    })
  </script>

  <!-- maintain sidebar scroll position between page loads -->
  <script type="text/javascript">
    let sidebar = document.querySelector(".sidebar");
    let scrolltop = localStorage.getItem("sidebar-scroll");

    if (scrolltop == null) {
      sidebar.scrollTop = parseInt(top, 10);
    }

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
    });

    window.addEventListener('load', () => {
      sidebar.scrollTo(0, scrolltop)
    })
  </script>

  <!-- open/close the nav -->
  <script type="text/javascript">
    function closeNav() {
      let sidebar = document.querySelector(".sidebar");
      sidebar.style.display = "none";
      sidebar.classList.remove('open');
    }

    function openNav() {
      let sidebar = document.querySelector(".sidebar");
      let hc_search = document.querySelector('#hc-search');
      sidebar.style.display = "block";
      sidebar.style.top = "0px";
      hc_search.style.top = 'unset';
      sidebar.classList.add('open');
    }
  </script>

  <!-- clear and add toc-active to clicked toc link -->
  <script type="text/javascript">
  $("#toc a").click(function() {
    var tocItems = $("#toc a");
    for (let i = 0; i < tocItems.length; i++) {
      tocItems[i].classList.remove("toc-active");
    }
    this.classList.add("toc-active");
  });
  </script>

  <!-- update active toc class when mouse scrolls -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener("wheel", () => {

        const ioConfiguration = {
          "rootMargin": "-120px 0px -400px 0px",
          "threshold": 0
        };

        const observer = new IntersectionObserver(setCurrent, ioConfiguration, entries => {
          entries.forEach(entry => {
            var id = entry.target.getAttribute('id');
            //fight with js
            document.querySelector(`#toc li a[href="#${id}"]`).classList.remove('toc-active');
          });
        });

        //track all h1-4 headings that have an id
        document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
          observer.observe(h);
        });

        //runs when the IntersectionObserver fires
        function setCurrent(e) {
          var allTocLinks = document.querySelectorAll("#toc li a");
          if (allTocLinks !== undefined) {
            e.map(i => {
              if (i.isIntersecting && i.intersectionRatio >= 1) {
                allTocLinks.forEach(link => link.classList.remove("toc-active"));
                document.querySelector(`#toc li a[href="#${i.target.id}"]`).classList.add('toc-active')
              }
            })
          }
        };

        //make clicked toc item active and stop IntersectionObserver
        $("#toc a").click(function() {
          //stop tracking all h1-4 headings that have an id
          document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
            observer.unobserve(h);
          });
          var tocItems = $("#toc a");
          if (tocItems !== undefined) {
            for (let i = 0; i < tocItems.length; i++) {
              tocItems[i].classList.remove("toc-active");
            };
            this.classList.add("toc-active");
          }
        })
      })
    })
  </script>

  <!--handle page scroll top and bottom, add toc-active -->
  <script type="text/javascript">
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active")
          };
          tocItems[tocItems.length - 1].classList.add("toc-active");
        };
      //scroll to top
      if(window.pageYOffset === 0) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active");
          };
          tocItems[0].classList.add("toc-active");
        };
      })
  </script>

  <!-- adjust alerts on mobile -->
  <script type="text/javascript">
    alert = document.querySelector('#support-alert')
    window.addEventListener("wheel", () => {
      if ($(window).width() < 1008) {
        //adjust alert
        if(window.pageYOffset > 0) {
          if(alert !== null) {
            document.querySelector('#support-alert').style.position = "fixed";
            document.querySelector('#support-alert').style.bottom = "0px";
            document.querySelector('#support-alert').style.margin = "5px";
            document.querySelector('#support-alert').style.zIndex = "9999999";
          }
        }
      }
   });
    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        if(alert !== null) {
          document.querySelector('#support-alert').style.removeProperty('position');
          document.querySelector('#support-alert').style.removeProperty('bottom');
          document.querySelector('#support-alert').style.removeProperty('margin');
          document.querySelector('#support-alert').style.removeProperty('zIndex');
        }
      }
    })
  </script>

  <!-- hide footer after 3 seconds -->
  <script type="text/javascript">
    const hideFooter = () => {
      document.querySelector('footer#rh, footer.footer-origin-docs').style.display = "none";
    };

    window.addEventListener('load', function() {
      setTimeout(hideFooter, 3000);
    });
  </script>
</body>
</html>
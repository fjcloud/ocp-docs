

<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  
  
  <title>Configuring routes | Networking | Red Hat build of MicroShift Branch Build</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css"/>
  <link href="https://docs.okd.io/latest/_stylesheets/search.css" rel="stylesheet" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/autumn.css" rel="stylesheet"  media="screen"/>
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png"/>
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css"/>
  <link href="https://assets.openshift.net/content/osh-nav-footer.css" rel="stylesheet" type="text/css" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/docs.css" rel="stylesheet"  media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/>
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">

  <!-- Adobe DTM -->
  <script src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <!-- End Adobe DTM -->

  <script id="trustarc" src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
        rel="stylesheet">

</head>

<body onload="selectVersion('Branch Build');">
  
<nav id="main">
  <div class="container">
    <div class="row">
      <div class="navbar navbar-default navbar-openshift" role="navigation">
        <div class="navbar-header">
            <a href="#nav-main" class="dropdown-toggle navbar-menu-toggle hidden visible-xs" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          <a class="navbar-brand" href="/"></a>
        </div>
        <div id="nav-main" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="products" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                Products <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-column flex-md-row">
                  <div class="col-xs-12 col-sm-3">
                    <h3>Overview</h3>
                    <ul class="nav flex-column">
                      <li><a target="_blank" href="https://www.openshift.com/products/features/">Features</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/products/pricing/">Pricing</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-9">
                    <h3>Featured Products</h3>
                    <ul class="nav">
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/container-platform/">Red Hat OpenShift Container&nbsp;Platform</a>
                        <p class="d-none d-md-block">Build, deploy and manage your applications across cloud- and on-premise infrastructure</p>
                      </li>
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/dedicated/">Red Hat OpenShift Dedicated</a>
                        <p class="d-none d-md-block">Single-tenant, high-availability Kubernetes clusters in the public cloud</p>
                      </li>

                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/online/">Red Hat OpenShift Online</a>
                        <p class="d-none d-md-block">The fastest way for developers to build, host and scale applications in the public cloud</p>
                      </li>

                      <li class="nav-item">
                        <a target="_blank" href="https://www.openshift.com/products/">All products <span class="fa fa-angle-right"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li id="learn" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Learn <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-md-nowrap">
                  <div class="col-xs-12 col-sm-6">
                    <h3>Learn</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/what-is-openshift/">What is OpenShift</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/get-started/">Get started</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/partners/">Partners</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/success-stories/">Customer success stories</a></li>
                      <li><a target="_blank" href="https://blog.openshift.com">Blog</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/resources/">Resources</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <h3>Technology Topics</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/knative/">Knative</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/security/">Security</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/kubernetes/">Kubernetes</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/service-brokers/">Service Brokers</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Community <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://commons.openshift.org">OpenShift Commons</a></li>
                <li><a target="_blank" href="https://www.okd.io">Open Source (OKD)</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/startups/">Startups</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/grants/">Grants</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Support <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://help.openshift.com">Help Center</a></li>
                <li><a href="https://docs.openshift.com">OpenShift Docs</a></li>
              </ul>
            </li>

            <li><a target="_blank" class="nav-sign-up" href="https://www.openshift.com/trial/">Free Trial</a></li>

            <li><a target="_blank" href="https://console.redhat.com/openshift" class="nav-sign-in">Log In <span class="fa fa-angle-right"></span></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

  
  <div class="container">
    <button id="hc-open-btn" class="open-btn-sm" onclick="openNav()" aria-label="Open"><span class="fa fa-bars" /></button>
    <ol class="breadcrumb hide-for-print">
      
      <span>
        <div class="alert alert-info" role="primary" id="support-info">
          <strong>Starting on March 12, 2025, OpenShift docs will only be available at <a href="https://docs.redhat.com/en/" style="color: #0C5460 !important" class="link-primary">docs.redhat.com</a>. From that time on, docs.openshift.com links will automatically redirect to their locations on docs.redhat.com.
          </strong>
        </div>
      </span>
      

      

      

      

      

      

      

      
      

      

      


      

      


      

      

      <li class="sitename">
        <a href="/">
          Documentation</a>
      </li>
      <li class="hidden-xs active">
        
          <a href="../microshift_welcome/index.html">Red Hat build of MicroShift Branch Build</a>
        
      </li>
      <li class="hidden-xs active">
        <a href="../microshift_networking/microshift-cni.html">Networking</a>
      </li>
      
      
      <li class="hidden-xs active">
        Configuring routes
      </li>
      
      <span text-align="right" style="float: right !important">
        <a href="https://github.com/openshift/openshift-docs/commits/main/microshift_networking/microshift-configuring-routes.adoc"><span class="material-icons-outlined" title="Page history">history</span></a>
        
        <a href="https://issues.redhat.com/secure/CreateIssueDetails!init.jspa?pid=12332330&issuetype=1&components=12367614&priority=4&summary=[microshift-Branch Build]+Issue+in+file+microshift_networking/microshift-configuring-routes.adoc">
          <span class="material-icons-outlined" title="Open an issue">bug_report</span>
        </a>
        <a href="javascript: void(0);" onclick="window.print()"><span class="material-icons-outlined" title="Print page (Save as PDF)">picture_as_pdf</span></a>
        
        
      </span>
      
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas hide-for-print">
        <div class="row-fluid">
          <div id="btn-close">
            <button id="hc-close-btn" onclick="closeNav()" class="close-btn-sm" aria-label="close"><span class="fa fa-times" /></button>
          </div>
          <div id="hc-search">
            <input id="hc-search-input" type="text" aria-label="search">
            <button id="hc-search-btn" aria-label="search"><span class="fa fa-search" /></button>
          </div>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0"><span id="tgSpan0" class="fa fa-angle-right"></span>Understanding MicroShift</a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_welcome/index.html">Understanding Red Hat build of MicroShift</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1"><span id="tgSpan1" class="fa fa-angle-right"></span>Red Hat build of MicroShift release notes</a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_release_notes/microshift-4-19-release-notes.html">Red Hat build of MicroShift 4.19 release notes</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2"><span id="tgSpan2" class="fa fa-angle-right"></span>Getting ready to install MicroShift</a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_install_get_ready/microshift-install-get-ready.html">Getting ready to install MicroShift</a></li>
            <li><a class="" href="../microshift_install_get_ready/microshift-fips.html">Using FIPS mode</a></li>
            <li><a class="" href="../microshift_install_get_ready/microshift-greenboot.html">Understanding system health checks</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3"><span id="tgSpan3" class="fa fa-angle-right"></span>Installing with an RPM package</a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_install_rpm/microshift-install-rpm.html">Installing with an RPM package</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4"><span id="tgSpan4" class="fa fa-angle-right"></span>Installing optional RPM packages</a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_install_rpm_opt/microshift-install-optional-rpms.html">Installing optional RPM packages</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5"><span id="tgSpan5" class="fa fa-angle-right"></span>Embedding in a RHEL for Edge image</a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_install_rpm_ostree/microshift-embed-in-rpm-ostree.html">Embedding in a RHEL for Edge image using image builder</a></li>
            <li><a class="" href="../microshift_install_rpm_ostree/microshift-deploy-with-mirror-registry.html">Mirroring container images for disconnected installations</a></li>
            <li><a class="" href="../microshift_install_rpm_ostree/microshift-embed-in-rpm-ostree-offline-use.html">Embedding in a RHEL for Edge image for offline use</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6"><span id="tgSpan6" class="fa fa-angle-right"></span>Installing with RHEL image mode</a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_install_bootc/microshift-about-rhel-image-mode.html">Understanding image mode for RHEL</a></li>
            <li><a class="" href="../microshift_install_bootc/microshift-install-bootc-image.html">Installing a bootc image</a></li>
            <li><a class="" href="../microshift_install_bootc/microshift-install-running-bootc-image-vm.html">Running the bootc image</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup7"><span id="tgSpan7" class="fa fa-angle-right"></span>Using RHEL Kickstarts</a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_install_kickstarts/microshift-rhel-kickstarts.html">Using a Kickstart file for automating installation</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup8"><span id="tgSpan8" class="fa fa-angle-right"></span>Updating</a>
      <ul id="topicGroup8" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_updating/microshift-update-options.html">Update options</a></li>
            <li><a class="" href="../microshift_updating/microshift-update-rpms-ostree.html">Updates with rpm-ostree systems</a></li>
            <li><a class="" href="../microshift_updating/microshift-update-rpms-manually.html">Manual updates with RPMs</a></li>
            <li><a class="" href="../microshift_updating/microshift-list-update-contents.html">Listing update package contents</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup9"><span id="tgSpan9" class="fa fa-angle-right"></span>Support</a>
      <ul id="topicGroup9" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_support/microshift-etcd.html">The etcd service</a></li>
            <li><a class="" href="../microshift_support/microshift-sos-report.html">The sos report tool</a></li>
            <li><a class="" href="../microshift_support/microshift-getting-cluster-id.html">Getting your cluster ID</a></li>
            <li><a class="" href="../microshift_support/microshift-getting-support.html">Getting support</a></li>
            <li><a class="" href="../microshift_support/microshift-remote-cluster-monitoring.html">Remote health monitoring with a connected cluster</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup10"><span id="tgSpan10" class="fa fa-angle-right"></span>Configuring</a>
      <ul id="topicGroup10" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_configuring/microshift-using-config-yaml.html">Using the MicroShift configuration file</a></li>
            <li><a class="" href="../microshift_configuring/microshift-nw-ipv6-config.html">Configuring IPv6 networking</a></li>
            <li><a class="" href="../microshift_configuring/microshift-ingress-controller.html">Using ingress control for a MicroShift cluster</a></li>
            <li><a class="" href="../microshift_configuring/microshift-disable-lvms-csi-provider-csi-snapshot.html">Disabling LVMS CSI provider and CSI snapshot</a></li>
            <li><a class="" href="../microshift_configuring/microshift-greenboot-checking-status.html">Checking the status of Greenboot health checks</a></li>
            <li><a class="" href="../microshift_configuring/microshift-cluster-access-kubeconfig.html">Cluster access with kubeconfig</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-6"><span id="sgSpan-10-6" class="fa fa-caret-right"></span>&nbsp;Configuring MicroShift authentication and security</a>
              <ul id="topicSubGroup-10-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_configuring/microshift_auth_security/microshift-custom-ca.html">Using custom certificate authorities</a></li>
                  <li><a class="" href="../microshift_configuring/microshift_auth_security/microshift-tls-config.html">Configuring TLS security profiles</a></li>
                  <li><a class="" href="../microshift_configuring/microshift_auth_security/microshift-audit-logs-config.html">Configuring audit logging policies</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-7"><span id="sgSpan-10-7" class="fa fa-caret-right"></span>&nbsp;Configuring low latency</a>
              <ul id="topicSubGroup-10-7" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_configuring/microshift_low_latency/microshift-low-latency.html">Configuring low latency</a></li>
                  <li><a class="" href="../microshift_configuring/microshift_low_latency/microshift-workload-partitioning.html">Workload partitioning</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup11"><span id="tgSpan11" class="fa fa-angle-down"></span>Networking</a>
      <ul id="topicGroup11" class="collapse in list-unstyled">
            <li><a class="" href="../microshift_networking/microshift-cni.html">About the networking plugin</a></li>
            <li><a class="" href="../microshift_networking/microshift-networking-settings.html">Using networking settings</a></li>
            <li><a class="" href="../microshift_networking/microshift-nw-router.html">Configuring the router</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-11-3"><span id="sgSpan-11-3" class="fa fa-caret-right"></span>&nbsp;Network policies</a>
              <ul id="topicSubGroup-11-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_networking/microshift_network_policy/microshift-network-policy-index.html">About network policies</a></li>
                  <li><a class="" href="../microshift_networking/microshift_network_policy/microshift-creating-network-policy.html">Creating network policies</a></li>
                  <li><a class="" href="../microshift_networking/microshift_network_policy/microshift-editing-network-policy.html">Editing network policies</a></li>
                  <li><a class="" href="../microshift_networking/microshift_network_policy/microshift-deleting-network-policy.html">Deleting network policies</a></li>
                  <li><a class="" href="../microshift_networking/microshift_network_policy/microshift-viewing-network-policy.html">Viewing network policies</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-11-4"><span id="sgSpan-11-4" class="fa fa-caret-right"></span>&nbsp;Multiple networks</a>
              <ul id="topicSubGroup-11-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_networking/microshift_multiple_networks/microshift-cni-multus.html">About using multiple networks</a></li>
                  <li><a class="" href="../microshift_networking/microshift_multiple_networks/microshift-cni-multus-using.html">Configuring and using multiple networks</a></li>              </ul>
            </li>
            <li><a class=" active" href="../microshift_networking/microshift-configuring-routes.html">Configuring routes</a></li>
            <li><a class="" href="../microshift_networking/microshift-firewall.html">Firewall configuration</a></li>
            <li><a class="" href="../microshift_networking/microshift-disconnected-network-config.html">Networking settings for fully disconnected hosts</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup12"><span id="tgSpan12" class="fa fa-angle-right"></span>Storage</a>
      <ul id="topicGroup12" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_storage/index.html">About storage</a></li>
            <li><a class="" href="../microshift_storage/understanding-ephemeral-storage-microshift.html">Understanding ephemeral storage</a></li>
            <li><a class="" href="../microshift_storage/generic-ephemeral-volumes-microshift.html">Generic ephemeral volumes</a></li>
            <li><a class="" href="../microshift_storage/understanding-persistent-storage-microshift.html">Understanding persistent storage</a></li>
            <li><a class="" href="../microshift_storage/expanding-persistent-volumes-microshift.html">Expanding persistent volumes</a></li>
            <li><a class="" href="../microshift_storage/microshift-storage-plugin-overview.html">Dynamic storage using the LVMS plugin</a></li>
            <li><a class="" href="../microshift_storage/volume-snapshots-microshift.html">Working with volume snapshots</a></li>
            <li><a class="" href="../microshift_storage/microshift-storage-migration.html">Understanding storage migration</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup13"><span id="tgSpan13" class="fa fa-angle-right"></span>Running applications</a>
      <ul id="topicGroup13" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_running_apps/microshift-applications.html">Using Kustomize to deploy applications</a></li>
            <li><a class="" href="../microshift_running_apps/microshift-deleting-resource-manifests.html">Deleting or updating Kustomize manifest resources</a></li>
            <li><a class="" href="../microshift_running_apps/microshift-embedded-apps-on-rhel-edge.html">Embedding applications on RHEL for Edge</a></li>
            <li><a class="" href="../microshift_running_apps/microshift-embed-apps-offline-use.html">Embedding applications for offline use</a></li>
            <li><a class="" href="../microshift_running_apps/microshift-embedding-apps-tutorial.html">Embedding applications tutorial</a></li>
            <li><a class="" href="../microshift_running_apps/microshift-greenboot-workload-scripts.html">Creating application or workload health check scripts</a></li>
            <li><a class="" href="../microshift_running_apps/microshift-gitops.html">Automating application management with GitOps</a></li>
            <li><a class="" href="../microshift_running_apps/microshift-authentication.html">Pod security authentication and authorization</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-13-8"><span id="sgSpan-13-8" class="fa fa-caret-right"></span>&nbsp;Operators</a>
              <ul id="topicSubGroup-13-8" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_running_apps/microshift_operators/microshift-operators.html">Using Operators</a></li>
                  <li><a class="" href="../microshift_running_apps/microshift_operators/microshift-operators-olm.html">Using Operator Lifecycle Manager</a></li>
                  <li><a class="" href="../microshift_running_apps/microshift_operators/microshift-operators-oc-mirror.html">Creating custom catalogs with oc-mirror</a></li>
                  <li><a class="" href="../microshift_running_apps/microshift_operators/microshift-operators-oc-mirror-disconnected.html">Adding OLM-based Operators to a disconnected cluster</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup14"><span id="tgSpan14" class="fa fa-angle-right"></span>Backup and restore</a>
      <ul id="topicGroup14" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_backup_and_restore/microshift-backup-and-restore.html">Backing up and restoring data</a></li>
            <li><a class="" href="../microshift_backup_and_restore/microshift-auto-recover-manual-backup.html">Automated recovery from manual backups</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup15"><span id="tgSpan15" class="fa fa-angle-right"></span>Troubleshooting</a>
      <ul id="topicGroup15" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_troubleshooting/microshift-version.html">Check your version</a></li>
            <li><a class="" href="../microshift_troubleshooting/microshift-troubleshoot-cluster.html">Troubleshoot the cluster</a></li>
            <li><a class="" href="../microshift_troubleshooting/microshift-installing-troubleshooting.html">Troubleshoot installation issues</a></li>
            <li><a class="" href="../microshift_troubleshooting/microshift-troubleshoot-backup-restore.html">Troubleshoot backup and restore</a></li>
            <li><a class="" href="../microshift_troubleshooting/microshift-troubleshoot-updates.html">Troubleshoot updates</a></li>
            <li><a class="" href="../microshift_troubleshooting/microshift-audit-logs.html">Check the audit logs</a></li>
            <li><a class="" href="../microshift_troubleshooting/microshift-etcd-troubleshoot.html">Troubleshoot etcd</a></li>
            <li><a class="" href="../microshift_troubleshooting/microshift-things-to-know.html">Additional information</a></li>
            <li><a class="" href="../microshift_troubleshooting/microshift-cleanup-data.html">Data cleanup</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup16"><span id="tgSpan16" class="fa fa-angle-right"></span>CLI tools</a>
      <ul id="topicGroup16" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_cli_ref/microshift-cli-tools-introduction.html">CLI tools introduction</a></li>
            <li><a class="" href="../microshift_cli_ref/microshift-oc-cli-install.html">Installing the OpenShift CLI</a></li>
            <li><a class="" href="../microshift_cli_ref/microshift-oc-config.html">Configuring the OpenShift CLI</a></li>
            <li><a class="" href="../microshift_cli_ref/microshift-cli-using-oc.html">Using the OpenShift CLI</a></li>
            <li><a class="" href="../microshift_cli_ref/microshift-usage-oc-kubectl.html">Using oc and kubectl</a></li>
            <li><a class="" href="../microshift_cli_ref/microshift-oc-cli-commands-list.html">List of oc CLI commands</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup17"><span id="tgSpan17" class="fa fa-angle-right"></span>API reference</a>
      <ul id="topicGroup17" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_rest_api/understanding-api-support-tiers.html">Understanding API tiers</a></li>
            <li><a class="" href="../microshift_rest_api/understanding-compatibility-guidelines.html">API compatibility guidelines</a></li>
            <li><a class="" href="../microshift_rest_api/index.html">API index</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-3"><span id="sgSpan-17-3" class="fa fa-caret-right"></span>&nbsp;API object reference</a>
              <ul id="topicSubGroup-17-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/objects/index.html">API objects reference</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-4"><span id="sgSpan-17-4" class="fa fa-caret-right"></span>&nbsp;Extension APIs</a>
              <ul id="topicSubGroup-17-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/api_extensions_apis/api-extensions-apis-index.html">Extension APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/api_extensions_apis/customresourcedefinition-apiextensions-k8s-io-v1.html">CustomResourceDefinition [apiextensions.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-5"><span id="sgSpan-17-5" class="fa fa-caret-right"></span>&nbsp;Registration APIs</a>
              <ul id="topicSubGroup-17-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/api_registration_apis/api-registration-apis-index.html">Registration APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/api_registration_apis/apiservice-apiregistration-k8s-io-v1.html">APIService [apiregistration.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-6"><span id="sgSpan-17-6" class="fa fa-caret-right"></span>&nbsp;Apps APIs</a>
              <ul id="topicSubGroup-17-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/apps_apis/apps-apis-index.html">Apps APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/apps_apis/controllerrevision-apps-v1.html">ControllerRevision [apps/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/apps_apis/daemonset-apps-v1.html">DaemonSet [apps/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/apps_apis/deployment-apps-v1.html">Deployment [apps/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/apps_apis/replicaset-apps-v1.html">ReplicaSet [apps/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/apps_apis/statefulset-apps-v1.html">StatefulSet [apps/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-7"><span id="sgSpan-17-7" class="fa fa-caret-right"></span>&nbsp;Authentication APIs</a>
              <ul id="topicSubGroup-17-7" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/authentication_apis/authentication-apis-index.html">Authentication APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/authentication_apis/tokenrequest-authentication-k8s-io-v1.html">TokenRequest [authentication.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/authentication_apis/tokenreview-authentication-k8s-io-v1.html">TokenReview [authentication.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-8"><span id="sgSpan-17-8" class="fa fa-caret-right"></span>&nbsp;Authorization APIs</a>
              <ul id="topicSubGroup-17-8" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/authorization_apis/authorization-apis-index.html">Authorization APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/authorization_apis/localsubjectaccessreview-authorization-k8s-io-v1.html">LocalSubjectAccessReview [authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/authorization_apis/selfsubjectaccessreview-authorization-k8s-io-v1.html">SelfSubjectAccessReview [authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/authorization_apis/selfsubjectrulesreview-authorization-k8s-io-v1.html">SelfSubjectRulesReview [authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/authorization_apis/subjectaccessreview-authorization-k8s-io-v1.html">SubjectAccessReview [authorization.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-9"><span id="sgSpan-17-9" class="fa fa-caret-right"></span>&nbsp;Autoscaling APIs</a>
              <ul id="topicSubGroup-17-9" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/autoscaling_apis/autoscaling-apis-index.html">Autoscaling APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/autoscaling_apis/horizontalpodautoscaler-autoscaling-v2.html">HorizontalPodAutoscaler [autoscaling/v2]</a></li>
                  <li><a class="" href="../microshift_rest_api/autoscaling_apis/scale-autoscaling-v1.html">Scale [autoscaling/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-10"><span id="sgSpan-17-10" class="fa fa-caret-right"></span>&nbsp;Batch APIs</a>
              <ul id="topicSubGroup-17-10" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/batch_apis/batch-apis-index.html">Batch APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/batch_apis/cronjob-batch-v1.html">CronJob [batch/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/batch_apis/job-batch-v1.html">Job [batch/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-11"><span id="sgSpan-17-11" class="fa fa-caret-right"></span>&nbsp;Certificates APIs</a>
              <ul id="topicSubGroup-17-11" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/certificates_apis/certificates-apis-index.html">Certificates APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/certificates_apis/certificatesigningrequest-certificates-k8s-io-v1.html">CertificateSigningRequest [certificates.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-12"><span id="sgSpan-17-12" class="fa fa-caret-right"></span>&nbsp;Coordination APIs</a>
              <ul id="topicSubGroup-17-12" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/coordination_apis/coordination-apis-index.html">Coordination APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/coordination_apis/lease-coordination-k8s-io-v1.html">Lease [coordination.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-13"><span id="sgSpan-17-13" class="fa fa-caret-right"></span>&nbsp;Core APIs</a>
              <ul id="topicSubGroup-17-13" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/core_apis/core-apis-index.html">Core APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/binding-v1.html">Binding [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/componentstatus-v1.html">ComponentStatus [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/configmap-v1.html">ConfigMap [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/endpoints-v1.html">Endpoints [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/event-v1.html">Event [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/limitrange-v1.html">LimitRange [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/namespace-v1.html">Namespace [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/node-v1.html">Node [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/persistentvolume-v1.html">PersistentVolume [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/persistentvolumeclaim-v1.html">PersistentVolumeClaim [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/pod-v1.html">Pod [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/podtemplate-v1.html">PodTemplate [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/replicationcontroller-v1.html">ReplicationController [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/resourcequota-v1.html">ResourceQuota [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/secret-v1.html">Secret [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/service-v1.html">Service [v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/core_apis/serviceaccount-v1.html">ServiceAccount [v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-14"><span id="sgSpan-17-14" class="fa fa-caret-right"></span>&nbsp;Discovery APIs</a>
              <ul id="topicSubGroup-17-14" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/discovery_apis/discovery-apis-index.html">Discovery APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/discovery_apis/endpointslice-discovery-k8s-io-v1.html">EndpointSlice [discovery.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-15"><span id="sgSpan-17-15" class="fa fa-caret-right"></span>&nbsp;Events APIs</a>
              <ul id="topicSubGroup-17-15" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/events_apis/events-apis-index.html">Events APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/events_apis/event-events-k8s-io-v1.html">Event [events.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-16"><span id="sgSpan-17-16" class="fa fa-caret-right"></span>&nbsp;Flow Control APIs</a>
              <ul id="topicSubGroup-17-16" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/flow_control_apis/flow-control-apis-index.html">Flow Control APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/flow_control_apis/flowschema-flowcontrol-apiserver-k8s-io-v1beta3.html">FlowSchema [flowcontrol.apiserver.k8s.io/v1beta3]</a></li>
                  <li><a class="" href="../microshift_rest_api/flow_control_apis/prioritylevelconfiguration-flowcontrol-apiserver-k8s-io-v1beta3.html">PriorityLevelConfiguration [flowcontrol.apiserver.k8s.io/v1beta3]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-17"><span id="sgSpan-17-17" class="fa fa-caret-right"></span>&nbsp;Networking APIs</a>
              <ul id="topicSubGroup-17-17" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/networking_apis/networking-apis-index.html">Networking APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/networking_apis/ingress-networking-k8s-io-v1.html">Ingress [networking.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/networking_apis/ingressclass-networking-k8s-io-v1.html">IngressClass [networking.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/networking_apis/networkpolicy-networking-k8s-io-v1.html">NetworkPolicy [networking.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-18"><span id="sgSpan-17-18" class="fa fa-caret-right"></span>&nbsp;Node APIs</a>
              <ul id="topicSubGroup-17-18" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/node_apis/node-apis-index.html">Node APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/node_apis/runtimeclass-node-k8s-io-v1.html">RuntimeClass [node.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-19"><span id="sgSpan-17-19" class="fa fa-caret-right"></span>&nbsp;Policy APIs</a>
              <ul id="topicSubGroup-17-19" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/policy_apis/policy-apis-index.html">Policy APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/policy_apis/eviction-policy-v1.html">Eviction [policy/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/policy_apis/poddisruptionbudget-policy-v1.html">PodDisruptionBudget [policy/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-20"><span id="sgSpan-17-20" class="fa fa-caret-right"></span>&nbsp;RBAC APIs</a>
              <ul id="topicSubGroup-17-20" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/rbac_apis/rbac-apis-index.html">RBAC APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/rbac_apis/clusterrole-rbac-authorization-k8s-io-v1.html">ClusterRole [rbac.authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/rbac_apis/clusterrolebinding-rbac-authorization-k8s-io-v1.html">ClusterRoleBinding [rbac.authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/rbac_apis/role-rbac-authorization-k8s-io-v1.html">Role [rbac.authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/rbac_apis/rolebinding-rbac-authorization-k8s-io-v1.html">RoleBinding [rbac.authorization.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-21"><span id="sgSpan-17-21" class="fa fa-caret-right"></span>&nbsp;Network APIs</a>
              <ul id="topicSubGroup-17-21" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/network_apis/network-apis-index.html">Network APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/network_apis/route-route-openshift-io-v1.html">Route [route.openshift.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-22"><span id="sgSpan-17-22" class="fa fa-caret-right"></span>&nbsp;Scheduling APIs</a>
              <ul id="topicSubGroup-17-22" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/scheduling_apis/scheduling-apis-index.html">Scheduling APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/scheduling_apis/priorityclass-scheduling-k8s-io-v1.html">PriorityClass [scheduling.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-23"><span id="sgSpan-17-23" class="fa fa-caret-right"></span>&nbsp;Security APIs</a>
              <ul id="topicSubGroup-17-23" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/security_apis/security-apis-index.html">Security APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/security_apis/securitycontextconstraints-security-openshift-io-v1.html">SecurityContextConstraints [security.openshift.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-24"><span id="sgSpan-17-24" class="fa fa-caret-right"></span>&nbsp;Security-Internal APIs</a>
              <ul id="topicSubGroup-17-24" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/security_internal_apis/security-internal-apis-index.html">Security Internal APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/security_internal_apis/rangeallocation-security-internal-openshift-io-v1.html">RangeAllocation [security.internal.openshift.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-25"><span id="sgSpan-17-25" class="fa fa-caret-right"></span>&nbsp;Snapshot APIs</a>
              <ul id="topicSubGroup-17-25" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/snapshot_apis/snapshot-apis-index.html">CSI Snapshot APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/snapshot_apis/volumesnapshot-snapshot-storage-k8s-io-v1.html">VolumeSnapshot [snapshot.storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/snapshot_apis/volumesnapshotclass-snapshot-storage-k8s-io-v1.html">VolumeSnapshotClass [snapshot.storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/snapshot_apis/volumesnapshotcontent-snapshot-storage-k8s-io-v1.html">VolumeSnapshotContent [snapshot.storage.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-26"><span id="sgSpan-17-26" class="fa fa-caret-right"></span>&nbsp;Storage APIs</a>
              <ul id="topicSubGroup-17-26" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/storage_apis/storage-apis-index.html">Storage APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/storage_apis/csidriver-storage-k8s-io-v1.html">CSIDriver [storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/storage_apis/csinode-storage-k8s-io-v1.html">CSINode [storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/storage_apis/csistoragecapacity-storage-k8s-io-v1.html">CSIStorageCapacity [storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/storage_apis/storageclass-storage-k8s-io-v1.html">StorageClass [storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/storage_apis/volumeattachment-storage-k8s-io-v1.html">VolumeAttachment [storage.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-27"><span id="sgSpan-17-27" class="fa fa-caret-right"></span>&nbsp;Storage Version Migration APIs</a>
              <ul id="topicSubGroup-17-27" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/storage_version_migration_apis/storage-version-migration-apis-index.html">Storage Version Migration APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/storage_version_migration_apis/storageversionmigration-migration-k8s-io-v1alpha1.html">StorageVersionMigration [migration.k8s.io/v1alpha1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-28"><span id="sgSpan-17-28" class="fa fa-caret-right"></span>&nbsp;TopoLVM APIs</a>
              <ul id="topicSubGroup-17-28" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/topolvm_apis/topolvm-apis-index.html">TopoLVM APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/topolvm_apis/logicalvolume-topolvm-io-v1.html">LogicalVolume [topolvm.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-29"><span id="sgSpan-17-29" class="fa fa-caret-right"></span>&nbsp;Webhook APIs</a>
              <ul id="topicSubGroup-17-29" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/webhook_apis/webhook-apis-index.html">Webhook APIs</a></li>
                  <li><a class="" href="../microshift_rest_api/webhook_apis/mutatingwebhookconfiguration-admissionregistration-k8s-io-v1.html">MutatingWebhookConfiguration [admissionregistration.k8s.io/v1]</a></li>
                  <li><a class="" href="../microshift_rest_api/webhook_apis/validatingwebhookconfiguration-admissionregistration-k8s-io-v1.html">ValidatingWebhookConfiguration [admissionregistration.k8s.io/v1]</a></li>              </ul>
            </li>
      </ul>
    </li>
</ul>
      </div>
      <div id="hc-search-modal">
        <div id="hc-modal-content">
          <span id="hc-modal-close">&times;</span>
          <div id="hc-search-results-wrapper">
            <div id="hc-search-results"></div>
            <div id="hc-search-progress-indicator" class="text-center search-progress-indicator"><i class="fa fa-circle-o-notch fa-spin" style="font-size:42px"></i></div>
            <div class="text-center">
              <button id="hc-search-more-btn">Show more results</button>
            </div>
          </div>
        </div>
      </div>
      <div class="print-logo" style="display:none;">
        <img src="https://www.redhat.com/cms/managed-files/Logo-Red_Hat-OpenShift-A-Standard-RGB_0_0.svg" alt="print logo"/>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h1>
            Configuring routes
          </h1>
        </div>
        
        
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#microshift-nw-creating-a-route_microshift-configuring-routes">Creating an HTTP-based route</a></li>
<li><a href="#nw-enabling-hsts_microshift-configuring-routes">HTTP Strict Transport Security</a></li>
<li><a href="#nw-enabling-hsts-per-route_microshift-configuring-routes">Enabling HTTP Strict Transport Security per-route</a>
<ul class="sectlevel2">
<li><a href="#nw-disabling-hsts_microshift-configuring-routes">Disabling HTTP Strict Transport Security per-route</a></li>
<li><a href="#microshift-nw-enforcing-hsts-per-domain_microshift-configuring-routes">Enforcing HTTP Strict Transport Security per-domain</a></li>
</ul>
</li>
<li><a href="#nw-throughput-troubleshoot_microshift-configuring-routes">Throughput issue troubleshooting methods</a></li>
<li><a href="#nw-using-cookies-keep-route-statefulness_microshift-configuring-routes">Using cookies to keep route statefulness</a>
<ul class="sectlevel2">
<li><a href="#nw-annotating-a-route-with-a-cookie-name_microshift-configuring-routes">Annotating a route with a cookie</a></li>
</ul>
</li>
<li><a href="#nw-path-based-routes_microshift-configuring-routes">Path-based routes</a></li>
<li><a href="#nw-http-header-configuration_microshift-configuring-routes">HTTP header configuration</a>
<ul class="sectlevel2">
<li><a href="#nw-http-header-configuration-special-cases_microshift-configuring-routes">Special case headers</a></li>
</ul>
</li>
<li><a href="#nw-route-set-or-delete-http-headers_microshift-configuring-routes">Setting or deleting HTTP request and response headers in a route</a></li>
<li><a href="#nw-ingress-creating-a-route-via-an-ingress_microshift-configuring-routes">Creating a route through an Ingress object</a></li>
<li><a href="#nw-ingress-edge-route-default-certificate_microshift-configuring-routes">Creating a route using the default certificate through an Ingress object</a></li>
<li><a href="#nw-ingress-re-encrypt-route-custom-cert_microshift-configuring-routes">Creating a route using the destination CA certificate in the Ingress annotation</a></li>
<li><a href="#microshift-secured-routes_microshift-configuring-routes">Secured routes</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<!-- toc disabled -->
<div class="paragraph">
<p>You can configure routes for MicroShift for clusters.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="microshift-nw-creating-a-route_microshift-configuring-routes"><a class="anchor" href="#microshift-nw-creating-a-route_microshift-configuring-routes"></a>Creating an HTTP-based route</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A route allows you to host your application at a public URL. It can either be secure or unsecured, depending on the network security configuration of your application. An HTTP-based route is an unsecured route that uses the basic HTTP routing protocol and exposes a service on an unsecured application port.</p>
</div>
<div class="paragraph">
<p>The following procedure describes how to create a simple HTTP-based route to a web application, using the <code>hello-microshift</code> application as an example.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You installed the OpenShift CLI (<code>oc</code>).</p>
</li>
<li>
<p>You have access to your MicroShift cluster.</p>
</li>
<li>
<p>You have a web application that exposes a port and a TCP endpoint listening for traffic on the port.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a service called <code>hello-microshift</code> by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc expose pod hello-microshift <span class="nt">-n</span> <span class="nv">$namespace</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create an unsecured route to the <code>hello-microshift</code> application by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc expose svc/hello-microshift <span class="nt">--hostname</span><span class="o">=</span>microshift.com <span class="nv">$namespace</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Verify that the <code>route</code> resource was created by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get routes <span class="nt">-o</span> yaml &lt;name of resource&gt; <span class="nt">-n</span> <span class="nv">$namespace</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In this example, the route is named <code>hello-microshift</code> and the namespace is named <code>hello-microshift</code>.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Sample YAML definition of the created unsecured route:</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">route.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Route</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">hello-microshift</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">hello-microshift</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">microshift.com</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="na">port</span><span class="pi">:</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="s">8080</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="na">to</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">hello-microshift</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Example hostname.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>targetPort</code> is required for the router to map the endpoint port in the service.
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>MicroShift does not a use an API that creates a default ingress domain, but instead provides a wildcard for automatically generated domains. Each route can also define a separate hostname.</p>
</div>
</td>
</tr>
</table>
</div></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nw-enabling-hsts_microshift-configuring-routes"><a class="anchor" href="#nw-enabling-hsts_microshift-configuring-routes"></a>HTTP Strict Transport Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTTP Strict Transport Security (HSTS) policy is a security enhancement, which signals to the browser client that only HTTPS traffic is allowed on the route host. HSTS also optimizes web traffic by signaling HTTPS transport is required, without using HTTP redirects. HSTS is useful for speeding up interactions with websites.</p>
</div>
<div class="paragraph">
<p>When HSTS policy is enforced, HSTS adds a Strict Transport Security header to HTTP and HTTPS responses from the site. You can use the <code>insecureEdgeTerminationPolicy</code> value in a route to redirect HTTP to HTTPS. When HSTS is enforced, the client changes all requests from the HTTP URL to HTTPS before the request is sent, eliminating the need for a redirect.</p>
</div>
<div class="paragraph">
<p>Cluster administrators can configure HSTS to do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enable HSTS per-route</p>
</li>
<li>
<p>Disable HSTS per-route</p>
</li>
<li>
<p>Enforce HSTS per-domain, for a set of domains, or use namespace labels in combination with domains</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>HSTS works only with secure routes, either edge-terminated or re-encrypt. The configuration is ineffective on HTTP or passthrough routes.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nw-enabling-hsts-per-route_microshift-configuring-routes"><a class="anchor" href="#nw-enabling-hsts-per-route_microshift-configuring-routes"></a>Enabling HTTP Strict Transport Security per-route</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTTP strict transport security (HSTS) is implemented in the HAProxy template and applied to edge and re-encrypt routes that have the <code>haproxy.router.openshift.io/hsts_header</code> annotation.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have root access to the cluster.</p>
</li>
<li>
<p>You installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To enable HSTS on a route, add the <code>haproxy.router.openshift.io/hsts_header</code> value to the edge-terminated or re-encrypt route. You can use the <code>oc annotate</code> tool to do this by running the following command. To properly run the command, ensure that the semicolon (<code>;</code>) in the <code>haproxy.router.openshift.io/hsts_header</code> route annotation is also surrounded by double quotation marks (<code>""</code>).</p>
<div class="listingblock">
<div class="title">Example <code>annotate</code> command that sets the maximum age to <code>31536000</code> ms (approximetly 8.5 hours)</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc annotate route &lt;route_name&gt; <span class="nt">-n</span> &lt;namespace&gt; <span class="nt">--overwrite</span><span class="o">=</span><span class="nb">true</span> <span class="s2">"haproxy.router.openshift.io/hsts_header=max-age=31536000;</span><span class="se">\</span><span class="s2">
includeSubDomains;preload"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example route configured with an annotation</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">route.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Route</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">haproxy.router.openshift.io/hsts_header</span><span class="pi">:</span> <span class="s">max-age=31536000;includeSubDomains;preload</span>   <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">def.abc.com</span>
  <span class="na">tls</span><span class="pi">:</span>
    <span class="na">termination</span><span class="pi">:</span> <span class="s2">"</span><span class="s">reencrypt"</span>
    <span class="s">...</span>
  <span class="na">wildcardPolicy</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Subdomain"</span>
<span class="c1"># ...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Required. <code>max-age</code> measures the length of time, in seconds, that the HSTS policy is in effect. If set to <code>0</code>, it negates the policy.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Optional. When included, <code>includeSubDomains</code> tells the client
that all subdomains of the host must have the same HSTS policy as the host.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Optional. When <code>max-age</code> is greater than 0, you can add <code>preload</code> in  <code>haproxy.router.openshift.io/hsts_header</code> to allow external services to include this site in their HSTS preload lists. For example, sites such as Google can construct a list of sites that have <code>preload</code> set. Browsers can then use these lists to determine which sites they can communicate with over HTTPS, even before they have interacted with the site. Without <code>preload</code> set, browsers must have interacted with the site over HTTPS, at least once, to get the header.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="nw-disabling-hsts_microshift-configuring-routes"><a class="anchor" href="#nw-disabling-hsts_microshift-configuring-routes"></a>Disabling HTTP Strict Transport Security per-route</h3>
<div class="paragraph">
<p>To disable HTTP strict transport security (HSTS) per-route, you can set the <code>max-age</code> value in the route annotation to <code>0</code>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have root access to the cluster.</p>
</li>
<li>
<p>You installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To disable HSTS, set the <code>max-age</code> value in the route annotation to <code>0</code>, by entering the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc annotate route &lt;route_name&gt; <span class="nt">-n</span> &lt;namespace&gt; <span class="nt">--overwrite</span><span class="o">=</span><span class="nb">true</span> <span class="s2">"haproxy.router.openshift.io/hsts_header"</span><span class="o">=</span><span class="s2">"max-age=0"</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can alternatively apply the following YAML to create the config map:</p>
</div>
<div class="listingblock">
<div class="title">Example of disabling HSTS per-route</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">metadata</span><span class="pi">:</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">haproxy.router.openshift.io/hsts_header</span><span class="pi">:</span> <span class="s">max-age=0</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>To disable HSTS for every route in a namespace, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc annotate route <span class="nt">--all</span> <span class="nt">-n</span> &lt;namespace&gt; <span class="nt">--overwrite</span><span class="o">=</span><span class="nb">true</span> <span class="s2">"haproxy.router.openshift.io/hsts_header"</span><span class="o">=</span><span class="s2">"max-age=0"</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>To query the annotation for all routes, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get route  <span class="nt">--all-namespaces</span> <span class="nt">-o</span> go-template<span class="o">=</span><span class="s1">'{{range .items}}{{if .metadata.annotations}}{{$a := index .metadata.annotations "haproxy.router.openshift.io/hsts_header"}}{{$n := .metadata.name}}{{with $a}}Name: {{$n}} HSTS: {{$a}}{{"\n"}}{{else}}{{""}}{{end}}{{end}}{{end}}'</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">Name: routename HSTS: max-age=0</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="microshift-nw-enforcing-hsts-per-domain_microshift-configuring-routes"><a class="anchor" href="#microshift-nw-enforcing-hsts-per-domain_microshift-configuring-routes"></a>Enforcing HTTP Strict Transport Security per-domain</h3>
<div class="paragraph">
<p>You can configure a route with a compliant HSTS policy annotation. To handle upgraded clusters with non-compliant HSTS routes, you can update the manifests at the source and apply the updates.</p>
</div>
<div class="paragraph">
<p>You cannot use <code>oc expose route</code> or <code>oc create route</code> commands to add a route in a domain that enforces HSTS because the API for these commands does not accept annotations.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>HSTS cannot be applied to insecure, or non-TLS, routes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have root access to the cluster.</p>
</li>
<li>
<p>You installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Apply HSTS to all routes in the cluster by running the following <code>oc annotate command</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc annotate route <span class="nt">--all</span> <span class="nt">--all-namespaces</span> <span class="nt">--overwrite</span><span class="o">=</span><span class="nb">true</span> <span class="s2">"haproxy.router.openshift.io/hsts_header"</span><span class="o">=</span><span class="s2">"max-age=31536000;preload;includeSubDomains"</span></code></pre>
</div>
</div>
</li>
<li>
<p>Apply HSTS to all routes in a particular namespace by running the following <code>oc annotate command</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc annotate route <span class="nt">--all</span> <span class="nt">-n</span> <em>&lt;my_namespace&gt;</em> <span class="nt">--overwrite</span><span class="o">=</span><span class="nb">true</span> <span class="s2">"haproxy.router.openshift.io/hsts_header"</span><span class="o">=</span><span class="s2">"max-age=31536000;preload;includeSubDomains"</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code><em>&lt;my_namespace&gt;</em></code> with the namespace you want to use.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Review the HSTS annotations on all routes by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get route  <span class="nt">--all-namespaces</span> <span class="nt">-o</span> go-template<span class="o">=</span><span class="s1">'{{range .items}}{{if .metadata.annotations}}{{$a := index .metadata.annotations "haproxy.router.openshift.io/hsts_header"}}{{$n := .metadata.name}}{{with $a}}Name: {{$n}} HSTS: {{$a}}{{"\n"}}{{else}}{{""}}{{end}}{{end}}{{end}}'</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">Name: &lt;_routename_&gt;</span><span class="w"> </span>HSTS: max-age<span class="o">=</span>31536000<span class="p">;</span>preload<span class="p">;</span>includeSubDomains</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nw-throughput-troubleshoot_microshift-configuring-routes"><a class="anchor" href="#nw-throughput-troubleshoot_microshift-configuring-routes"></a>Throughput issue troubleshooting methods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sometimes applications deployed by using Red Hat build of MicroShift can cause network throughput issues, such as unusually high latency between specific services.</p>
</div>
<div class="paragraph">
<p>If pod logs do not reveal any cause of the problem, use the following methods to analyze performance issues:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use a packet analyzer, such as <code>ping</code> or <code>tcpdump</code> to analyze traffic between a pod and its node.</p>
<div class="paragraph">
<p>For example, <a href="https://access.redhat.com/solutions/4569211">run the <code>tcpdump</code> tool on each pod</a> while reproducing the behavior that led to the issue. Review the captures on both sides to compare send and receive timestamps to analyze the latency of traffic to and from a pod. Latency can occur in Red Hat build of MicroShift if a node interface is overloaded with traffic from other pods, storage devices, or the data plane.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>tcpdump <span class="nt">-s</span> 0 <span class="nt">-i</span> any <span class="nt">-w</span> /tmp/dump.pcap host &lt;podip 1&gt; <span class="o">&amp;&amp;</span> host &lt;podip 2&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>podip</code> is the IP address for the pod. Run the <code>oc get pod &lt;pod_name&gt; -o wide</code> command to get the IP address of a pod.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>tcpdump</code> command generates a file at <code>/tmp/dump.pcap</code> containing all traffic between these two pods. You can run the analyzer shortly before the issue is reproduced and stop the analyzer shortly after the issue is finished reproducing to minimize the size of the file. You can also <a href="https://access.redhat.com/solutions/5074041">run a packet analyzer between the nodes</a> with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>tcpdump <span class="nt">-s</span> 0 <span class="nt">-i</span> any <span class="nt">-w</span> /tmp/dump.pcap port 4789</code></pre>
</div>
</div>
</li>
<li>
<p>Use a bandwidth measuring tool, such as <a href="https://access.redhat.com/solutions/6129701"><code>iperf</code></a>, to measure streaming throughput and UDP throughput. Locate any bottlenecks by running the tool from the pods first, and then running it from the nodes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nw-using-cookies-keep-route-statefulness_microshift-configuring-routes"><a class="anchor" href="#nw-using-cookies-keep-route-statefulness_microshift-configuring-routes"></a>Using cookies to keep route statefulness</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat build of MicroShift provides sticky sessions, which enables stateful application traffic by ensuring all traffic hits the same endpoint. However, if the endpoint pod terminates, whether through restart, scaling, or a change in configuration, this statefulness can disappear.</p>
</div>
<div class="paragraph">
<p>Red Hat build of MicroShift can use cookies to configure session persistence. The ingress controller selects an endpoint to handle any user requests, and creates a cookie for the session. The cookie is passed back in the response to the request and the user sends the cookie back with the next request in the session. The cookie tells the ingress controller which endpoint is handling the session, ensuring that client requests use the cookie so that they are routed to the same pod.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Cookies cannot be set on passthrough routes, because the HTTP traffic cannot be seen. Instead, a number is calculated based on the source IP address, which determines the backend.</p>
</div>
<div class="paragraph">
<p>If backends change, the traffic can be directed to the wrong server, making it less sticky. If you are using a load balancer, which hides source IP, the same number is set for all connections and traffic is sent to the same pod.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="nw-annotating-a-route-with-a-cookie-name_microshift-configuring-routes"><a class="anchor" href="#nw-annotating-a-route-with-a-cookie-name_microshift-configuring-routes"></a>Annotating a route with a cookie</h3>
<div class="paragraph">
<p>You can set a cookie name to overwrite the default, auto-generated one for the route. This allows the application receiving route traffic to know the cookie name. Deleting the cookie can force the next request to re-choose an endpoint. The result is that if a server is overloaded, that server tries to remove the requests from the client and redistribute them.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Annotate the route with the specified cookie name:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc annotate route &lt;route_name&gt; router.openshift.io/cookie_name<span class="o">=</span><span class="s2">"&lt;cookie_name&gt;"</span></code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;route_name&gt;</code></dt>
<dd>
<p>Specifies the name of the route.</p>
</dd>
<dt class="hdlist1"><code>&lt;cookie_name&gt;</code></dt>
<dd>
<p>Specifies the name for the cookie.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>For example, to annotate the route <code>my_route</code> with the cookie name <code>my_cookie</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc annotate route my_route router.openshift.io/cookie_name<span class="o">=</span><span class="s2">"my_cookie"</span></code></pre>
</div>
</div>
</li>
<li>
<p>Capture the route hostname in a variable:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nv">ROUTE_NAME</span><span class="o">=</span><span class="si">$(</span>oc get route &lt;route_name&gt; <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.spec.host}'</span><span class="si">)</span></code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;route_name&gt;</code></dt>
<dd>
<p>Specifies the name of the route.</p>
</dd>
</dl>
</div>
</div>
</div>
</li>
<li>
<p>Save the cookie, and then access the route:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>curl <span class="nv">$ROUTE_NAME</span> <span class="nt">-k</span> <span class="nt">-c</span> /tmp/cookie_jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the cookie saved by the previous command when connecting to the route:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>curl <span class="nv">$ROUTE_NAME</span> <span class="nt">-k</span> <span class="nt">-b</span> /tmp/cookie_jar</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nw-path-based-routes_microshift-configuring-routes"><a class="anchor" href="#nw-path-based-routes_microshift-configuring-routes"></a>Path-based routes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Path-based routes specify a path component that can be compared against a URL, which requires that the traffic for the route be HTTP based. Thus, multiple routes can be served using the same hostname, each with a different path. Routers should match routes based on the most specific path to the least.</p>
</div>
<div class="paragraph">
<p>The following table shows example routes and their accessibility:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Route availability</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Route</th>
<th class="tableblock halign-left valign-top">When Compared to</th>
<th class="tableblock halign-left valign-top">Accessible</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><em>www.example.com/test</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>www.example.com/test</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>www.example.com</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><em>www.example.com/test</em> and <em>www.example.com</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>www.example.com/test</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>www.example.com</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><em>www.example.com</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>www.example.com/text</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes (Matched by the host, not the route)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>www.example.com</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">An unsecured route with a path</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">route.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Route</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">route-unsecured</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">www.example.com</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/test"</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="na">to</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">service-name</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The path is the only added attribute for a path-based route.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Path-based routing is not available when using passthrough TLS, as the router does not terminate TLS in that case and cannot read the contents of the request.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nw-http-header-configuration_microshift-configuring-routes"><a class="anchor" href="#nw-http-header-configuration_microshift-configuring-routes"></a>HTTP header configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When setting or deleting headers, you can use an individual route to modify request and response headers. You can also set certain headers by using route annotations. The various ways of configuring headers can present challenges when working together.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can only set or delete headers within a <code>Route</code> CR. You cannot append headers. If an HTTP header is set with a value, that value must be complete and not require appending in the future. In situations where it makes sense to append a header, such as the X-Forwarded-For header, use the <code>spec.httpHeaders.forwardedHeaderPolicy</code> field, instead of <code>spec.httpHeaders.actions</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example <code>Route</code> spec</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">route.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Route</span>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">httpHeaders</span><span class="pi">:</span>
    <span class="na">actions</span><span class="pi">:</span>
      <span class="na">response</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">X-Frame-Options</span>
        <span class="na">action</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">Set</span>
          <span class="na">set</span><span class="pi">:</span>
            <span class="na">value</span><span class="pi">:</span> <span class="s">SAMEORIGIN</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Any actions defined in a route override values set using route annotations.</p>
</div>
<div class="sect2">
<h3 id="nw-http-header-configuration-special-cases_microshift-configuring-routes"><a class="anchor" href="#nw-http-header-configuration-special-cases_microshift-configuring-routes"></a>Special case headers</h3>
<div class="paragraph">
<p>The following headers are either prevented entirely from being set or deleted, or allowed under specific circumstances:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Header name</th>
<th class="tableblock halign-left valign-top">Configurable using <code>Route</code> spec</th>
<th class="tableblock halign-left valign-top">Reason for disallowment</th>
<th class="tableblock halign-left valign-top">Configurable using another method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>proxy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>proxy</code> HTTP request header can be used to exploit vulnerable CGI applications by injecting the header value into the <code>HTTP_PROXY</code> environment variable. The <code>proxy</code> HTTP request header is also non-standard and prone to error during configuration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>host</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When the <code>host</code> HTTP request header is set using the <code>IngressController</code> CR, HAProxy can fail when looking up the correct route.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>strict-transport-security</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>strict-transport-security</code> HTTP response header is already handled using route annotations and does not need a separate implementation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes: the <code>haproxy.router.openshift.io/hsts_header</code> route annotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cookie</code> and <code>set-cookie</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The cookies that HAProxy sets are used for session tracking to map client connections to particular back-end servers. Allowing these headers to be set could interfere with HAProxy&#8217;s session affinity and restrict HAProxy&#8217;s ownership of a cookie.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes:</p>
<p class="tableblock">* the <code>haproxy.router.openshift.io/disable_cookie</code> route annotation
* the <code>haproxy.router.openshift.io/cookie_name</code> route annotation</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nw-route-set-or-delete-http-headers_microshift-configuring-routes"><a class="anchor" href="#nw-route-set-or-delete-http-headers_microshift-configuring-routes"></a>Setting or deleting HTTP request and response headers in a route</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can set or delete certain HTTP request and response headers for compliance purposes or other reasons. You can set or delete these headers either for all routes served by an Ingress Controller or for specific routes.</p>
</div>
<div class="paragraph">
<p>For example, you might want to enable a web application to serve content in alternate locations for specific routes if that content is written in multiple languages, even if there is a default global location specified by the Ingress Controller serving the routes.</p>
</div>
<div class="paragraph">
<p>The following procedure creates a route that sets the Content-Location HTTP request header so that the URL associated with the application, <code>https://app.example.com</code>, directs to the location <code>https://app.example.com/lang/en-us</code>. Directing application traffic to this location means that anyone using that specific route is accessing web content written in American English.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
<li>
<p>You are logged into an Red Hat build of MicroShift cluster as a project administrator.</p>
</li>
<li>
<p>You have a web application that exposes a port and an HTTP or TLS endpoint listening for traffic on the port.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a route definition and save it in a file called <code>app-example-route.yaml</code>:</p>
<div class="listingblock">
<div class="title">YAML definition of the created route with HTTP header directives</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">route.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Route</span>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">app.example.com</span>
  <span class="na">tls</span><span class="pi">:</span>
    <span class="na">termination</span><span class="pi">:</span> <span class="s">edge</span>
  <span class="na">to</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">app-example</span>
  <span class="na">httpHeaders</span><span class="pi">:</span>
    <span class="na">actions</span><span class="pi">:</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="na">response</span><span class="pi">:</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Content-Location</span> <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="na">action</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">Set</span> <i class="conum" data-value="4"></i><b>(4)</b>
          <span class="na">set</span><span class="pi">:</span>
            <span class="na">value</span><span class="pi">:</span> <span class="s">/lang/en-us</span> <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The list of actions you want to perform on the HTTP headers.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The type of header you want to change. In this case, a response header.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The name of the header you want to change. For a list of available headers you can set or delete, see <em>HTTP header configuration</em>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The type of action being taken on the header. This field can have the value <code>Set</code> or <code>Delete</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>When setting HTTP headers, you must provide a <code>value</code>. The value can be a string from a list of available directives for that header, for example <code>DENY</code>, or it can be a dynamic value that will be interpreted using HAProxy&#8217;s dynamic value syntax. In this case, the value is set to the relative location of the content.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a route to your existing web application using the newly created route definition:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> app-example create <span class="nt">-f</span> app-example-route.yaml</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For HTTP request headers, the actions specified in the route definitions are executed after any actions performed on HTTP request headers in the Ingress Controller. This means that any values set for those request headers in a route will take precedence over the ones set in the Ingress Controller. For more information on the processing order of HTTP headers, see <em>HTTP header configuration</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nw-ingress-creating-a-route-via-an-ingress_microshift-configuring-routes"><a class="anchor" href="#nw-ingress-creating-a-route-via-an-ingress_microshift-configuring-routes"></a>Creating a route through an Ingress object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some ecosystem components have an integration with Ingress resources but not with route resources. To cover this case, Red Hat build of MicroShift automatically creates managed route objects when an Ingress object is created. These route objects are deleted when the corresponding Ingress objects are deleted.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Define an Ingress object in the Red Hat build of MicroShift console or by entering the <code>oc create</code> command:</p>
<div class="listingblock">
<div class="title">YAML Definition of an Ingress</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">frontend</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">route.openshift.io/termination</span><span class="pi">:</span> <span class="s2">"</span><span class="s">reencrypt"</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="s">route.openshift.io/destination-ca-certificate-secret</span><span class="pi">:</span> <span class="s">secret-ca-cert</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">www.example.com</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">paths</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">backend</span><span class="pi">:</span>
          <span class="na">service</span><span class="pi">:</span>
            <span class="na">name</span><span class="pi">:</span> <span class="s">frontend</span>
            <span class="na">port</span><span class="pi">:</span>
              <span class="na">number</span><span class="pi">:</span> <span class="m">443</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
        <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
  <span class="na">tls</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">www.example.com</span>
    <span class="na">secretName</span><span class="pi">:</span> <span class="s">example-com-tls-certificate</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>route.openshift.io/termination</code> annotation can be used to configure the <code>spec.tls.termination</code> field of the <code>Route</code> as <code>Ingress</code> has  no field for this. The accepted values are <code>edge</code>, <code>passthrough</code> and <code>reencrypt</code>. All other values are silently ignored. When  the annotation value is unset, <code>edge</code> is the default route. The TLS certificate details must be defined in the template file to implement the default edge route.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>When working with an <code>Ingress</code> object, you must specify an explicit hostname, unlike when working with routes. You can use the <code>&lt;host_name&gt;.&lt;cluster_ingress_domain&gt;</code> syntax, for example <code>apps.openshiftdemos.com</code>, to take advantage of the <code>*.&lt;cluster_ingress_domain&gt;</code> wildcard DNS record and serving certificate for the cluster. Otherwise, you must ensure that there is a DNS record for the chosen hostname.
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If you specify the <code>passthrough</code> value in the <code>route.openshift.io/termination</code> annotation, set <code>path</code> to <code>''</code> and <code>pathType</code> to <code>ImplementationSpecific</code> in the spec:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml">  <span class="na">spec</span><span class="pi">:</span>
    <span class="na">rules</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">www.example.com</span>
      <span class="na">http</span><span class="pi">:</span>
        <span class="na">paths</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>
          <span class="na">pathType</span><span class="pi">:</span> <span class="s">ImplementationSpecific</span>
          <span class="na">backend</span><span class="pi">:</span>
            <span class="na">service</span><span class="pi">:</span>
              <span class="na">name</span><span class="pi">:</span> <span class="s">frontend</span>
              <span class="na">port</span><span class="pi">:</span>
                <span class="na">number</span><span class="pi">:</span> <span class="s">443</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc apply <span class="nt">-f</span> ingress.yaml</code></pre>
</div>
</div>
</li>
</ol>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>route.openshift.io/destination-ca-certificate-secret</code> can be used on an Ingress object to define a route with a custom destination certificate (CA). The annotation references a kubernetes secret, <code>secret-ca-cert</code> that will be inserted into the generated route.
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To specify a route object with a destination CA from an ingress object, you must create a <code>kubernetes.io/tls</code> or <code>Opaque</code> type secret with a certificate in PEM-encoded format in the <code>data.tls.crt</code> specifier of the secret.</p>
</li>
</ol>
</div></td>
</tr>
</table>
</div>
</li>
<li>
<p>List your routes:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get routes</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result includes an autogenerated route whose name starts with <code>frontend-</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">NAME             HOST/PORT         PATH    SERVICES    PORT    TERMINATION          WILDCARD
frontend-gnztq   www.example.com           frontend    443     reencrypt/Redirect   None</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you inspect this route, it looks this:</p>
</div>
<div class="listingblock">
<div class="title">YAML Definition of an autogenerated route</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">route.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Route</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">frontend-gnztq</span>
  <span class="na">ownerReferences</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
    <span class="na">controller</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">frontend</span>
    <span class="na">uid</span><span class="pi">:</span> <span class="s">4e6c59cc-704d-4f44-b390-617d879033b6</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">www.example.com</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
  <span class="na">port</span><span class="pi">:</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="s">https</span>
  <span class="na">tls</span><span class="pi">:</span>
    <span class="na">certificate</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">-----BEGIN CERTIFICATE-----</span>
      <span class="s">[...]</span>
      <span class="s">-----END CERTIFICATE-----</span>
    <span class="na">insecureEdgeTerminationPolicy</span><span class="pi">:</span> <span class="s">Redirect</span>
    <span class="na">key</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">-----BEGIN RSA PRIVATE KEY-----</span>
      <span class="s">[...]</span>
      <span class="s">-----END RSA PRIVATE KEY-----</span>
    <span class="na">termination</span><span class="pi">:</span> <span class="s">reencrypt</span>
    <span class="na">destinationCACertificate</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">-----BEGIN CERTIFICATE-----</span>
      <span class="s">[...]</span>
      <span class="s">-----END CERTIFICATE-----</span>
  <span class="na">to</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">frontend</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nw-ingress-edge-route-default-certificate_microshift-configuring-routes"><a class="anchor" href="#nw-ingress-edge-route-default-certificate_microshift-configuring-routes"></a>Creating a route using the default certificate through an Ingress object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you create an Ingress object without specifying any TLS configuration, Red Hat build of MicroShift generates an insecure route. To create an Ingress object that generates a secure, edge-terminated route using the default ingress certificate, you can specify an empty TLS configuration as follows.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have a service that you want to expose.</p>
</li>
<li>
<p>You have access to the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a YAML file for the Ingress object.  In this example, the file is called <code>example-ingress.yaml</code>:</p>
<div class="listingblock">
<div class="title">YAML definition of an Ingress object</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">frontend</span>
  <span class="s">...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
    <span class="s">...</span>
  <span class="na">tls</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="pi">{}</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use this exact syntax to specify TLS without specifying a custom certificate.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create the Ingress object by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create <span class="nt">-f</span> example-ingress.yaml</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Verify that Red Hat build of MicroShift has created the expected route for the Ingress object by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get routes <span class="nt">-o</span> yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">items</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">route.openshift.io/v1</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">Route</span>
  <span class="na">metadata</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">frontend-j9sdd</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="s">...</span>
  <span class="na">spec</span><span class="pi">:</span>
  <span class="s">...</span>
    <span class="s">tls</span><span class="pi">:</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="na">insecureEdgeTerminationPolicy</span><span class="pi">:</span> <span class="s">Redirect</span>
      <span class="na">termination</span><span class="pi">:</span> <span class="s">edge</span> <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="s">...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the route includes the name of the Ingress object followed by a random suffix.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>In order to use the default certificate, the route should not specify <code>spec.certificate</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The route should specify the <code>edge</code> termination policy.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nw-ingress-re-encrypt-route-custom-cert_microshift-configuring-routes"><a class="anchor" href="#nw-ingress-re-encrypt-route-custom-cert_microshift-configuring-routes"></a>Creating a route using the destination CA certificate in the Ingress annotation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>route.openshift.io/destination-ca-certificate-secret</code> annotation can be used on an Ingress object to define a route with a custom destination CA certificate.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You may have a certificate/key pair in PEM-encoded files, where the certificate is valid for the route host.</p>
</li>
<li>
<p>You may have a separate CA certificate in a PEM-encoded file that completes the certificate chain.</p>
</li>
<li>
<p>You must have a separate destination CA certificate in a PEM-encoded file.</p>
</li>
<li>
<p>You must have a service that you want to expose.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a secret for the destination CA certificate by entering the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create secret generic dest-ca-cert <span class="nt">--from-file</span><span class="o">=</span>tls.crt<span class="o">=</span>&lt;file_path&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> test-ns create secret generic dest-ca-cert <span class="nt">--from-file</span><span class="o">=</span>tls.crt<span class="o">=</span>tls.crt</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">secret/dest-ca-cert created</span></code></pre>
</div>
</div>
</li>
<li>
<p>Add the <code>route.openshift.io/destination-ca-certificate-secret</code> to the Ingress annotations:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">frontend</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">route.openshift.io/termination</span><span class="pi">:</span> <span class="s2">"</span><span class="s">reencrypt"</span>
    <span class="s">route.openshift.io/destination-ca-certificate-secret</span><span class="pi">:</span> <span class="s">secret-ca-cert</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="nn">...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The annotation references a kubernetes secret.</td>
</tr>
</table>
</div>
</li>
<li>
<p>The secret referenced in this annotation will be inserted into the generated route.</p>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">route.openshift.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Route</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">frontend</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">route.openshift.io/termination</span><span class="pi">:</span> <span class="s">reencrypt</span>
    <span class="s">route.openshift.io/destination-ca-certificate-secret</span><span class="pi">:</span> <span class="s">secret-ca-cert</span>
<span class="na">spec</span><span class="pi">:</span>
<span class="nn">...</span>
  <span class="na">tls</span><span class="pi">:</span>
    <span class="na">insecureEdgeTerminationPolicy</span><span class="pi">:</span> <span class="s">Redirect</span>
    <span class="na">termination</span><span class="pi">:</span> <span class="s">reencrypt</span>
    <span class="na">destinationCACertificate</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">-----BEGIN CERTIFICATE-----</span>
      <span class="s">[...]</span>
      <span class="s">-----END CERTIFICATE-----</span>
<span class="s">...</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="microshift-secured-routes_microshift-configuring-routes"><a class="anchor" href="#microshift-secured-routes_microshift-configuring-routes"></a>Secured routes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Secure routes provide the ability to use several types of TLS termination to serve certificates to the client. The following links to the OpenShift Container Platform documentation describe how to create re-encrypt, edge, and passthrough routes with custom certificates.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html/networking/configuring-routes#nw-ingress-creating-a-reencrypt-route-with-a-custom-certificate_secured-routes">Creating a re-encrypt route with a custom certificate</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.15/html/networking/configuring-routes#nw-ingress-creating-an-edge-route-with-a-custom-certificate_secured-routes">Creating an edge route with a custom certificate</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.15/html/networking/configuring-routes#nw-ingress-creating-a-passthrough-route_secured-routes">Creating a passthrough route</a></p>
</li>
</ul>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/nav-tertiary.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/reformat-html.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/hc-search.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/clipboard.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/collapsible.js" type="text/javascript"></script>
  <script>
  var dk = 'microshift';
  var version = 'Branch Build';

  var distros = {
    'openshift-origin': ['docs_origin', version],
    // specific labels are used for OSD instead of the URL filter, due to its unusual URL structure; assume v4
    'openshift-dedicated': ['docs_dedicated_v4'],
    'openshift-online': ['docs_online', version],
    'openshift-enterprise': ['docs_cp', version],
    'openshift-telco': ['docs_telco', version],
    'openshift-aro' : ['docs_aro', version],
    'openshift-rosa' : ['docs_rosa'],
    'openshift-acs' : ['docs_acs', version],
    'openshift-serverless' : ['docs_serverless', version],
    'openshift-pipelines' : ['docs_pipelines', version],
    'openshift-builds' : ['docs_builds', version],
    'openshift-gitops' : ['docs_gitops', version],
    'openshift-lightspeed' : ['docs_lightspeed', version],
    'openshift-service-mesh' : ['docs_service_mesh', version]
  };

  // only OSD v3 docs have the version variable specified
  if (dk == "openshift-dedicated" && version == "3") {
    distros['openshift-dedicated'] = ['docs_dedicated_v3']
  }

  distros[dk] ? hcSearchCategory.apply(null, distros[dk]) : hcSearchCategory("docs");
  </script>
  <script type="text/javascript">
  /*<![CDATA[*/
  $(document).ready(function() {
    $("[id^='topicGroup']").on('show.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicGroup']").on('hide.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });

    const collapsibleContent = document.getElementsByTagName("details");
    for (var i = 0; i < collapsibleContent.length; i++) {
      collapsibleContent[i].setAttribute("open", "");
    }

  });
  /*]]>*/
  </script>

  <footer id="rh">

    <div class="container">
        <div class="row">

            <div class="col-sm-2">
                <img src="https://assets.openshift.net/content/img/Logo-Red_Hat-OpenShift-A-Reverse-RGB.svg" class="img-fluid" alt="Red Hat" style="height: 30px;">
            </div>

            <div class="col-sm-3">
              <p class="text-nowrap">Copyright  2025 Red Hat, Inc.</p>
            </div>



            <div class="col">
                <nav class="nav">
                    <a target="_blank" href="https://www.redhat.com/en/about/privacy-policy" class="nav-link">Privacy statement</a>
                    <a target="_blank" href="https://www.openshift.com/legal/terms/" class="nav-link">Terms of use</a>
                    <a target="_blank" href="https://www.redhat.com/en/about/all-policies-guidelines" class="nav-link">All policies and guidelines</a>
                    <a id="teconsent"></a>
                </nav>
            </div>
        </div>
    </div>
</footer>
<div id="consent_blackbar" style="z-index: 100; position: fixed"></div>



<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->

  <!-- adjust page css based on breadcrumb and/or resize -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      }
    });

    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      } else if ($(window).width() < 1008) {
        sidebar.classList.remove('wide');
        document.querySelector('#hc-search').classList.remove('wide');
        if (sidebar.classList.contains('open')) {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }
        document.querySelector('.main').style.paddingTop = '0px';
      }
    });

    function adjustSide() {
      sidebar.classList.add('wide');
      document.querySelector('#hc-search').classList.add('wide');
      sidebar.style.display = 'block';
      document.querySelector('.sidebar').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 125), 10) + "px";
      document.querySelector('#hc-search').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 95), 10) + "px";
    }

    function adjustToc() {
      if (document.querySelector('#toc') !== null) {
        document.querySelector('#toc').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      }
    }

    function adjustMain() {
      document.querySelector('html').style.scrollPaddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      document.querySelector('.main').style.paddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight - 70), 10) + "px";
    }

  </script>

  <!-- remove toc active class when page is loaded -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      var tocItems = $("#toc a");

      for (let i = 0; i < tocItems.length; i++) {
        tocItems[i].classList.remove("toc-active");
      }
    })
  </script>

  <!-- maintain sidebar scroll position between page loads -->
  <script type="text/javascript">
    let sidebar = document.querySelector(".sidebar");
    let scrolltop = localStorage.getItem("sidebar-scroll");

    if (scrolltop == null) {
      sidebar.scrollTop = parseInt(top, 10);
    }

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
    });

    window.addEventListener('load', () => {
      sidebar.scrollTo(0, scrolltop)
    })
  </script>

  <!-- open/close the nav -->
  <script type="text/javascript">
    function closeNav() {
      let sidebar = document.querySelector(".sidebar");
      sidebar.style.display = "none";
      sidebar.classList.remove('open');
    }

    function openNav() {
      let sidebar = document.querySelector(".sidebar");
      let hc_search = document.querySelector('#hc-search');
      sidebar.style.display = "block";
      sidebar.style.top = "0px";
      hc_search.style.top = 'unset';
      sidebar.classList.add('open');
    }
  </script>

  <!-- clear and add toc-active to clicked toc link -->
  <script type="text/javascript">
  $("#toc a").click(function() {
    var tocItems = $("#toc a");
    for (let i = 0; i < tocItems.length; i++) {
      tocItems[i].classList.remove("toc-active");
    }
    this.classList.add("toc-active");
  });
  </script>

  <!-- update active toc class when mouse scrolls -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener("wheel", () => {

        const ioConfiguration = {
          "rootMargin": "-120px 0px -400px 0px",
          "threshold": 0
        };

        const observer = new IntersectionObserver(setCurrent, ioConfiguration, entries => {
          entries.forEach(entry => {
            var id = entry.target.getAttribute('id');
            //fight with js
            document.querySelector(`#toc li a[href="#${id}"]`).classList.remove('toc-active');
          });
        });

        //track all h1-4 headings that have an id
        document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
          observer.observe(h);
        });

        //runs when the IntersectionObserver fires
        function setCurrent(e) {
          var allTocLinks = document.querySelectorAll("#toc li a");
          if (allTocLinks !== undefined) {
            e.map(i => {
              if (i.isIntersecting && i.intersectionRatio >= 1) {
                allTocLinks.forEach(link => link.classList.remove("toc-active"));
                document.querySelector(`#toc li a[href="#${i.target.id}"]`).classList.add('toc-active')
              }
            })
          }
        };

        //make clicked toc item active and stop IntersectionObserver
        $("#toc a").click(function() {
          //stop tracking all h1-4 headings that have an id
          document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
            observer.unobserve(h);
          });
          var tocItems = $("#toc a");
          if (tocItems !== undefined) {
            for (let i = 0; i < tocItems.length; i++) {
              tocItems[i].classList.remove("toc-active");
            };
            this.classList.add("toc-active");
          }
        })
      })
    })
  </script>

  <!--handle page scroll top and bottom, add toc-active -->
  <script type="text/javascript">
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active")
          };
          tocItems[tocItems.length - 1].classList.add("toc-active");
        };
      //scroll to top
      if(window.pageYOffset === 0) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active");
          };
          tocItems[0].classList.add("toc-active");
        };
      })
  </script>

  <!-- adjust alerts on mobile -->
  <script type="text/javascript">
    alert = document.querySelector('#support-alert')
    window.addEventListener("wheel", () => {
      if ($(window).width() < 1008) {
        //adjust alert
        if(window.pageYOffset > 0) {
          if(alert !== null) {
            document.querySelector('#support-alert').style.position = "fixed";
            document.querySelector('#support-alert').style.bottom = "0px";
            document.querySelector('#support-alert').style.margin = "5px";
            document.querySelector('#support-alert').style.zIndex = "9999999";
          }
        }
      }
   });
    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        if(alert !== null) {
          document.querySelector('#support-alert').style.removeProperty('position');
          document.querySelector('#support-alert').style.removeProperty('bottom');
          document.querySelector('#support-alert').style.removeProperty('margin');
          document.querySelector('#support-alert').style.removeProperty('zIndex');
        }
      }
    })
  </script>

  <!-- hide footer after 3 seconds -->
  <script type="text/javascript">
    const hideFooter = () => {
      document.querySelector('footer#rh, footer.footer-origin-docs').style.display = "none";
    };

    window.addEventListener('load', function() {
      setTimeout(hideFooter, 3000);
    });
  </script>
</body>
</html>
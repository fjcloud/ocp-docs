

<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  
  
  <title>Creating custom catalogs with oc-mirror - Operators | Running applications | Red Hat build of MicroShift Branch Build</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css"/>
  <link href="https://docs.okd.io/latest/_stylesheets/search.css" rel="stylesheet" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/autumn.css" rel="stylesheet"  media="screen"/>
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png"/>
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css"/>
  <link href="https://assets.openshift.net/content/osh-nav-footer.css" rel="stylesheet" type="text/css" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/docs.css" rel="stylesheet"  media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/>
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">

  <!-- Adobe DTM -->
  <script src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <!-- End Adobe DTM -->

  <script id="trustarc" src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
        rel="stylesheet">

</head>

<body onload="selectVersion('Branch Build');">
  
<nav id="main">
  <div class="container">
    <div class="row">
      <div class="navbar navbar-default navbar-openshift" role="navigation">
        <div class="navbar-header">
            <a href="#nav-main" class="dropdown-toggle navbar-menu-toggle hidden visible-xs" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          <a class="navbar-brand" href="/"></a>
        </div>
        <div id="nav-main" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="products" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                Products <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-column flex-md-row">
                  <div class="col-xs-12 col-sm-3">
                    <h3>Overview</h3>
                    <ul class="nav flex-column">
                      <li><a target="_blank" href="https://www.openshift.com/products/features/">Features</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/products/pricing/">Pricing</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-9">
                    <h3>Featured Products</h3>
                    <ul class="nav">
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/container-platform/">Red Hat OpenShift Container&nbsp;Platform</a>
                        <p class="d-none d-md-block">Build, deploy and manage your applications across cloud- and on-premise infrastructure</p>
                      </li>
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/dedicated/">Red Hat OpenShift Dedicated</a>
                        <p class="d-none d-md-block">Single-tenant, high-availability Kubernetes clusters in the public cloud</p>
                      </li>

                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/online/">Red Hat OpenShift Online</a>
                        <p class="d-none d-md-block">The fastest way for developers to build, host and scale applications in the public cloud</p>
                      </li>

                      <li class="nav-item">
                        <a target="_blank" href="https://www.openshift.com/products/">All products <span class="fa fa-angle-right"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li id="learn" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Learn <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-md-nowrap">
                  <div class="col-xs-12 col-sm-6">
                    <h3>Learn</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/what-is-openshift/">What is OpenShift</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/get-started/">Get started</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/partners/">Partners</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/success-stories/">Customer success stories</a></li>
                      <li><a target="_blank" href="https://blog.openshift.com">Blog</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/resources/">Resources</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <h3>Technology Topics</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/knative/">Knative</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/security/">Security</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/kubernetes/">Kubernetes</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/service-brokers/">Service Brokers</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Community <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://commons.openshift.org">OpenShift Commons</a></li>
                <li><a target="_blank" href="https://www.okd.io">Open Source (OKD)</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/startups/">Startups</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/grants/">Grants</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Support <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://help.openshift.com">Help Center</a></li>
                <li><a href="https://docs.openshift.com">OpenShift Docs</a></li>
              </ul>
            </li>

            <li><a target="_blank" class="nav-sign-up" href="https://www.openshift.com/trial/">Free Trial</a></li>

            <li><a target="_blank" href="https://console.redhat.com/openshift" class="nav-sign-in">Log In <span class="fa fa-angle-right"></span></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

  
  <div class="container">
    <button id="hc-open-btn" class="open-btn-sm" onclick="openNav()" aria-label="Open"><span class="fa fa-bars" /></button>
    <ol class="breadcrumb hide-for-print">
      
      <span>
        <div class="alert alert-info" role="primary" id="support-info">
          <strong>Starting on March 12, 2025, OpenShift docs will only be available at <a href="https://docs.redhat.com/en/" style="color: #0C5460 !important" class="link-primary">docs.redhat.com</a>. From that time on, docs.openshift.com links will automatically redirect to their locations on docs.redhat.com.
          </strong>
        </div>
      </span>
      

      

      

      

      

      

      

      
      

      

      


      

      


      

      

      <li class="sitename">
        <a href="/">
          Documentation</a>
      </li>
      <li class="hidden-xs active">
        
          <a href="../../microshift_welcome/index.html">Red Hat build of MicroShift Branch Build</a>
        
      </li>
      <li class="hidden-xs active">
        <a href="../../microshift_running_apps/microshift-applications.html">Running applications</a>
      </li>
      <li class="hidden-xs active"><a href="../../microshift_running_apps/microshift_operators/microshift-operators.html">Operators</a></li>
      
      <li class="hidden-xs active">
        Creating custom catalogs with oc-mirror
      </li>
      
      <span text-align="right" style="float: right !important">
        <a href="https://github.com/openshift/openshift-docs/commits/main/microshift_running_apps/microshift_operators/microshift-operators-oc-mirror.adoc"><span class="material-icons-outlined" title="Page history">history</span></a>
        
        <a href="https://issues.redhat.com/secure/CreateIssueDetails!init.jspa?pid=12332330&issuetype=1&components=12367614&priority=4&summary=[microshift-Branch Build]+Issue+in+file+microshift_running_apps/microshift_operators/microshift-operators-oc-mirror.adoc">
          <span class="material-icons-outlined" title="Open an issue">bug_report</span>
        </a>
        <a href="javascript: void(0);" onclick="window.print()"><span class="material-icons-outlined" title="Print page (Save as PDF)">picture_as_pdf</span></a>
        
        
      </span>
      
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas hide-for-print">
        <div class="row-fluid">
          <div id="btn-close">
            <button id="hc-close-btn" onclick="closeNav()" class="close-btn-sm" aria-label="close"><span class="fa fa-times" /></button>
          </div>
          <div id="hc-search">
            <input id="hc-search-input" type="text" aria-label="search">
            <button id="hc-search-btn" aria-label="search"><span class="fa fa-search" /></button>
          </div>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0"><span id="tgSpan0" class="fa fa-angle-right"></span>Understanding MicroShift</a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_welcome/index.html">Understanding Red Hat build of MicroShift</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1"><span id="tgSpan1" class="fa fa-angle-right"></span>Red Hat build of MicroShift release notes</a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_release_notes/microshift-4-19-release-notes.html">Red Hat build of MicroShift 4.19 release notes</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2"><span id="tgSpan2" class="fa fa-angle-right"></span>Getting ready to install MicroShift</a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_install_get_ready/microshift-install-get-ready.html">Getting ready to install MicroShift</a></li>
            <li><a class="" href="../../microshift_install_get_ready/microshift-fips.html">Using FIPS mode</a></li>
            <li><a class="" href="../../microshift_install_get_ready/microshift-greenboot.html">Understanding system health checks</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3"><span id="tgSpan3" class="fa fa-angle-right"></span>Installing with an RPM package</a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_install_rpm/microshift-install-rpm.html">Installing with an RPM package</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4"><span id="tgSpan4" class="fa fa-angle-right"></span>Installing optional RPM packages</a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_install_rpm_opt/microshift-install-optional-rpms.html">Installing optional RPM packages</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5"><span id="tgSpan5" class="fa fa-angle-right"></span>Embedding in a RHEL for Edge image</a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_install_rpm_ostree/microshift-embed-in-rpm-ostree.html">Embedding in a RHEL for Edge image using image builder</a></li>
            <li><a class="" href="../../microshift_install_rpm_ostree/microshift-deploy-with-mirror-registry.html">Mirroring container images for disconnected installations</a></li>
            <li><a class="" href="../../microshift_install_rpm_ostree/microshift-embed-in-rpm-ostree-offline-use.html">Embedding in a RHEL for Edge image for offline use</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6"><span id="tgSpan6" class="fa fa-angle-right"></span>Installing with RHEL image mode</a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_install_bootc/microshift-about-rhel-image-mode.html">Understanding image mode for RHEL</a></li>
            <li><a class="" href="../../microshift_install_bootc/microshift-install-bootc-image.html">Installing a bootc image</a></li>
            <li><a class="" href="../../microshift_install_bootc/microshift-install-running-bootc-image-vm.html">Running the bootc image</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup7"><span id="tgSpan7" class="fa fa-angle-right"></span>Using RHEL Kickstarts</a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_install_kickstarts/microshift-rhel-kickstarts.html">Using a Kickstart file for automating installation</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup8"><span id="tgSpan8" class="fa fa-angle-right"></span>Updating</a>
      <ul id="topicGroup8" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_updating/microshift-update-options.html">Update options</a></li>
            <li><a class="" href="../../microshift_updating/microshift-update-rpms-ostree.html">Updates with rpm-ostree systems</a></li>
            <li><a class="" href="../../microshift_updating/microshift-update-rpms-manually.html">Manual updates with RPMs</a></li>
            <li><a class="" href="../../microshift_updating/microshift-list-update-contents.html">Listing update package contents</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup9"><span id="tgSpan9" class="fa fa-angle-right"></span>Support</a>
      <ul id="topicGroup9" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_support/microshift-etcd.html">The etcd service</a></li>
            <li><a class="" href="../../microshift_support/microshift-sos-report.html">The sos report tool</a></li>
            <li><a class="" href="../../microshift_support/microshift-getting-cluster-id.html">Getting your cluster ID</a></li>
            <li><a class="" href="../../microshift_support/microshift-getting-support.html">Getting support</a></li>
            <li><a class="" href="../../microshift_support/microshift-remote-cluster-monitoring.html">Remote health monitoring with a connected cluster</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup10"><span id="tgSpan10" class="fa fa-angle-right"></span>Configuring</a>
      <ul id="topicGroup10" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_configuring/microshift-using-config-yaml.html">Using the MicroShift configuration file</a></li>
            <li><a class="" href="../../microshift_configuring/microshift-nw-ipv6-config.html">Configuring IPv6 networking</a></li>
            <li><a class="" href="../../microshift_configuring/microshift-ingress-controller.html">Using ingress control for a MicroShift cluster</a></li>
            <li><a class="" href="../../microshift_configuring/microshift-disable-lvms-csi-provider-csi-snapshot.html">Disabling LVMS CSI provider and CSI snapshot</a></li>
            <li><a class="" href="../../microshift_configuring/microshift-greenboot-checking-status.html">Checking the status of Greenboot health checks</a></li>
            <li><a class="" href="../../microshift_configuring/microshift-cluster-access-kubeconfig.html">Cluster access with kubeconfig</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-6"><span id="sgSpan-10-6" class="fa fa-caret-right"></span>&nbsp;Configuring MicroShift authentication and security</a>
              <ul id="topicSubGroup-10-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_configuring/microshift_auth_security/microshift-custom-ca.html">Using custom certificate authorities</a></li>
                  <li><a class="" href="../../microshift_configuring/microshift_auth_security/microshift-tls-config.html">Configuring TLS security profiles</a></li>
                  <li><a class="" href="../../microshift_configuring/microshift_auth_security/microshift-audit-logs-config.html">Configuring audit logging policies</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-7"><span id="sgSpan-10-7" class="fa fa-caret-right"></span>&nbsp;Configuring low latency</a>
              <ul id="topicSubGroup-10-7" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_configuring/microshift_low_latency/microshift-low-latency.html">Configuring low latency</a></li>
                  <li><a class="" href="../../microshift_configuring/microshift_low_latency/microshift-workload-partitioning.html">Workload partitioning</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup11"><span id="tgSpan11" class="fa fa-angle-right"></span>Networking</a>
      <ul id="topicGroup11" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_networking/microshift-cni.html">About the networking plugin</a></li>
            <li><a class="" href="../../microshift_networking/microshift-networking-settings.html">Using networking settings</a></li>
            <li><a class="" href="../../microshift_networking/microshift-nw-router.html">Configuring the router</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-11-3"><span id="sgSpan-11-3" class="fa fa-caret-right"></span>&nbsp;Network policies</a>
              <ul id="topicSubGroup-11-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_networking/microshift_network_policy/microshift-network-policy-index.html">About network policies</a></li>
                  <li><a class="" href="../../microshift_networking/microshift_network_policy/microshift-creating-network-policy.html">Creating network policies</a></li>
                  <li><a class="" href="../../microshift_networking/microshift_network_policy/microshift-editing-network-policy.html">Editing network policies</a></li>
                  <li><a class="" href="../../microshift_networking/microshift_network_policy/microshift-deleting-network-policy.html">Deleting network policies</a></li>
                  <li><a class="" href="../../microshift_networking/microshift_network_policy/microshift-viewing-network-policy.html">Viewing network policies</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-11-4"><span id="sgSpan-11-4" class="fa fa-caret-right"></span>&nbsp;Multiple networks</a>
              <ul id="topicSubGroup-11-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_networking/microshift_multiple_networks/microshift-cni-multus.html">About using multiple networks</a></li>
                  <li><a class="" href="../../microshift_networking/microshift_multiple_networks/microshift-cni-multus-using.html">Configuring and using multiple networks</a></li>              </ul>
            </li>
            <li><a class="" href="../../microshift_networking/microshift-configuring-routes.html">Configuring routes</a></li>
            <li><a class="" href="../../microshift_networking/microshift-firewall.html">Firewall configuration</a></li>
            <li><a class="" href="../../microshift_networking/microshift-disconnected-network-config.html">Networking settings for fully disconnected hosts</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup12"><span id="tgSpan12" class="fa fa-angle-right"></span>Storage</a>
      <ul id="topicGroup12" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_storage/index.html">About storage</a></li>
            <li><a class="" href="../../microshift_storage/understanding-ephemeral-storage-microshift.html">Understanding ephemeral storage</a></li>
            <li><a class="" href="../../microshift_storage/generic-ephemeral-volumes-microshift.html">Generic ephemeral volumes</a></li>
            <li><a class="" href="../../microshift_storage/understanding-persistent-storage-microshift.html">Understanding persistent storage</a></li>
            <li><a class="" href="../../microshift_storage/expanding-persistent-volumes-microshift.html">Expanding persistent volumes</a></li>
            <li><a class="" href="../../microshift_storage/microshift-storage-plugin-overview.html">Dynamic storage using the LVMS plugin</a></li>
            <li><a class="" href="../../microshift_storage/volume-snapshots-microshift.html">Working with volume snapshots</a></li>
            <li><a class="" href="../../microshift_storage/microshift-storage-migration.html">Understanding storage migration</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup13"><span id="tgSpan13" class="fa fa-angle-down"></span>Running applications</a>
      <ul id="topicGroup13" class="collapse in list-unstyled">
            <li><a class="" href="../../microshift_running_apps/microshift-applications.html">Using Kustomize to deploy applications</a></li>
            <li><a class="" href="../../microshift_running_apps/microshift-deleting-resource-manifests.html">Deleting or updating Kustomize manifest resources</a></li>
            <li><a class="" href="../../microshift_running_apps/microshift-embedded-apps-on-rhel-edge.html">Embedding applications on RHEL for Edge</a></li>
            <li><a class="" href="../../microshift_running_apps/microshift-embed-apps-offline-use.html">Embedding applications for offline use</a></li>
            <li><a class="" href="../../microshift_running_apps/microshift-embedding-apps-tutorial.html">Embedding applications tutorial</a></li>
            <li><a class="" href="../../microshift_running_apps/microshift-greenboot-workload-scripts.html">Creating application or workload health check scripts</a></li>
            <li><a class="" href="../../microshift_running_apps/microshift-gitops.html">Automating application management with GitOps</a></li>
            <li><a class="" href="../../microshift_running_apps/microshift-authentication.html">Pod security authentication and authorization</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-13-8"><span id="sgSpan-13-8" class="fa fa-caret-down"></span>&nbsp;Operators</a>
              <ul id="topicSubGroup-13-8" class="nav-tertiary list-unstyled collapse in">

                  <li><a class="" href="../../microshift_running_apps/microshift_operators/microshift-operators.html">Using Operators</a></li>
                  <li><a class="" href="../../microshift_running_apps/microshift_operators/microshift-operators-olm.html">Using Operator Lifecycle Manager</a></li>
                  <li><a class=" active" href="../../microshift_running_apps/microshift_operators/microshift-operators-oc-mirror.html">Creating custom catalogs with oc-mirror</a></li>
                  <li><a class="" href="../../microshift_running_apps/microshift_operators/microshift-operators-oc-mirror-disconnected.html">Adding OLM-based Operators to a disconnected cluster</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup14"><span id="tgSpan14" class="fa fa-angle-right"></span>Backup and restore</a>
      <ul id="topicGroup14" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_backup_and_restore/microshift-backup-and-restore.html">Backing up and restoring data</a></li>
            <li><a class="" href="../../microshift_backup_and_restore/microshift-auto-recover-manual-backup.html">Automated recovery from manual backups</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup15"><span id="tgSpan15" class="fa fa-angle-right"></span>Troubleshooting</a>
      <ul id="topicGroup15" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_troubleshooting/microshift-version.html">Check your version</a></li>
            <li><a class="" href="../../microshift_troubleshooting/microshift-troubleshoot-cluster.html">Troubleshoot the cluster</a></li>
            <li><a class="" href="../../microshift_troubleshooting/microshift-installing-troubleshooting.html">Troubleshoot installation issues</a></li>
            <li><a class="" href="../../microshift_troubleshooting/microshift-troubleshoot-backup-restore.html">Troubleshoot backup and restore</a></li>
            <li><a class="" href="../../microshift_troubleshooting/microshift-troubleshoot-updates.html">Troubleshoot updates</a></li>
            <li><a class="" href="../../microshift_troubleshooting/microshift-audit-logs.html">Check the audit logs</a></li>
            <li><a class="" href="../../microshift_troubleshooting/microshift-etcd-troubleshoot.html">Troubleshoot etcd</a></li>
            <li><a class="" href="../../microshift_troubleshooting/microshift-things-to-know.html">Additional information</a></li>
            <li><a class="" href="../../microshift_troubleshooting/microshift-cleanup-data.html">Data cleanup</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup16"><span id="tgSpan16" class="fa fa-angle-right"></span>CLI tools</a>
      <ul id="topicGroup16" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_cli_ref/microshift-cli-tools-introduction.html">CLI tools introduction</a></li>
            <li><a class="" href="../../microshift_cli_ref/microshift-oc-cli-install.html">Installing the OpenShift CLI</a></li>
            <li><a class="" href="../../microshift_cli_ref/microshift-oc-config.html">Configuring the OpenShift CLI</a></li>
            <li><a class="" href="../../microshift_cli_ref/microshift-cli-using-oc.html">Using the OpenShift CLI</a></li>
            <li><a class="" href="../../microshift_cli_ref/microshift-usage-oc-kubectl.html">Using oc and kubectl</a></li>
            <li><a class="" href="../../microshift_cli_ref/microshift-oc-cli-commands-list.html">List of oc CLI commands</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup17"><span id="tgSpan17" class="fa fa-angle-right"></span>API reference</a>
      <ul id="topicGroup17" class="collapse  list-unstyled">
            <li><a class="" href="../../microshift_rest_api/understanding-api-support-tiers.html">Understanding API tiers</a></li>
            <li><a class="" href="../../microshift_rest_api/understanding-compatibility-guidelines.html">API compatibility guidelines</a></li>
            <li><a class="" href="../../microshift_rest_api/index.html">API index</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-3"><span id="sgSpan-17-3" class="fa fa-caret-right"></span>&nbsp;API object reference</a>
              <ul id="topicSubGroup-17-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/objects/index.html">API objects reference</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-4"><span id="sgSpan-17-4" class="fa fa-caret-right"></span>&nbsp;Extension APIs</a>
              <ul id="topicSubGroup-17-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/api_extensions_apis/api-extensions-apis-index.html">Extension APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/api_extensions_apis/customresourcedefinition-apiextensions-k8s-io-v1.html">CustomResourceDefinition [apiextensions.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-5"><span id="sgSpan-17-5" class="fa fa-caret-right"></span>&nbsp;Registration APIs</a>
              <ul id="topicSubGroup-17-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/api_registration_apis/api-registration-apis-index.html">Registration APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/api_registration_apis/apiservice-apiregistration-k8s-io-v1.html">APIService [apiregistration.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-6"><span id="sgSpan-17-6" class="fa fa-caret-right"></span>&nbsp;Apps APIs</a>
              <ul id="topicSubGroup-17-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/apps_apis/apps-apis-index.html">Apps APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/apps_apis/controllerrevision-apps-v1.html">ControllerRevision [apps/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/apps_apis/daemonset-apps-v1.html">DaemonSet [apps/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/apps_apis/deployment-apps-v1.html">Deployment [apps/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/apps_apis/replicaset-apps-v1.html">ReplicaSet [apps/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/apps_apis/statefulset-apps-v1.html">StatefulSet [apps/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-7"><span id="sgSpan-17-7" class="fa fa-caret-right"></span>&nbsp;Authentication APIs</a>
              <ul id="topicSubGroup-17-7" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/authentication_apis/authentication-apis-index.html">Authentication APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/authentication_apis/tokenrequest-authentication-k8s-io-v1.html">TokenRequest [authentication.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/authentication_apis/tokenreview-authentication-k8s-io-v1.html">TokenReview [authentication.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-8"><span id="sgSpan-17-8" class="fa fa-caret-right"></span>&nbsp;Authorization APIs</a>
              <ul id="topicSubGroup-17-8" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/authorization_apis/authorization-apis-index.html">Authorization APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/authorization_apis/localsubjectaccessreview-authorization-k8s-io-v1.html">LocalSubjectAccessReview [authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/authorization_apis/selfsubjectaccessreview-authorization-k8s-io-v1.html">SelfSubjectAccessReview [authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/authorization_apis/selfsubjectrulesreview-authorization-k8s-io-v1.html">SelfSubjectRulesReview [authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/authorization_apis/subjectaccessreview-authorization-k8s-io-v1.html">SubjectAccessReview [authorization.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-9"><span id="sgSpan-17-9" class="fa fa-caret-right"></span>&nbsp;Autoscaling APIs</a>
              <ul id="topicSubGroup-17-9" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/autoscaling_apis/autoscaling-apis-index.html">Autoscaling APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/autoscaling_apis/horizontalpodautoscaler-autoscaling-v2.html">HorizontalPodAutoscaler [autoscaling/v2]</a></li>
                  <li><a class="" href="../../microshift_rest_api/autoscaling_apis/scale-autoscaling-v1.html">Scale [autoscaling/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-10"><span id="sgSpan-17-10" class="fa fa-caret-right"></span>&nbsp;Batch APIs</a>
              <ul id="topicSubGroup-17-10" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/batch_apis/batch-apis-index.html">Batch APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/batch_apis/cronjob-batch-v1.html">CronJob [batch/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/batch_apis/job-batch-v1.html">Job [batch/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-11"><span id="sgSpan-17-11" class="fa fa-caret-right"></span>&nbsp;Certificates APIs</a>
              <ul id="topicSubGroup-17-11" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/certificates_apis/certificates-apis-index.html">Certificates APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/certificates_apis/certificatesigningrequest-certificates-k8s-io-v1.html">CertificateSigningRequest [certificates.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-12"><span id="sgSpan-17-12" class="fa fa-caret-right"></span>&nbsp;Coordination APIs</a>
              <ul id="topicSubGroup-17-12" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/coordination_apis/coordination-apis-index.html">Coordination APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/coordination_apis/lease-coordination-k8s-io-v1.html">Lease [coordination.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-13"><span id="sgSpan-17-13" class="fa fa-caret-right"></span>&nbsp;Core APIs</a>
              <ul id="topicSubGroup-17-13" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/core_apis/core-apis-index.html">Core APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/binding-v1.html">Binding [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/componentstatus-v1.html">ComponentStatus [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/configmap-v1.html">ConfigMap [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/endpoints-v1.html">Endpoints [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/event-v1.html">Event [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/limitrange-v1.html">LimitRange [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/namespace-v1.html">Namespace [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/node-v1.html">Node [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/persistentvolume-v1.html">PersistentVolume [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/persistentvolumeclaim-v1.html">PersistentVolumeClaim [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/pod-v1.html">Pod [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/podtemplate-v1.html">PodTemplate [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/replicationcontroller-v1.html">ReplicationController [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/resourcequota-v1.html">ResourceQuota [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/secret-v1.html">Secret [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/service-v1.html">Service [v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/core_apis/serviceaccount-v1.html">ServiceAccount [v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-14"><span id="sgSpan-17-14" class="fa fa-caret-right"></span>&nbsp;Discovery APIs</a>
              <ul id="topicSubGroup-17-14" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/discovery_apis/discovery-apis-index.html">Discovery APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/discovery_apis/endpointslice-discovery-k8s-io-v1.html">EndpointSlice [discovery.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-15"><span id="sgSpan-17-15" class="fa fa-caret-right"></span>&nbsp;Events APIs</a>
              <ul id="topicSubGroup-17-15" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/events_apis/events-apis-index.html">Events APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/events_apis/event-events-k8s-io-v1.html">Event [events.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-16"><span id="sgSpan-17-16" class="fa fa-caret-right"></span>&nbsp;Flow Control APIs</a>
              <ul id="topicSubGroup-17-16" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/flow_control_apis/flow-control-apis-index.html">Flow Control APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/flow_control_apis/flowschema-flowcontrol-apiserver-k8s-io-v1beta3.html">FlowSchema [flowcontrol.apiserver.k8s.io/v1beta3]</a></li>
                  <li><a class="" href="../../microshift_rest_api/flow_control_apis/prioritylevelconfiguration-flowcontrol-apiserver-k8s-io-v1beta3.html">PriorityLevelConfiguration [flowcontrol.apiserver.k8s.io/v1beta3]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-17"><span id="sgSpan-17-17" class="fa fa-caret-right"></span>&nbsp;Networking APIs</a>
              <ul id="topicSubGroup-17-17" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/networking_apis/networking-apis-index.html">Networking APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/networking_apis/ingress-networking-k8s-io-v1.html">Ingress [networking.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/networking_apis/ingressclass-networking-k8s-io-v1.html">IngressClass [networking.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/networking_apis/networkpolicy-networking-k8s-io-v1.html">NetworkPolicy [networking.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-18"><span id="sgSpan-17-18" class="fa fa-caret-right"></span>&nbsp;Node APIs</a>
              <ul id="topicSubGroup-17-18" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/node_apis/node-apis-index.html">Node APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/node_apis/runtimeclass-node-k8s-io-v1.html">RuntimeClass [node.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-19"><span id="sgSpan-17-19" class="fa fa-caret-right"></span>&nbsp;Policy APIs</a>
              <ul id="topicSubGroup-17-19" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/policy_apis/policy-apis-index.html">Policy APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/policy_apis/eviction-policy-v1.html">Eviction [policy/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/policy_apis/poddisruptionbudget-policy-v1.html">PodDisruptionBudget [policy/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-20"><span id="sgSpan-17-20" class="fa fa-caret-right"></span>&nbsp;RBAC APIs</a>
              <ul id="topicSubGroup-17-20" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/rbac_apis/rbac-apis-index.html">RBAC APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/rbac_apis/clusterrole-rbac-authorization-k8s-io-v1.html">ClusterRole [rbac.authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/rbac_apis/clusterrolebinding-rbac-authorization-k8s-io-v1.html">ClusterRoleBinding [rbac.authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/rbac_apis/role-rbac-authorization-k8s-io-v1.html">Role [rbac.authorization.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/rbac_apis/rolebinding-rbac-authorization-k8s-io-v1.html">RoleBinding [rbac.authorization.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-21"><span id="sgSpan-17-21" class="fa fa-caret-right"></span>&nbsp;Network APIs</a>
              <ul id="topicSubGroup-17-21" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/network_apis/network-apis-index.html">Network APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/network_apis/route-route-openshift-io-v1.html">Route [route.openshift.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-22"><span id="sgSpan-17-22" class="fa fa-caret-right"></span>&nbsp;Scheduling APIs</a>
              <ul id="topicSubGroup-17-22" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/scheduling_apis/scheduling-apis-index.html">Scheduling APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/scheduling_apis/priorityclass-scheduling-k8s-io-v1.html">PriorityClass [scheduling.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-23"><span id="sgSpan-17-23" class="fa fa-caret-right"></span>&nbsp;Security APIs</a>
              <ul id="topicSubGroup-17-23" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/security_apis/security-apis-index.html">Security APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/security_apis/securitycontextconstraints-security-openshift-io-v1.html">SecurityContextConstraints [security.openshift.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-24"><span id="sgSpan-17-24" class="fa fa-caret-right"></span>&nbsp;Security-Internal APIs</a>
              <ul id="topicSubGroup-17-24" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/security_internal_apis/security-internal-apis-index.html">Security Internal APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/security_internal_apis/rangeallocation-security-internal-openshift-io-v1.html">RangeAllocation [security.internal.openshift.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-25"><span id="sgSpan-17-25" class="fa fa-caret-right"></span>&nbsp;Snapshot APIs</a>
              <ul id="topicSubGroup-17-25" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/snapshot_apis/snapshot-apis-index.html">CSI Snapshot APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/snapshot_apis/volumesnapshot-snapshot-storage-k8s-io-v1.html">VolumeSnapshot [snapshot.storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/snapshot_apis/volumesnapshotclass-snapshot-storage-k8s-io-v1.html">VolumeSnapshotClass [snapshot.storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/snapshot_apis/volumesnapshotcontent-snapshot-storage-k8s-io-v1.html">VolumeSnapshotContent [snapshot.storage.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-26"><span id="sgSpan-17-26" class="fa fa-caret-right"></span>&nbsp;Storage APIs</a>
              <ul id="topicSubGroup-17-26" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/storage_apis/storage-apis-index.html">Storage APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/storage_apis/csidriver-storage-k8s-io-v1.html">CSIDriver [storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/storage_apis/csinode-storage-k8s-io-v1.html">CSINode [storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/storage_apis/csistoragecapacity-storage-k8s-io-v1.html">CSIStorageCapacity [storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/storage_apis/storageclass-storage-k8s-io-v1.html">StorageClass [storage.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/storage_apis/volumeattachment-storage-k8s-io-v1.html">VolumeAttachment [storage.k8s.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-27"><span id="sgSpan-17-27" class="fa fa-caret-right"></span>&nbsp;Storage Version Migration APIs</a>
              <ul id="topicSubGroup-17-27" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/storage_version_migration_apis/storage-version-migration-apis-index.html">Storage Version Migration APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/storage_version_migration_apis/storageversionmigration-migration-k8s-io-v1alpha1.html">StorageVersionMigration [migration.k8s.io/v1alpha1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-28"><span id="sgSpan-17-28" class="fa fa-caret-right"></span>&nbsp;TopoLVM APIs</a>
              <ul id="topicSubGroup-17-28" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/topolvm_apis/topolvm-apis-index.html">TopoLVM APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/topolvm_apis/logicalvolume-topolvm-io-v1.html">LogicalVolume [topolvm.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-29"><span id="sgSpan-17-29" class="fa fa-caret-right"></span>&nbsp;Webhook APIs</a>
              <ul id="topicSubGroup-17-29" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../microshift_rest_api/webhook_apis/webhook-apis-index.html">Webhook APIs</a></li>
                  <li><a class="" href="../../microshift_rest_api/webhook_apis/mutatingwebhookconfiguration-admissionregistration-k8s-io-v1.html">MutatingWebhookConfiguration [admissionregistration.k8s.io/v1]</a></li>
                  <li><a class="" href="../../microshift_rest_api/webhook_apis/validatingwebhookconfiguration-admissionregistration-k8s-io-v1.html">ValidatingWebhookConfiguration [admissionregistration.k8s.io/v1]</a></li>              </ul>
            </li>
      </ul>
    </li>
</ul>
      </div>
      <div id="hc-search-modal">
        <div id="hc-modal-content">
          <span id="hc-modal-close">&times;</span>
          <div id="hc-search-results-wrapper">
            <div id="hc-search-results"></div>
            <div id="hc-search-progress-indicator" class="text-center search-progress-indicator"><i class="fa fa-circle-o-notch fa-spin" style="font-size:42px"></i></div>
            <div class="text-center">
              <button id="hc-search-more-btn">Show more results</button>
            </div>
          </div>
        </div>
      </div>
      <div class="print-logo" style="display:none;">
        <img src="https://www.redhat.com/cms/managed-files/Logo-Red_Hat-OpenShift-A-Standard-RGB_0_0.svg" alt="print logo"/>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h1>
            Creating custom catalogs using the oc-mirror plugin
          </h1>
        </div>
        
        
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#microshift-olm-red-hat-ops-mirror_microshift-operators-oc-mirror">Using Red Hat-provided Operator catalogs and mirror registries</a></li>
<li><a href="#microshift-using-oc-mirror_microshift-operators-oc-mirror">About the oc-mirror plugin for creating a mirror registry</a>
<ul class="sectlevel2">
<li><a href="#microshift-populate-mirror-registry-connectivity_microshift-operators-oc-mirror">Connectivity considerations when populating a mirror registry</a></li>
<li><a href="#microshift-oc-mirror-list-operators-catalogs_microshift-operators-oc-mirror">Inspecting catalog contents by using the oc-mirror plugin</a></li>
<li><a href="#microshift-oc-mirror-creating-imageset-config_microshift-operators-oc-mirror">Creating an image set configuration file</a></li>
<li><a href="#oc-mirror-mirror-to-mirror_microshift-operators-oc-mirror">Mirroring from mirror to mirror</a></li>
<li><a href="#microshift-oc-mirror-transform-imageset-to-crio_microshift-operators-oc-mirror">Configuring CRI-O for using a registry mirror for Operators</a></li>
<li><a href="#microshift-oc-mirror-install-catalog-in-cluster_microshift-operators-oc-mirror">Installing a custom catalog created with the oc-mirror plugin</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<!-- toc disabled -->
<div class="paragraph">
<p>You can create custom catalogs with widely available Operators and mirror them by using the oc-mirror OpenShift CLI (oc) plugin.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="microshift-olm-red-hat-ops-mirror_microshift-operators-oc-mirror"><a class="anchor" href="#microshift-olm-red-hat-ops-mirror_microshift-operators-oc-mirror"></a>Using Red Hat-provided Operator catalogs and mirror registries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can filter and prune catalogs to get specific Operators and mirror them by using the oc-mirror OpenShift CLI (oc) plugin. You can also use Operators in disconnected settings or embedded in Red Hat Enterprise Linux for Edge (RHEL for Edge) images. To read more details about how to configure your systems for mirroring, use the links in the following "Additional resources" section. If you are ready to deploy Operators from Red Hat-provided Operator catalogs, mirror them, or to embed them in RHEL for Edge images, start with the following section, "Inspecting catalog contents by using the oc-mirror plugin."</p>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/operators/administrator-tasks#olm-restricted-networks">Using Operator Lifecycle Manager on restricted networks</a></p>
</li>
<li>
<p><a href="../../microshift_install_rpm_ostree/microshift-deploy-with-mirror-registry.html#microshift-configuring-hosts-for-mirror_microshift-deployment-mirror">Configuring hosts for mirror registry access</a></p>
</li>
<li>
<p><a href="../../microshift_networking/microshift-disconnected-network-config.html#microshift-disconnected-network-config">Configuring network settings for fully disconnected hosts</a></p>
</li>
<li>
<p><a href="../../microshift_install_rpm_ostree/microshift-deploy-with-mirror-registry.html#microshift-get-mirror-reg-container-image-list_microshift-deploy-with-mirror-registry">Getting the mirror registry container image list</a></p>
</li>
<li>
<p><a href="../../microshift_install_rpm_ostree/microshift-embed-in-rpm-ostree-offline-use.html#microshift-embed-in-rpm-ostree-offline-use">Embedding in a RHEL for Edge image for offline use</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="microshift-using-oc-mirror_microshift-operators-oc-mirror"><a class="anchor" href="#microshift-using-oc-mirror_microshift-operators-oc-mirror"></a>About the oc-mirror plugin for creating a mirror registry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the oc-mirror OpenShift CLI (oc) plugin with MicroShift to filter and prune Operator catalogs. You can then mirror the filtered catalog contents to a mirror registry or use the container images in disconnected or offline deployments with RHEL for Edge.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>MicroShift uses the generally available version (1) of the oc-mirror plugin. Do not use the following procedures with the Technical Preview version (2) of oc-mirror plugin.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can mirror the container images required by the desired Operators locally or to a container mirror registry that supports <a href="https://docs.docker.com/registry/">Docker v2-2</a>, such as Red Hat Quay. The procedure to mirror content from Red Hat-hosted registries connected to the internet to a disconnected image registry is the same, independent of the registry you choose. After you mirror the contents of your catalog, configure each cluster to retrieve this content from your mirror registry.</p>
</div>
<div class="sect2">
<h3 id="microshift-populate-mirror-registry-connectivity_microshift-operators-oc-mirror"><a class="anchor" href="#microshift-populate-mirror-registry-connectivity_microshift-operators-oc-mirror"></a>Connectivity considerations when populating a mirror registry</h3>
<div class="paragraph">
<p>When you populate your registry, you can use one of following connectivity scenarios:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Connected mirroring</dt>
<dd>
<p>If you have a host that can access both the internet and your mirror registry, but not your cluster node, you can directly mirror the content from that machine.</p>
</dd>
<dt class="hdlist1">Disconnected mirroring</dt>
<dd>
<p>If you do not have a host that can access both the internet and your mirror registry, you must mirror the images to a file system and then bring that host or removable media into your disconnected environment.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A container registry must be reachable by every machine in the clusters that you provision. Installing, updating, and other operations, such as relocating workloads, might fail if the registry is unreachable.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To avoid problems caused by an unreachable registry, use the following standard practices:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run mirror registries in a highly available way.</p>
</li>
<li>
<p>Ensure that the mirror registry at least matches the production availability of your clusters.</p>
</li>
</ul>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/installing/disconnected-installation-mirroring#prerequisites_installing-mirroring-disconnected">Installing the oc mirror plugin</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="microshift-oc-mirror-list-operators-catalogs_microshift-operators-oc-mirror"><a class="anchor" href="#microshift-oc-mirror-list-operators-catalogs_microshift-operators-oc-mirror"></a>Inspecting catalog contents by using the oc-mirror plugin</h3>
<div class="paragraph">
<p>Use the following example procedure to select a catalog and list Operators from available OpenShift Container Platform content to add to your oc-mirror plugin image set configuration file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you use your own catalogs and Operators, you can push the images directly to your internal registry.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The OpenShift CLI (<code>oc</code>) is installed.</p>
</li>
<li>
<p>Operator Lifecycle Manager (OLM) is installed.</p>
</li>
<li>
<p>The oc-mirror OpenShift CLI (oc) plugin is installed.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Get a list of available Red&#160;Hat-provided Operator catalogs to filter by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc mirror list operators <span class="nt">--version</span> Branch Build <span class="nt">--catalogs</span></code></pre>
</div>
</div>
</li>
<li>
<p>Get a list of Operators in the Red&#160;Hat Operators catalog by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc mirror list operators &lt;<span class="nt">--catalog</span><span class="o">=</span>&lt;catalog_source&gt;&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specifies your catalog source, such as <code>registry.redhat.io/redhat/redhat-operator-index:vBranch Build</code> or <code>quay.io/operatorhubio/catalog:latest</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select an Operator. For this example, <code>amq-broker-rhel8</code> is selected.</p>
</li>
<li>
<p>Optional: To inspect the channels and versions of the Operator you want to filter, enter the following commands:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Get a list of channels by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc mirror list operators <span class="nt">--catalog</span><span class="o">=</span>registry.redhat.io/redhat/redhat-operator-index:v4.17 <span class="nt">--package</span><span class="o">=</span>amq-broker-rhel8</code></pre>
</div>
</div>
</li>
<li>
<p>Get a list of versions within a channel by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc mirror list operators <span class="nt">--catalog</span><span class="o">=</span>registry.redhat.io/redhat/redhat-operator-index:v4.17 <span class="nt">--package</span><span class="o">=</span>amq-broker-rhel8 <span class="nt">--channel</span><span class="o">=</span>7.11.x</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Create and edit an image set configuration file using the information gathered in this procedure.</p>
</li>
<li>
<p>Mirror the images from the transformed image set configuration file to a mirror registry or disk.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="microshift-oc-mirror-creating-imageset-config_microshift-operators-oc-mirror"><a class="anchor" href="#microshift-oc-mirror-creating-imageset-config_microshift-operators-oc-mirror"></a>Creating an image set configuration file</h3>
<div class="paragraph">
<p>You must create an image set configuration file to mirror catalog contents with the oc-mirror plugin. The image set configuration file defines which Operators to mirror along with other configuration settings for the oc-mirror plugin. After generating a default image set file, you must edit the contents so that remaining entries are compatible with both MicroShift and the Operator you plan to use.</p>
</div>
<div class="paragraph">
<p>You must specify a storage backend in the image set configuration file. This storage backend can be a local directory or a registry that supports <a href="https://docs.docker.com/registry/spec/manifest-v2-2">Docker v2-2</a>. The oc-mirror plugin stores metadata in this storage backend during image set creation.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not delete or modify the metadata that is generated by the oc-mirror plugin. You must use the same storage backend every time you run the oc-mirror plugin for the same mirror registry.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created a container image registry credentials file. See <a href="https://docs.openshift.com/container-platform/4.19/installing/disconnected_install/installing-mirroring-disconnected.html#installation-adding-registry-pull-secret_installing-mirroring-disconnected">Configuring credentials that allow images to be mirrored</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Use the <code>oc mirror init</code> command to create a template for the image set configuration and save it to a file called <code>imageset-config.yaml</code>:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc mirror init <span class="nt">--registry</span> &lt;storage_backend&gt; <span class="o">&gt;</span> imageset-config.yaml <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specifies the location of your storage backend, such as <code>example.com/mirror/oc-mirror-metadata</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Example default image set configuration file</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">kind</span><span class="pi">:</span> <span class="s">ImageSetConfiguration</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">mirror.openshift.io/v1alpha2</span>
<span class="na">storageConfig</span><span class="pi">:</span>
  <span class="na">registry</span><span class="pi">:</span>
    <span class="na">imageURL</span><span class="pi">:</span> <span class="s">registry.example.com/oc-mirror</span>
    <span class="na">skipTLS</span><span class="pi">:</span> <span class="no">false</span>
<span class="na">mirror</span><span class="pi">:</span>
  <span class="na">platform</span><span class="pi">:</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="na">channels</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">stable-4.19</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">ocp</span>
  <span class="na">operators</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">catalog</span><span class="pi">:</span> <span class="s">registry.redhat.io/redhat/redhat-operator-index:v4.19</span>
    <span class="na">packages</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">serverless-operator</span>
      <span class="na">channels</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">stable</span>
  <span class="na">additionalImages</span><span class="pi">:</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">registry.redhat.io/ubi8/ubi:latest</span>
  <span class="na">helm</span><span class="pi">:</span> <span class="pi">{}</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>platform</code> field and related fields are not supported by MicroShift and must be deleted.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify any additional images to include in the image set. If you do not need to specify additional images, delete this field.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Helm is not supported by MicroShift and must be deleted.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Edit the values of your image set configuration file to meet the requirements of both MicroShift and the Operator you want to mirror, like the following example:</p>
<div class="listingblock">
<div class="title">Example edited MicroShift image set configuration file</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">kind</span><span class="pi">:</span> <span class="s">ImageSetConfiguration</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">mirror.openshift.io/v1alpha2</span>
<span class="na">storageConfig</span><span class="pi">:</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="na">registry</span><span class="pi">:</span>
    <span class="na">imageURL</span><span class="pi">:</span> <span class="s">&lt;storage_backend&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="na">skipTLS</span><span class="pi">:</span> <span class="no">false</span>
<span class="na">mirror</span><span class="pi">:</span>
  <span class="na">operators</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">catalog</span><span class="pi">:</span> <span class="s">registry.redhat.io/redhat/redhat-operator-index:v4.19</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="na">packages</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">amq-broker-rhel8</span> <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="na">channels</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">7.11.x</span> <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set the backend location where the image set metadata is saved. This location can be a registry or local directory. It is required to specify <code>storageConfig</code> values.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set the registry URL for the storage backend, such as <code>&lt;example.com/mirror/oc-mirror-metadata</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Set the Operator catalog to retrieve images from.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify the Operator packages to include in the image set. Remove this field to retrieve all packages in the catalog.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Specify only certain channels of the Operator packages to include in the image set. You must always include the default channel for the Operator package even if you do not use the bundles in that channel. You can find the default channel by running the following command: <code>oc mirror list operators --catalog=&lt;catalog_name&gt; --package=&lt;package_name&gt;</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the updated file.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Use the oc-mirror plugin to mirror an image set directly to a target mirror registry.</p>
</li>
<li>
<p>Configure CRI-O.</p>
</li>
<li>
<p>Apply the catalog sources to your clusters.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="oc-mirror-imageset-config-params_microshift-operators-oc-mirror"><a class="anchor" href="#oc-mirror-imageset-config-params_microshift-operators-oc-mirror"></a>Image set configuration parameters</h4>
<div class="paragraph">
<p>The oc-mirror plugin requires an image set configuration file that defines what images to mirror. The following table lists the available parameters for the <code>ImageSetConfiguration</code> resource.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. <code>ImageSetConfiguration</code> parameters</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 40%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Values</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The API version for the <code>ImageSetConfiguration</code> content.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>mirror.openshift.io/v1alpha2</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The configuration of the image set.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.additionalImages</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The additional images configuration of the image set.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Array of objects. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">additionalImages</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">registry.redhat.io/ubi8/ubi:latest</span></code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.additionalImages.name</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The tag or digest of the image to mirror.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>registry.redhat.io/ubi8/ubi:latest</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.blockedImages</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The full tag, digest, or pattern of images to block from mirroring.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Array of strings. For example: <code>docker.io/library/alpine</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Operators configuration of the image set.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Array of objects. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">operators</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">catalog</span><span class="pi">:</span> <span class="s">registry.redhat.io/redhat/redhat-operator-index:vBranch Build</span>
    <span class="na">packages</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">elasticsearch-operator</span>
        <span class="na">minVersion</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2.4.0'</span></code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.catalog</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Operator catalog to include in the image set.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>registry.redhat.io/redhat/redhat-operator-index:v4.18</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.full</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When <code>true</code>, downloads the full catalog, Operator package, or Operator channel.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean. The default value is <code>false</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.packages</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Operator packages configuration.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Array of objects. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">operators</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">catalog</span><span class="pi">:</span> <span class="s">registry.redhat.io/redhat/redhat-operator-index:vBranch Build</span>
    <span class="na">packages</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">elasticsearch-operator</span>
        <span class="na">minVersion</span><span class="pi">:</span> <span class="s1">'</span><span class="s">5.2.3-31'</span></code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.packages.name</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Operator package name to include in the image set</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>elasticsearch-operator</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.packages.channels</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Operator package channel configuration.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.packages.channels.name</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Operator channel name, unique within a package, to include in the image set.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>fast</code> or <code>stable-v4.18</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.packages.channels.maxVersion</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The highest version of the Operator mirror across all channels in which it exists. See the following note for further information.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>5.2.3-31</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.packages.channels.minBundle</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the minimum bundle to include, plus all bundles in the update graph to the channel head. Set this field only if the named bundle has no semantic version metadata.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>bundleName</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.packages.channels.minVersion</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The lowest version of the Operator to mirror across all channels in which it exists. See the following note for further information.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>5.2.3-31</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.packages.maxVersion</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The highest version of the Operator to mirror across all channels in which it exists. See the following note for further information.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>5.2.3-31</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.packages.minVersion</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The lowest version of the Operator to mirror across all channels in which it exists. See the following note for further information.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>5.2.3-31</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.skipDependencies</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <code>true</code>, dependencies of bundles are not included.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean. The default value is <code>false</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.targetCatalog</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An alternative name and optional namespace hierarchy to mirror the referenced catalog as.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>my-namespace/my-operator-catalog</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.targetName</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An alternative name to mirror the referenced catalog as.</p>
</div>
<div class="paragraph">
<p>The <code>targetName</code> parameter is deprecated. Use the <code>targetCatalog</code> parameter instead.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>my-operator-catalog</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror.operators.targetTag</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An alternative tag to append to the <code>targetName</code> or <code>targetCatalog</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>v1</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storageConfig</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The back-end configuration of the image set.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storageConfig.local</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The local back-end configuration of the image set.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storageConfig.local.path</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The path of the directory to contain the image set metadata.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>./path/to/dir/</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storageConfig.registry</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The registry back-end configuration of the image set.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storageConfig.registry.imageURL</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The back-end registry URI. Can optionally include a namespace reference in the URI.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String. For example: <code>quay.io/myuser/imageset:metadata</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storageConfig.registry.skipTLS</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optionally skip TLS verification of the referenced back-end registry.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean. The default value is <code>false</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Using the <code>minVersion</code> and <code>maxVersion</code> properties to filter for a specific Operator version range can result in a multiple channel heads error. The error message states that there are <code>multiple channel heads</code>. This is because when the filter is applied, the update graph of the Operator is truncated.</p>
</div>
<div class="paragraph">
<p>Operator Lifecycle Manager requires that every Operator channel contains versions that form an update graph with exactly one end point, that is, the latest version of the Operator. When the filter range is applied, that graph can turn into two or more separate graphs or a graph that has more than one end point.</p>
</div>
<div class="paragraph">
<p>To avoid this error, do not filter out the latest version of an Operator. If you still run into the error, depending on the Operator, either the <code>maxVersion</code> property must be increased or the <code>minVersion</code> property must be decreased. Because every Operator graph can be different, you might need to adjust these values until the error resolves.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/installing/disconnected-installation-mirroring#oc-mirror-image-set-examples_installing-mirroring-disconnected">Imageset configuration examples</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oc-mirror-mirror-to-mirror_microshift-operators-oc-mirror"><a class="anchor" href="#oc-mirror-mirror-to-mirror_microshift-operators-oc-mirror"></a>Mirroring from mirror to mirror</h3>
<div class="paragraph">
<p>You can use the oc-mirror plugin to mirror an image set directly to a target mirror registry that is accessible during image set creation.</p>
</div>
<div class="paragraph">
<p>You are required to specify a storage backend in the image set configuration file. This storage backend can be a local directory or a Docker v2 registry. The oc-mirror plugin stores metadata in this storage backend during image set creation.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not delete or modify the metadata that is generated by the oc-mirror plugin. You must use the same storage backend every time you run the oc-mirror plugin for the same mirror registry.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the internet to get the necessary container images.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
<li>
<p>You have installed the oc-mirror CLI plugin.</p>
</li>
<li>
<p>You have created the image set configuration file.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the <code>oc mirror</code> command to mirror the images from the specified image set configuration to a specified registry:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc mirror <span class="nt">--config</span><span class="o">=</span>./&lt;imageset-config.yaml&gt; <span class="se">\</span><i class="conum" data-value="1"></i><b>(1)</b>
  docker://registry.example:5000             <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the image set configuration file that you created. For example, <code>imageset-config.yaml</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the registry to mirror the image set file to. The registry must start with <code>docker://</code>. If you specify a top-level namespace for the mirror registry, you must also use this same namespace on subsequent executions.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">Rendering catalog image "registry.example.com/redhat/redhat-operator-index:v{ocp-version}" with file-based catalog</span></code></pre>
</div>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Navigate into the <code>oc-mirror-workspace/</code> directory that was generated.</p>
</li>
<li>
<p>Navigate into the results directory, for example, <code>results-1639608409/</code>.</p>
</li>
<li>
<p>Verify that YAML files are present for the <code>ImageContentSourcePolicy</code> and <code>CatalogSource</code> resources.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>ImageContentSourcePolicy</code> YAML file is used as reference content for manual configuration of CRI-O in MicroShift. You cannot apply the resource directly into a MicroShift cluster.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Convert the <code>ImageContentSourcePolicy</code> YAML content for use in manually configuring CRI-O.</p>
</li>
<li>
<p>If required, mirror the images from mirror to disk for disconnected or offline use.</p>
</li>
<li>
<p>Configure your cluster to use the resources generated by oc-mirror.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Troubleshooting</div>
<ul>
<li>
<p><a href="https://access.redhat.com/solutions/7032017">Unable to retrieve source image</a>.</p>
</li>
</ul>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/installing/disconnected-installation-mirroring#mirroring-image-set-partial">Mirroring an image set in a partially disconnected environment</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/installing/disconnected-installation-mirroring#mirroring-image-set-full">Mirroring an image set in a fully disconnected environment</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="microshift-oc-mirror-transform-imageset-to-crio_microshift-operators-oc-mirror"><a class="anchor" href="#microshift-oc-mirror-transform-imageset-to-crio_microshift-operators-oc-mirror"></a>Configuring CRI-O for using a registry mirror for Operators</h3>
<div class="paragraph">
<p>You must transform the <code>imageContentSourcePolicy.yaml</code> file created with the oc-mirror plugin into a format that is compatible with the CRI-O container runtime configuration used by MicroShift.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The OpenShift CLI (<code>oc</code>) is installed.</p>
</li>
<li>
<p>Operator Lifecycle Manager (OLM) is installed.</p>
</li>
<li>
<p>The oc-mirror OpenShift CLI (oc) plugin is installed.</p>
</li>
<li>
<p>The <code>yq</code> binary is installed.</p>
</li>
<li>
<p><code>ImageContentSourcePolicy</code> and <code>CatalogSource</code> YAML files are available in the <code>oc-mirror-workspace/results-*</code> directory.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Confirm the contents of the <code>imageContentSourcePolicy.yaml</code> file by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">cat </span>oc-mirror-workspace/&lt;results-directory&gt;/imageContentSourcePolicy.yaml <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the <code>results</code> directory name, such as <code>&lt;results-1707148826&gt;</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">apiVersion: operator.openshift.io/v1alpha1
kind: ImageContentSourcePolicy
metadata:
  labels:
    operators.openshift.org/catalog: "true"
  name: operator-0
spec:
  repositoryDigestMirrors:
  - mirrors:
</span><span class="gp">    - registry.&lt;example.com&gt;</span>/amq7
<span class="go">    source: registry.redhat.io/amq7</span></code></pre>
</div>
</div>
</li>
<li>
<p>Transform the <code>imageContentSourcePolicy.yaml</code> into a format ready for CRI-O configuration by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">yq '.spec.repositoryDigestMirrors[] as $</span>item ireduce<span class="o">([]</span><span class="p">;</span> <span class="nb">.</span> + <span class="o">[{</span><span class="s2">"mirror"</span>: <span class="nv">$item</span>.mirrors[], <span class="s2">"source"</span>: <span class="o">(</span><span class="nv">$item</span> | .source<span class="o">)}])</span> | .[] |
<span class="go">  "[[registry]]
      prefix = \"" + .source + "\"
      location = \"" + .mirror + "\"
      mirror-by-digest-only = true
      insecure = true
      "' ./icsp.yaml</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">[[registry]]
      prefix = "registry.redhat.io/amq7"
      location = "registry.example.com/amq7"
      mirror-by-digest-only = true
      insecure = true</span></code></pre>
</div>
</div>
</li>
<li>
<p>Add the output to the CRI-O configuration file in the <code>/etc/containers/registries.conf.d/</code> directory:</p>
<div class="listingblock">
<div class="title">Example <code>crio-config.yaml</code> mirror configuration file</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="pi">[[</span><span class="nv">registry</span><span class="pi">]]</span>
      <span class="s">prefix = "registry.redhat.io/amq7"</span>
      <span class="s">location = "registry.example.com/amq7"</span>
      <span class="s">mirror-by-digest-only = </span><span class="no">true</span>
      <span class="s">insecure = </span><span class="no">true</span>

<span class="pi">[[</span><span class="nv">registry</span><span class="pi">]]</span>
    <span class="s">prefix = ""</span>
    <span class="s">location = "quay.io"</span>
    <span class="s">mirror-by-digest-only = </span><span class="no">true</span>
<span class="pi">[[</span><span class="nv">registry.mirror</span><span class="pi">]]</span>
    <span class="s">location = "&lt;registry_host&gt;:&lt;port&gt;"</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="s">insecure = </span><span class="no">false</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the host name and port of your mirror registry server, for example <code>microshift-quay:8443</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Apply the CRI-O configuration changes by restarting MicroShift with the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>systemctl restart crio</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="microshift-oc-mirror-install-catalog-in-cluster_microshift-operators-oc-mirror"><a class="anchor" href="#microshift-oc-mirror-install-catalog-in-cluster_microshift-operators-oc-mirror"></a>Installing a custom catalog created with the oc-mirror plugin</h3>
<div class="paragraph">
<p>After you mirror your image set to the mirror registry, you must apply the generated <code>CatalogSource</code> custom resource (CR) into the cluster. The <code>CatalogSource</code> CR is used by Operator Lifecycle Manager (OLM) to retrieve information about the available Operators in the mirror registry. You must then create and apply a subscription CR to subscribe to your custom catalog.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You mirrored the image set to your registry mirror.</p>
</li>
<li>
<p>You added image reference information to the CRI-O container runtime configuration.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Apply the catalog source configuration file from the results directory to create the catalog source object by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc apply <span class="nt">-f</span> ./oc-mirror-workspace/results-1708508014/catalogSource-cs-redhat-operator-index.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example catalog source configuration file</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">operators.coreos.com/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">CatalogSource</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">redhat-catalog</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-marketplace</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">sourceType</span><span class="pi">:</span> <span class="s">grpc</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">registry.example.com/redhat/redhat-operator-index:v4.17</span>
  <span class="na">updateStrategy</span><span class="pi">:</span>
    <span class="na">registryPoll</span><span class="pi">:</span>
      <span class="na">interval</span><span class="pi">:</span> <span class="s">60m</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specifies the global namespace. Setting the <code>metadata.namespace</code> to <code>openshift-marketplace</code> enables the catalog to reference catalogs in all namespaces. Subscriptions in any namespace can reference catalogs created in the <code>openshift-marketplace</code> namespace.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">catalogsource.operators.coreos.com/cs-redhat-operator-index created</span></code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the <code>CatalogSource</code> resources were successfully installed by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get catalogsource <span class="nt">--all-namespaces</span></code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the catalog source is running by using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get pods <span class="nt">-n</span> openshift-marketplace</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">NAME                             READY   STATUS    RESTARTS   AGE
cs-redhat-operator-index-4227b   2/2     Running   0          2m5s</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>Subscription</code> CR, similar to the following example:</p>
<div class="listingblock">
<div class="title">Example <code>Subscription</code> CR</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">operators.coreos.com/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Subscription</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">amq-broker</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-operators</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">channel</span><span class="pi">:</span> <span class="s">7.11.x</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">amq-broker-rhel8</span>
  <span class="na">source</span><span class="pi">:</span> <span class="s">cs-redhat-operator-index</span>
  <span class="na">sourceNamespace</span><span class="pi">:</span> <span class="s">openshift-marketplace</span></code></pre>
</div>
</div>
</li>
<li>
<p>Apply the Subscription CR configuration by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc apply <span class="nt">-f</span> ./&lt;my-subscription-cr.yaml&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the name of your subscription, such as <code>my-subscription-cr.yaml</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">subscription.operators.coreos.com/amq-broker created</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/nav-tertiary.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/reformat-html.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/hc-search.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/clipboard.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/collapsible.js" type="text/javascript"></script>
  <script>
  var dk = 'microshift';
  var version = 'Branch Build';

  var distros = {
    'openshift-origin': ['docs_origin', version],
    // specific labels are used for OSD instead of the URL filter, due to its unusual URL structure; assume v4
    'openshift-dedicated': ['docs_dedicated_v4'],
    'openshift-online': ['docs_online', version],
    'openshift-enterprise': ['docs_cp', version],
    'openshift-telco': ['docs_telco', version],
    'openshift-aro' : ['docs_aro', version],
    'openshift-rosa' : ['docs_rosa'],
    'openshift-acs' : ['docs_acs', version],
    'openshift-serverless' : ['docs_serverless', version],
    'openshift-pipelines' : ['docs_pipelines', version],
    'openshift-builds' : ['docs_builds', version],
    'openshift-gitops' : ['docs_gitops', version],
    'openshift-lightspeed' : ['docs_lightspeed', version],
    'openshift-service-mesh' : ['docs_service_mesh', version]
  };

  // only OSD v3 docs have the version variable specified
  if (dk == "openshift-dedicated" && version == "3") {
    distros['openshift-dedicated'] = ['docs_dedicated_v3']
  }

  distros[dk] ? hcSearchCategory.apply(null, distros[dk]) : hcSearchCategory("docs");
  </script>
  <script type="text/javascript">
  /*<![CDATA[*/
  $(document).ready(function() {
    $("[id^='topicGroup']").on('show.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicGroup']").on('hide.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });

    const collapsibleContent = document.getElementsByTagName("details");
    for (var i = 0; i < collapsibleContent.length; i++) {
      collapsibleContent[i].setAttribute("open", "");
    }

  });
  /*]]>*/
  </script>

  <footer id="rh">

    <div class="container">
        <div class="row">

            <div class="col-sm-2">
                <img src="https://assets.openshift.net/content/img/Logo-Red_Hat-OpenShift-A-Reverse-RGB.svg" class="img-fluid" alt="Red Hat" style="height: 30px;">
            </div>

            <div class="col-sm-3">
              <p class="text-nowrap">Copyright  2025 Red Hat, Inc.</p>
            </div>



            <div class="col">
                <nav class="nav">
                    <a target="_blank" href="https://www.redhat.com/en/about/privacy-policy" class="nav-link">Privacy statement</a>
                    <a target="_blank" href="https://www.openshift.com/legal/terms/" class="nav-link">Terms of use</a>
                    <a target="_blank" href="https://www.redhat.com/en/about/all-policies-guidelines" class="nav-link">All policies and guidelines</a>
                    <a id="teconsent"></a>
                </nav>
            </div>
        </div>
    </div>
</footer>
<div id="consent_blackbar" style="z-index: 100; position: fixed"></div>



<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->

  <!-- adjust page css based on breadcrumb and/or resize -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      }
    });

    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      } else if ($(window).width() < 1008) {
        sidebar.classList.remove('wide');
        document.querySelector('#hc-search').classList.remove('wide');
        if (sidebar.classList.contains('open')) {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }
        document.querySelector('.main').style.paddingTop = '0px';
      }
    });

    function adjustSide() {
      sidebar.classList.add('wide');
      document.querySelector('#hc-search').classList.add('wide');
      sidebar.style.display = 'block';
      document.querySelector('.sidebar').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 125), 10) + "px";
      document.querySelector('#hc-search').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 95), 10) + "px";
    }

    function adjustToc() {
      if (document.querySelector('#toc') !== null) {
        document.querySelector('#toc').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      }
    }

    function adjustMain() {
      document.querySelector('html').style.scrollPaddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      document.querySelector('.main').style.paddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight - 70), 10) + "px";
    }

  </script>

  <!-- remove toc active class when page is loaded -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      var tocItems = $("#toc a");

      for (let i = 0; i < tocItems.length; i++) {
        tocItems[i].classList.remove("toc-active");
      }
    })
  </script>

  <!-- maintain sidebar scroll position between page loads -->
  <script type="text/javascript">
    let sidebar = document.querySelector(".sidebar");
    let scrolltop = localStorage.getItem("sidebar-scroll");

    if (scrolltop == null) {
      sidebar.scrollTop = parseInt(top, 10);
    }

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
    });

    window.addEventListener('load', () => {
      sidebar.scrollTo(0, scrolltop)
    })
  </script>

  <!-- open/close the nav -->
  <script type="text/javascript">
    function closeNav() {
      let sidebar = document.querySelector(".sidebar");
      sidebar.style.display = "none";
      sidebar.classList.remove('open');
    }

    function openNav() {
      let sidebar = document.querySelector(".sidebar");
      let hc_search = document.querySelector('#hc-search');
      sidebar.style.display = "block";
      sidebar.style.top = "0px";
      hc_search.style.top = 'unset';
      sidebar.classList.add('open');
    }
  </script>

  <!-- clear and add toc-active to clicked toc link -->
  <script type="text/javascript">
  $("#toc a").click(function() {
    var tocItems = $("#toc a");
    for (let i = 0; i < tocItems.length; i++) {
      tocItems[i].classList.remove("toc-active");
    }
    this.classList.add("toc-active");
  });
  </script>

  <!-- update active toc class when mouse scrolls -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener("wheel", () => {

        const ioConfiguration = {
          "rootMargin": "-120px 0px -400px 0px",
          "threshold": 0
        };

        const observer = new IntersectionObserver(setCurrent, ioConfiguration, entries => {
          entries.forEach(entry => {
            var id = entry.target.getAttribute('id');
            //fight with js
            document.querySelector(`#toc li a[href="#${id}"]`).classList.remove('toc-active');
          });
        });

        //track all h1-4 headings that have an id
        document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
          observer.observe(h);
        });

        //runs when the IntersectionObserver fires
        function setCurrent(e) {
          var allTocLinks = document.querySelectorAll("#toc li a");
          if (allTocLinks !== undefined) {
            e.map(i => {
              if (i.isIntersecting && i.intersectionRatio >= 1) {
                allTocLinks.forEach(link => link.classList.remove("toc-active"));
                document.querySelector(`#toc li a[href="#${i.target.id}"]`).classList.add('toc-active')
              }
            })
          }
        };

        //make clicked toc item active and stop IntersectionObserver
        $("#toc a").click(function() {
          //stop tracking all h1-4 headings that have an id
          document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
            observer.unobserve(h);
          });
          var tocItems = $("#toc a");
          if (tocItems !== undefined) {
            for (let i = 0; i < tocItems.length; i++) {
              tocItems[i].classList.remove("toc-active");
            };
            this.classList.add("toc-active");
          }
        })
      })
    })
  </script>

  <!--handle page scroll top and bottom, add toc-active -->
  <script type="text/javascript">
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active")
          };
          tocItems[tocItems.length - 1].classList.add("toc-active");
        };
      //scroll to top
      if(window.pageYOffset === 0) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active");
          };
          tocItems[0].classList.add("toc-active");
        };
      })
  </script>

  <!-- adjust alerts on mobile -->
  <script type="text/javascript">
    alert = document.querySelector('#support-alert')
    window.addEventListener("wheel", () => {
      if ($(window).width() < 1008) {
        //adjust alert
        if(window.pageYOffset > 0) {
          if(alert !== null) {
            document.querySelector('#support-alert').style.position = "fixed";
            document.querySelector('#support-alert').style.bottom = "0px";
            document.querySelector('#support-alert').style.margin = "5px";
            document.querySelector('#support-alert').style.zIndex = "9999999";
          }
        }
      }
   });
    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        if(alert !== null) {
          document.querySelector('#support-alert').style.removeProperty('position');
          document.querySelector('#support-alert').style.removeProperty('bottom');
          document.querySelector('#support-alert').style.removeProperty('margin');
          document.querySelector('#support-alert').style.removeProperty('zIndex');
        }
      }
    })
  </script>

  <!-- hide footer after 3 seconds -->
  <script type="text/javascript">
    const hideFooter = () => {
      document.querySelector('footer#rh, footer.footer-origin-docs').style.display = "none";
    };

    window.addEventListener('load', function() {
      setTimeout(hideFooter, 3000);
    });
  </script>
</body>
</html>
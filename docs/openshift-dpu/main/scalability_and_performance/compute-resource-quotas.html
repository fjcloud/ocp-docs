

<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  <meta name="robots" content="noindex,nofollow">
  
  <title>Compute Resource Quotas | Scalability and performance | OpenShift Container Platform Branch Build</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css"/>
  <link href="https://docs.okd.io/latest/_stylesheets/search.css" rel="stylesheet" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/autumn.css" rel="stylesheet"  media="screen"/>
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png"/>
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css"/>
  <link href="https://assets.openshift.net/content/osh-nav-footer.css" rel="stylesheet" type="text/css" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/docs.css" rel="stylesheet"  media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/>
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">

  <!-- Adobe DTM -->
  <script src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <!-- End Adobe DTM -->

  <script id="trustarc" src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
        rel="stylesheet">

</head>

<body onload="selectVersion('Branch Build');">
  
<nav id="main">
  <div class="container">
    <div class="row">
      <div class="navbar navbar-default navbar-openshift" role="navigation">
        <div class="navbar-header">
            <a href="#nav-main" class="dropdown-toggle navbar-menu-toggle hidden visible-xs" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          <a class="navbar-brand" href="/"></a>
        </div>
        <div id="nav-main" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="products" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                Products <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-column flex-md-row">
                  <div class="col-xs-12 col-sm-3">
                    <h3>Overview</h3>
                    <ul class="nav flex-column">
                      <li><a target="_blank" href="https://www.openshift.com/products/features/">Features</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/products/pricing/">Pricing</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-9">
                    <h3>Featured Products</h3>
                    <ul class="nav">
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/container-platform/">Red Hat OpenShift Container&nbsp;Platform</a>
                        <p class="d-none d-md-block">Build, deploy and manage your applications across cloud- and on-premise infrastructure</p>
                      </li>
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/dedicated/">Red Hat OpenShift Dedicated</a>
                        <p class="d-none d-md-block">Single-tenant, high-availability Kubernetes clusters in the public cloud</p>
                      </li>

                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/online/">Red Hat OpenShift Online</a>
                        <p class="d-none d-md-block">The fastest way for developers to build, host and scale applications in the public cloud</p>
                      </li>

                      <li class="nav-item">
                        <a target="_blank" href="https://www.openshift.com/products/">All products <span class="fa fa-angle-right"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li id="learn" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Learn <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-md-nowrap">
                  <div class="col-xs-12 col-sm-6">
                    <h3>Learn</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/what-is-openshift/">What is OpenShift</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/get-started/">Get started</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/partners/">Partners</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/success-stories/">Customer success stories</a></li>
                      <li><a target="_blank" href="https://blog.openshift.com">Blog</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/resources/">Resources</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <h3>Technology Topics</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/knative/">Knative</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/security/">Security</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/kubernetes/">Kubernetes</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/service-brokers/">Service Brokers</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Community <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://commons.openshift.org">OpenShift Commons</a></li>
                <li><a target="_blank" href="https://www.okd.io">Open Source (OKD)</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/startups/">Startups</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/grants/">Grants</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Support <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://help.openshift.com">Help Center</a></li>
                <li><a href="https://docs.openshift.com">OpenShift Docs</a></li>
              </ul>
            </li>

            <li><a target="_blank" class="nav-sign-up" href="https://www.openshift.com/trial/">Free Trial</a></li>

            <li><a target="_blank" href="https://console.redhat.com/openshift" class="nav-sign-in">Log In <span class="fa fa-angle-right"></span></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

  
  <div class="container">
    <button id="hc-open-btn" class="open-btn-sm" onclick="openNav()" aria-label="Open"><span class="fa fa-bars" /></button>
    <ol class="breadcrumb hide-for-print">
      

      
      <span>
        <div class="alert alert-danger" role="alert" id="support-alert">
          <strong>This documentation is work in progress and might not be complete or fully tested.</strong> The latest supported version of version 3 is <a href="https://docs.openshift.com/container-platform/3.11/welcome/index.html" class="link-primary" style="color: #545454 !important;">[3.11]</a>. For the most recent version 4, see <a href="https://docs.openshift.com/container-platform/latest/welcome/index.html" style="color: #545454 !important" class="link-primary">[4]</a>.
        </div>
      </span>
      

      

      

      

      

      

      
      

      

      


      

      


      

      

      <li class="sitename">
        <a href="/">
          Documentation</a>
      </li>
      <li class="hidden-xs active">
        
          <a href="../welcome/index.html">OpenShift Container Platform Branch Build</a>
        
      </li>
      <li class="hidden-xs active">
        <a href="../scalability_and_performance/index.html">Scalability and performance</a>
      </li>
      
      
      <li class="hidden-xs active">
        Compute Resource Quotas
      </li>
      
      <span text-align="right" style="float: right !important">
        <a href="https://github.com/openshift/openshift-docs/commits/main/scalability_and_performance/compute-resource-quotas.adoc"><span class="material-icons-outlined" title="Page history">history</span></a>
        
        <a href="https://issues.redhat.com/secure/CreateIssueDetails!init.jspa?pid=12332330&issuetype=1&components=12367614&priority=4&summary=Issue+in+file+scalability_and_performance/compute-resource-quotas.adoc">
          <span class="material-icons-outlined" title="Open an issue">bug_report</span>
        </a>
        <a href="javascript: void(0);" onclick="window.print()"><span class="material-icons-outlined" title="Print page (Save as PDF)">picture_as_pdf</span></a>
        
        
      </span>
      
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas hide-for-print">
        <div class="row-fluid">
          <div id="btn-close">
            <button id="hc-close-btn" onclick="closeNav()" class="close-btn-sm" aria-label="close"><span class="fa fa-times" /></button>
          </div>
          <div id="hc-search">
            <input id="hc-search-input" type="text" aria-label="search">
            <button id="hc-search-btn" aria-label="search"><span class="fa fa-search" /></button>
          </div>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0"><span id="tgSpan0" class="fa fa-angle-right"></span>About</a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
            <li><a class="" href="../welcome/learn_more_about_openshift.html">Learn more about OpenShift Container Platform</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1"><span id="tgSpan1" class="fa fa-angle-down"></span>Scalability and performance</a>
      <ul id="topicGroup1" class="collapse in list-unstyled">
            <li><a class="" href="../scalability_and_performance/index.html">Scalability and performance overview</a></li>
            <li><a class="" href="../scalability_and_performance/telco-core-rds.html">Telco core reference design specifications</a></li>
            <li><a class="" href="../scalability_and_performance/telco-ran-du-rds.html">Telco RAN DU reference design specifications</a></li>
            <li><a class=" active" href="../scalability_and_performance/compute-resource-quotas.html">Compute Resource Quotas</a></li>
            <li><a class="" href="../scalability_and_performance/cnf-understanding-low-latency.html">Understanding low latency</a></li>
            <li><a class="" href="../scalability_and_performance/cnf-tuning-low-latency-nodes-with-perf-profile.html">Tuning nodes for low latency with the performance profile</a></li>
            <li><a class="" href="../scalability_and_performance/cnf-provisioning-low-latency-workloads.html">Provisioning real-time and low latency workloads</a></li>
            <li><a class="" href="../scalability_and_performance/cnf-debugging-low-latency-tuning-status.html">Debugging low latency tuning</a></li>
            <li><a class="" href="../scalability_and_performance/cnf-performing-platform-verification-latency-tests.html">Performing latency tests for platform verification</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div id="hc-search-modal">
        <div id="hc-modal-content">
          <span id="hc-modal-close">&times;</span>
          <div id="hc-search-results-wrapper">
            <div id="hc-search-results"></div>
            <div id="hc-search-progress-indicator" class="text-center search-progress-indicator"><i class="fa fa-circle-o-notch fa-spin" style="font-size:42px"></i></div>
            <div class="text-center">
              <button id="hc-search-more-btn">Show more results</button>
            </div>
          </div>
        </div>
      </div>
      <div class="print-logo" style="display:none;">
        <img src="https://www.redhat.com/cms/managed-files/Logo-Red_Hat-OpenShift-A-Standard-RGB_0_0.svg" alt="print logo"/>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h1>
            Using quotas and limit ranges
          </h1>
        </div>
        
        
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#admin-quota-overview_using-quotas-and-limit-ranges">Resources managed by quota</a>
<ul class="sectlevel2">
<li><a href="#setting-resource-quota-for-extended-resources">Setting resource quota for extended resources</a></li>
<li><a href="#quota-scopes">Quota scopes</a></li>
</ul>
</li>
<li><a href="#admin-quota-usage_using-quotas-and-limit-ranges">Admin quota usage</a>
<ul class="sectlevel2">
<li><a href="#quota-enforcement">Quota enforcement</a></li>
<li><a href="#requests-compared-to-limits">Requests compared to limits</a></li>
<li><a href="#sample-resource-quota-definitions">Sample resource quota definitions</a></li>
<li><a href="#creating-a-quota">Creating a quota</a></li>
<li><a href="#creating-object-count-quotas">Creating object count quotas</a></li>
<li><a href="#viewing-a-quota">Viewing a quota</a></li>
</ul>
</li>
<li><a href="#admin-quota-limits_using-quotas-and-limit-ranges">Setting limit ranges</a>
<ul class="sectlevel2">
<li><a href="#container-limits">Container limits</a></li>
<li><a href="#pod-limits">Pod limits</a></li>
<li><a href="#image-limits">Image limits</a></li>
<li><a href="#image-stream-limits">Image stream limits</a></li>
<li><a href="#counting-of-image-references">Counting of image references</a></li>
<li><a href="#persistentvolumeclaim-limits">PersistentVolumeClaim limits</a></li>
</ul>
</li>
<li><a href="#admin-limit-operations_using-quotas-and-limit-ranges">Limit range operations</a>
<ul class="sectlevel2">
<li><a href="#creating-a-limit-range">Creating a limit range</a></li>
<li><a href="#view-the-limit">View the limit</a></li>
<li><a href="#deleting-a-limit-range">Deleting a limit range</a></li>
</ul>
</li>
</ul>
</div>
<div class="paragraph">
<p>A resource quota, defined by a <code>ResourceQuota</code> object, provides constraints that limit aggregate resource consumption per project. It can limit the quantity of objects that can be created in a project by type, as well as the total amount of compute resources and storage that may be consumed by resources in that project.</p>
</div>
<div class="paragraph">
<p>Using quotas and limit ranges, cluster administrators can set constraints to limit the number of objects or amount of compute resources that are used in your project. This helps cluster administrators better manage and allocate resources across all projects, and ensure that no projects are using more than is appropriate for the cluster size.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Quotas are set by cluster administrators and are scoped to a given project. OpenShift Container Platform project owners can change quotas for their project, but not limit ranges. OpenShift Container Platform users cannot modify quotas or limit ranges.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sections help you understand how to check on your quota and limit range settings, what sorts of things they can constrain, and how you can request or limit compute resources in your own pods and containers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admin-quota-overview_using-quotas-and-limit-ranges"><a class="anchor" href="#admin-quota-overview_using-quotas-and-limit-ranges"></a>Resources managed by quota</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A resource quota, defined by a <code>ResourceQuota</code> object, provides constraints that limit aggregate resource consumption per project. It can limit the quantity
of objects that can be created in a project by type, as well as the total amount of compute resources and storage that may be consumed by resources in that project.</p>
</div>
<div class="paragraph">
<p>The following describes the set of compute resources and object types that may be managed by a quota.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A pod is in a terminal state if <code>status.phase</code> is <code>Failed</code> or <code>Succeeded</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Compute resources managed by quota</caption>
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 72.7273%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cpu</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of CPU requests across all pods in a non-terminal state cannot exceed this value. <code>cpu</code> and <code>requests.cpu</code> are the same value and can be used
interchangeably.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>memory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of memory requests across all pods in a non-terminal state cannot exceed this value. <code>memory</code> and <code>requests.memory</code> are the same value and can
be used interchangeably.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ephemeral-storage</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of local ephemeral storage requests across all pods in a non-terminal state cannot exceed this value. <code>ephemeral-storage</code> and
<code>requests.ephemeral-storage</code> are the same value and can be used interchangeably. This resource is available only if you enabled the ephemeral storage technology preview. This feature is disabled by default.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>requests.cpu</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of CPU requests across all pods in a non-terminal state cannot exceed this value. <code>cpu</code> and <code>requests.cpu</code> are the same value and can be used
interchangeably.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>requests.memory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of memory requests across all pods in a non-terminal state cannot exceed this value. <code>memory</code> and <code>requests.memory</code> are the same value and can
be used interchangeably.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>requests.ephemeral-storage</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of ephemeral storage requests across all pods in a non-terminal state cannot exceed this value. <code>ephemeral-storage</code> and
<code>requests.ephemeral-storage</code> are the same value and can be used interchangeably. This resource is available only if you enabled the ephemeral
storage technology preview. This feature is disabled by default.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>limits.cpu</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of CPU limits across all pods in a non-terminal state cannot exceed this value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>limits.memory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of memory limits across all pods in a non-terminal state cannot exceed this value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>limits.ephemeral-storage</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of ephemeral storage limits across all pods in a non-terminal state cannot exceed this value. This resource is available only if you enabled the
ephemeral storage technology preview. This feature is disabled by default.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Storage resources managed by quota</caption>
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 72.7273%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>requests.storage</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of storage requests across all persistent volume claims in any state cannot exceed this value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>persistentvolumeclaims</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of persistent volume claims that can exist in the project.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>&lt;storage-class-name&gt;.storageclass.storage.k8s.io/requests.storage</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sum of storage requests across all persistent volume claims in any state that have a matching storage class, cannot exceed this value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>&lt;storage-class-name&gt;.storageclass.storage.k8s.io/persistentvolumeclaims</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of persistent volume claims with a matching storage class that can exist in the project.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Object counts managed by quota</caption>
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 72.7273%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pods</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of pods in a non-terminal state that can exist in the project.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>replicationcontrollers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of replication controllers that can exist in the project.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>resourcequotas</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of resource quotas that can exist in the project.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>services</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of services that can exist in the project.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>secrets</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of secrets that can exist in the project.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>configmaps</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of <code>ConfigMap</code> objects that can exist in the project.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>persistentvolumeclaims</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of persistent volume claims that can exist in the project.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>openshift.io/imagestreams</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of image streams that can exist in the project.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can configure an object count quota for these standard namespaced resource types using the <code>count/&lt;resource&gt;.&lt;group&gt;</code> syntax.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create quota &lt;name&gt; <span class="nt">--hard</span><span class="o">=</span>count/&lt;resource&gt;.&lt;group&gt;<span class="o">=</span>&lt;quota&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>&lt;resource&gt;</code> is the name of the resource, and <code>&lt;group&gt;</code> is the API group, if applicable.
Use the <code>kubectl api-resources</code> command for a list of resources and their associated API groups.</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="setting-resource-quota-for-extended-resources"><a class="anchor" href="#setting-resource-quota-for-extended-resources"></a>Setting resource quota for extended resources</h3>
<div class="paragraph">
<p>Overcommitment of resources is not allowed for extended resources, so you must specify <code>requests</code> and <code>limits</code> for the same extended resource in a quota. Currently, only quota items with the prefix <code>requests.</code> are allowed for extended resources. The following is an example scenario of how to set resource quota for the GPU resource <code>nvidia.com/gpu</code>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To determine how many GPUs are available on a node in your cluster, use the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc describe node ip-172-31-27-209.us-west-2.compute.internal | egrep <span class="s1">'Capacity|Allocatable|gpu'</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">
                    openshift.com/gpu-accelerator=true
Capacity:
 nvidia.com/gpu:  2
Allocatable:
 nvidia.com/gpu:  2
 nvidia.com/gpu:  0           0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, 2 GPUs are available.</p>
</div>
</li>
<li>
<p>Use this command to set a quota in the namespace <code>nvidia</code>. In this example, the quota is <code>1</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">cat </span>gpu-quota.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">apiVersion: v1
kind: ResourceQuota
metadata:
  name: gpu-quota
  namespace: nvidia
spec:
  hard:
    requests.nvidia.com/gpu: 1
</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create the quota with the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create <span class="nt">-f</span> gpu-quota.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">resourcequota/gpu-quota created</span></code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the namespace has the correct quota set using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc describe quota gpu-quota <span class="nt">-n</span> nvidia</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">Name:                    gpu-quota
Namespace:               nvidia
Resource                 Used  Hard
--------                 ----  ----
requests.nvidia.com/gpu  0     1</span></code></pre>
</div>
</div>
</li>
<li>
<p>Run a pod that asks for a single GPU with the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create pod gpu-pod.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">apiVersion: v1
kind: Pod
metadata:
  generateName: gpu-pod-s46h7
  namespace: nvidia
spec:
  restartPolicy: OnFailure
  containers:
  - name: rhel7-gpu-pod
    image: rhel7
    env:
      - name: NVIDIA_VISIBLE_DEVICES
        value: all
      - name: NVIDIA_DRIVER_CAPABILITIES
        value: "compute,utility"
      - name: NVIDIA_REQUIRE_CUDA
</span><span class="gp">        value: "cuda&gt;</span><span class="o">=</span>5.0<span class="s2">"
</span><span class="go">
    command: ["sleep"]
    args: ["infinity"]

    resources:
      limits:
        nvidia.com/gpu: 1</span></code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the pod is running bwith the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get pods</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME              READY     STATUS      RESTARTS   AGE
gpu-pod-s46h7     1/1       Running     0          1m</span></code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the quota <code>Used</code> counter is correct by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc describe quota gpu-quota <span class="nt">-n</span> nvidia</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">Name:                    gpu-quota
Namespace:               nvidia
Resource                 Used  Hard
--------                 ----  ----
requests.nvidia.com/gpu  1     1</span></code></pre>
</div>
</div>
</li>
<li>
<p>Using the following command, attempt to create a second GPU pod in the <code>nvidia</code> namespace. This is technically available on the node because it has 2 GPUs:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create <span class="nt">-f</span> gpu-pod.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">Error from server (Forbidden): error when creating "gpu-pod.yaml": pods "gpu-pod-f7z2w" is forbidden: exceeded quota: gpu-quota, requested: requests.nvidia.com/gpu=1, used: requests.nvidia.com/gpu=1, limited: requests.nvidia.com/gpu=1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>Forbidden</code> error message occurs because you have a quota of 1 GPU and this pod tried to allocate a second GPU, which exceeds its quota.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="quota-scopes"><a class="anchor" href="#quota-scopes"></a>Quota scopes</h3>
<div class="paragraph">
<p>Each quota can have an associated set of <em>scopes</em>. A quota only measures usage for a resource if it matches the intersection of enumerated scopes.</p>
</div>
<div class="paragraph">
<p>Adding a scope to a quota restricts the set of resources to which that quota can apply. Specifying a resource outside of the allowed set results in a validation error.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 72.7273%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Scope</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Terminating</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Match pods where <code>spec.activeDeadlineSeconds &gt;= 0</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NotTerminating</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Match pods where <code>spec.activeDeadlineSeconds</code> is <code>nil</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BestEffort</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Match pods that have best effort quality of service for either <code>cpu</code> or <code>memory</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>otBestEffort</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Match pods that do not have best effort quality of service for <code>cpu</code> and <code>memory</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A <code>BestEffort</code> scope restricts a quota to limiting the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pods</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>Terminating</code>, <code>NotTerminating</code>, and <code>NotBestEffort</code> scope restricts a quota to tracking the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pods</code></p>
</li>
<li>
<p><code>memory</code></p>
</li>
<li>
<p><code>requests.memory</code></p>
</li>
<li>
<p><code>limits.memory</code></p>
</li>
<li>
<p><code>cpu</code></p>
</li>
<li>
<p><code>requests.cpu</code></p>
</li>
<li>
<p><code>limits.cpu</code></p>
</li>
<li>
<p><code>ephemeral-storage</code></p>
</li>
<li>
<p><code>requests.ephemeral-storage</code></p>
</li>
<li>
<p><code>limits.ephemeral-storage</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ephemeral storage requests and limits apply only if you enabled the ephemeral storage technology preview. This feature is disabled by default.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Additional resources</div>
<p>See <a href="../applications/quotas/quotas-setting-per-project.html">Resources managed by quotas</a> for more on compute resources.</p>
</div>
<div class="paragraph">
<p>See <a href="../nodes/clusters/nodes-cluster-overcommit.html#nodes-cluster-overcommit-resource-requests_nodes-cluster-overcommit">Quality of Service Classes</a> for more on committing compute resources.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admin-quota-usage_using-quotas-and-limit-ranges"><a class="anchor" href="#admin-quota-usage_using-quotas-and-limit-ranges"></a>Admin quota usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="quota-enforcement"><a class="anchor" href="#quota-enforcement"></a>Quota enforcement</h3>
<div class="paragraph">
<p>After a resource quota for a project is first created, the project restricts the ability to create any new resources that can violate a quota constraint until it has calculated updated usage statistics.</p>
</div>
<div class="paragraph">
<p>After a quota is created and usage statistics are updated, the project accepts the creation of new content. When you create or modify resources, your quota usage is incremented immediately upon the request to create or modify the resource.</p>
</div>
<div class="paragraph">
<p>When you delete a resource, your quota use is decremented during the next full recalculation of quota statistics for the project.</p>
</div>
<div class="paragraph">
<p>A configurable amount of time determines how long it takes to reduce quota usage statistics to their current observed system value.</p>
</div>
<div class="paragraph">
<p>If project modifications exceed a quota usage limit, the server denies the action, and an appropriate error message is returned to the user explaining the
quota constraint violated, and what their currently observed usage stats are in the system.</p>
</div>
</div>
<div class="sect2">
<h3 id="requests-compared-to-limits"><a class="anchor" href="#requests-compared-to-limits"></a>Requests compared to limits</h3>
<div class="paragraph">
<p>When allocating compute resources by quota, each container can specify a request and a limit value each for CPU, memory, and ephemeral storage. Quotas can restrict any of these values.</p>
</div>
<div class="paragraph">
<p>If the quota has a value specified for <code>requests.cpu</code> or <code>requests.memory</code>, then it requires that every incoming container make an explicit request for those resources. If the quota has a value specified for <code>limits.cpu</code> or <code>limits.memory</code>, then it requires that every incoming container specify an explicit limit for those resources.</p>
</div>
</div>
<div class="sect2">
<h3 id="sample-resource-quota-definitions"><a class="anchor" href="#sample-resource-quota-definitions"></a>Sample resource quota definitions</h3>
<div class="listingblock">
<div class="title">Example core-object-counts.yaml</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ResourceQuota</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">core-object-counts</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">hard</span><span class="pi">:</span>
    <span class="na">configmaps</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10"</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="na">persistentvolumeclaims</span><span class="pi">:</span> <span class="s2">"</span><span class="s">4"</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="na">replicationcontrollers</span><span class="pi">:</span> <span class="s2">"</span><span class="s">20"</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="na">secrets</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10"</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="na">services</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10"</span> <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The total number of <code>ConfigMap</code> objects that can exist in the project.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The total number of persistent volume claims (PVCs) that can exist in the project.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The total number of replication controllers that can exist in the project.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The total number of secrets that can exist in the project.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The total number of services that can exist in the project.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example openshift-object-counts.yaml</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ResourceQuota</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">openshift-object-counts</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">hard</span><span class="pi">:</span>
    <span class="s">openshift.io/imagestreams</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10"</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The total number of image streams that can exist in the project.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example compute-resources.yaml</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ResourceQuota</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">compute-resources</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">hard</span><span class="pi">:</span>
    <span class="na">pods</span><span class="pi">:</span> <span class="s2">"</span><span class="s">4"</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="s">requests.cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1"</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="s">requests.memory</span><span class="pi">:</span> <span class="s">1Gi</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="s">requests.ephemeral-storage</span><span class="pi">:</span> <span class="s">2Gi</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="s">limits.cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="s">limits.memory</span><span class="pi">:</span> <span class="s">2Gi</span> <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="s">limits.ephemeral-storage</span><span class="pi">:</span> <span class="s">4Gi</span> <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The total number of pods in a non-terminal state that can exist in the project.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Across all pods in a non-terminal state, the sum of CPU requests cannot exceed 1 core.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Across all pods in a non-terminal state, the sum of memory requests cannot exceed 1Gi.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Across all pods in a non-terminal state, the sum of ephemeral storage requests cannot exceed 2Gi.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Across all pods in a non-terminal state, the sum of CPU limits cannot exceed 2 cores.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Across all pods in a non-terminal state, the sum of memory limits cannot exceed 2Gi.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Across all pods in a non-terminal state, the sum of ephemeral storage limits cannot exceed 4Gi.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example besteffort.yaml</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ResourceQuota</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">besteffort</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">hard</span><span class="pi">:</span>
    <span class="na">pods</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1"</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="na">scopes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">BestEffort</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The total number of pods in a non-terminal state with <strong>BestEffort</strong> quality of service that can exist in the project.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Restricts the quota to only matching pods that have <strong>BestEffort</strong> quality of service for either memory or CPU.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example compute-resources-long-running.yaml</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ResourceQuota</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">compute-resources-long-running</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">hard</span><span class="pi">:</span>
    <span class="na">pods</span><span class="pi">:</span> <span class="s2">"</span><span class="s">4"</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="s">limits.cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">4"</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="s">limits.memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2Gi"</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="s">limits.ephemeral-storage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">4Gi"</span> <i class="conum" data-value="4"></i><b>(4)</b>
  <span class="na">scopes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">NotTerminating</span> <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The total number of pods in a non-terminal state.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Across all pods in a non-terminal state, the sum of CPU limits cannot exceed this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Across all pods in a non-terminal state, the sum of memory limits cannot exceed this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Across all pods in a non-terminal state, the sum of ephemeral storage limits cannot exceed this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Restricts the quota to only matching pods where <code>spec.activeDeadlineSeconds</code> is set to <code>nil</code>. Build pods will fall under <code>NotTerminating</code> unless the <code>RestartNever</code> policy is applied.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example compute-resources-time-bound.yaml</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ResourceQuota</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">compute-resources-time-bound</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">hard</span><span class="pi">:</span>
    <span class="na">pods</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="s">limits.cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1"</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="s">limits.memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1Gi"</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="s">limits.ephemeral-storage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1Gi"</span> <i class="conum" data-value="4"></i><b>(4)</b>
  <span class="na">scopes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Terminating</span> <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The total number of pods in a non-terminal state.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Across all pods in a non-terminal state, the sum of CPU limits cannot exceed this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Across all pods in a non-terminal state, the sum of memory limits cannot exceed this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Across all pods in a non-terminal state, the sum of ephemeral storage limits cannot exceed this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Restricts the quota to only matching pods where <code>spec.activeDeadlineSeconds &gt;=0</code>.  For example, this quota would charge for build pods, but not long running pods such as a web server or database.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example storage-consumption.yaml</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ResourceQuota</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">storage-consumption</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">hard</span><span class="pi">:</span>
    <span class="na">persistentvolumeclaims</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10"</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="s">requests.storage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">50Gi"</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="s">gold.storageclass.storage.k8s.io/requests.storage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10Gi"</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="s">silver.storageclass.storage.k8s.io/requests.storage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">20Gi"</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="s">silver.storageclass.storage.k8s.io/persistentvolumeclaims</span><span class="pi">:</span> <span class="s2">"</span><span class="s">5"</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="s">bronze.storageclass.storage.k8s.io/requests.storage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0"</span> <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="s">bronze.storageclass.storage.k8s.io/persistentvolumeclaims</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0"</span> <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The total number of persistent volume claims in a project</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Across all persistent volume claims in a project, the sum of storage requested cannot exceed this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Across all persistent volume claims in a project, the sum of storage requested in the gold storage class cannot exceed this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Across all persistent volume claims in a project, the sum of storage requested in the silver storage class cannot exceed this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Across all persistent volume claims in a project, the total number of claims in the silver storage class cannot exceed this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Across all persistent volume claims in a project, the sum of storage requested in the bronze storage class cannot exceed this value. When this is set to <code>0</code>, it means bronze storage class cannot request storage.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Across all persistent volume claims in a project, the sum of storage requested in the bronze storage class cannot exceed this value. When this is set to <code>0</code>, it means bronze storage class cannot create claims.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-quota"><a class="anchor" href="#creating-a-quota"></a>Creating a quota</h3>
<div class="paragraph">
<p>To create a quota, first define the quota in a file. Then use that file to apply it to a project. See the Additional resources section for a link describing this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create <span class="nt">-f</span> &lt;resource_quota_definition&gt; <span class="o">[</span><span class="nt">-n</span> &lt;project_name&gt;]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example using the <code>core-object-counts.yaml</code> resource quota definition and the <code>demoproject</code> project name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create <span class="nt">-f</span> core-object-counts.yaml <span class="nt">-n</span> demoproject</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-object-count-quotas"><a class="anchor" href="#creating-object-count-quotas"></a>Creating object count quotas</h3>
<div class="paragraph">
<p>You can create an object count quota for all OpenShift Container Platform standard namespaced resource types, such as <code>BuildConfig</code>, and <code>DeploymentConfig</code>. An object quota count places a defined quota on all standard namespaced resource types.</p>
</div>
<div class="paragraph">
<p>When using a resource quota, an object is charged against the quota if it exists in server storage. These types of quotas are useful to protect against exhaustion of storage resources.</p>
</div>
<div class="paragraph">
<p>To configure an object count quota for a resource, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create quota &lt;name&gt; <span class="nt">--hard</span><span class="o">=</span>count/&lt;resource&gt;.&lt;group&gt;<span class="o">=</span>&lt;quota&gt;,count/&lt;resource&gt;.&lt;group&gt;<span class="o">=</span>&lt;quota&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example showing object count quota:</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create quota <span class="nb">test</span> <span class="nt">--hard</span><span class="o">=</span>count/deployments.extensions<span class="o">=</span>2,count/replicasets.extensions<span class="o">=</span>4,count/pods<span class="o">=</span>3,count/secrets<span class="o">=</span>4
<span class="go">resourcequota "test" created

</span><span class="gp">$</span><span class="w"> </span>oc describe quota <span class="nb">test</span>
<span class="go">Name:                         test
Namespace:                    quota
Resource                      Used  Hard
--------                      ----  ----
count/deployments.extensions  0     2
count/pods                    0     3
count/replicasets.extensions  0     4
count/secrets                 0     4</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This example limits the listed resources to the hard limit in each project in the cluster.</p>
</div>
</div>
<div class="sect2">
<h3 id="viewing-a-quota"><a class="anchor" href="#viewing-a-quota"></a>Viewing a quota</h3>
<div class="paragraph">
<p>You can view usage statistics related to any hard limits defined in a project&#8217;s quota by navigating in the web console to the project&#8217;s <code>Quota</code> page.</p>
</div>
<div class="paragraph">
<p>You can also use the CLI to view quota details:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, get the list of quotas defined in the project. For example, for a project called <code>demoproject</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get quota <span class="nt">-n</span> demoproject
<span class="go">NAME                AGE
besteffort          11m
compute-resources   2m
core-object-counts  29m</span></code></pre>
</div>
</div>
</li>
<li>
<p>Describe the quota you are interested in, for example the <code>core-object-counts</code> quota:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc describe quota core-object-counts <span class="nt">-n</span> demoproject
<span class="go">Name:			core-object-counts
Namespace:		demoproject
Resource		Used	Hard
--------		----	----
configmaps		3	10
persistentvolumeclaims	0	4
replicationcontrollers	3	20
secrets			9	10
services		2	10</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Additional resources</div>
<p>For examples of how to create the file needed to set quotas, see
<a href="../applications/quotas/quotas-setting-per-project.html#quotas-resources-managed_quotas-setting-per-project">Resources managed by quotas</a>.</p>
</div>
<div class="paragraph">
<p>A description of how to allocate <a href="../applications/quotas/quotas-setting-per-project.html#quotas-resources-managed_quotas-setting-per-project">compute resources managed by quota</a>.</p>
</div>
<div class="paragraph">
<p>For information on managing limits and quota on project resources, see
<a href="../applications/projects/working-with-projects.html#working-with-projects-create-project">Working with projects</a>.</p>
</div>
<div class="paragraph">
<p>If a quota has been defined for your project, see <a href="../applications/deployments/what-deployments-are.html">Understanding deployments</a> for considerations in cluster configurations.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admin-quota-limits_using-quotas-and-limit-ranges"><a class="anchor" href="#admin-quota-limits_using-quotas-and-limit-ranges"></a>Setting limit ranges</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A limit range, defined by a <code>LimitRange</code> object, defines compute resource constraints at the pod, container, image, image stream, and persistent volume claim level. The limit range specifies the amount of resources that a pod, container, image, image stream, or persistent volume claim can consume.</p>
</div>
<div class="paragraph">
<p>All requests to create and modify resources are evaluated against each <code>LimitRange</code> object in the project. If the resource violates any of the enumerated constraints, the resource is rejected. If the resource does not set an explicit value, and if the constraint supports a default value, the default value is applied to the resource.</p>
</div>
<div class="paragraph">
<p>For CPU and memory limits, if you specify a maximum value but do not specify a minimum limit, the resource can consume more CPU and memory resources than the maximum value.</p>
</div>
<div class="listingblock">
<div class="title">Core limit range object definition</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">v1"</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s2">"</span><span class="s">LimitRange"</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">core-resource-limits"</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">limits</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Pod"</span>
      <span class="na">max</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span> <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1Gi"</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="na">min</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">200m"</span> <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">6Mi"</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Container"</span>
      <span class="na">max</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span> <i class="conum" data-value="6"></i><b>(6)</b>
        <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1Gi"</span> <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="na">min</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">100m"</span> <i class="conum" data-value="8"></i><b>(8)</b>
        <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">4Mi"</span> <i class="conum" data-value="9"></i><b>(9)</b>
      <span class="na">default</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">300m"</span> <i class="conum" data-value="10"></i><b>(10)</b>
        <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">200Mi"</span> <i class="conum" data-value="11"></i><b>(11)</b>
      <span class="na">defaultRequest</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">200m"</span> <i class="conum" data-value="12"></i><b>(12)</b>
        <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">100Mi"</span> <i class="conum" data-value="13"></i><b>(13)</b>
      <span class="na">maxLimitRequestRatio</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10"</span> <i class="conum" data-value="14"></i><b>(14)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the limit range object.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The maximum amount of CPU that a pod can request on a node across all containers.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The maximum amount of memory that a pod can request on a node across all containers.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The minimum amount of CPU that a pod can request on a node across all containers. If you do not set a <code>min</code> value or you set <code>min</code> to <code>0</code>, the result is no limit and the pod can consume more than the <code>max</code> CPU value.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The minimum amount of memory that a pod can request on a node across all containers. If you do not set a <code>min</code> value or you set <code>min</code> to <code>0</code>, the result is no limit and the pod can consume more than the <code>max</code> memory value.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The maximum amount of CPU that a single container in a pod can request.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The maximum amount of memory that a single container in a pod can request.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>The minimum amount of CPU that a single container in a pod can request. If you do not set a <code>min</code> value or you set <code>min</code> to <code>0</code>, the result is no limit and the pod can consume more than the <code>max</code> CPU value.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>The minimum amount of memory that a single container in a pod can request. If you do not set a <code>min</code> value or you set <code>min</code> to <code>0</code>, the result is no limit and the pod can consume more than the <code>max</code> memory value.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>The default CPU limit for a container if you do not specify a limit in the pod specification.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>The default memory limit for a container if you do not specify a limit in the pod specification.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>The default CPU request for a container if you do not specify a request in the pod specification.</td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td>The default memory request for a container if you do not specify a request in the pod specification.</td>
</tr>
<tr>
<td><i class="conum" data-value="14"></i><b>14</b></td>
<td>The maximum limit-to-request ratio for a container.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">OpenShift Container Platform Limit range object definition</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">v1"</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s2">"</span><span class="s">LimitRange"</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">openshift-resource-limits"</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">limits</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">openshift.io/Image</span>
      <span class="na">max</span><span class="pi">:</span>
        <span class="na">storage</span><span class="pi">:</span> <span class="s">1Gi</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">openshift.io/ImageStream</span>
      <span class="na">max</span><span class="pi">:</span>
        <span class="s">openshift.io/image-tags</span><span class="pi">:</span> <span class="s">20</span> <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="s">openshift.io/images</span><span class="pi">:</span> <span class="s">30</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Pod"</span>
      <span class="na">max</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span> <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1Gi"</span> <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="na">ephemeral-storage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1Gi"</span> <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="na">min</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1"</span> <i class="conum" data-value="7"></i><b>(7)</b>
        <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1Gi"</span> <i class="conum" data-value="8"></i><b>(8)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The maximum size of an image that can be pushed to an internal registry.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The maximum number of unique image tags as defined in the specification for the image stream.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The maximum number of unique image references as defined in the specification for the image stream status.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The maximum amount of CPU that a pod can request on a node across all containers.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The maximum amount of memory that a pod can request on a node across all containers.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The maximum amount of ephemeral storage that a pod can request on a node across all containers.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The minimum amount of CPU that a pod can request on a node across all containers. See the Supported Constraints table for important information.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>The minimum amount of memory that a pod can request on a node across all containers. If you do not set a <code>min</code> value or you set <code>min</code> to <code>0</code>, the result` is no limit and the pod can consume more than the <code>max</code> memory value.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can specify both core and OpenShift Container Platform resources in one limit range object.</p>
</div>
<div class="sect2">
<h3 id="container-limits"><a class="anchor" href="#container-limits"></a>Container limits</h3>
<div class="paragraph">
<p><strong>Supported Resources:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>CPU</p>
</li>
<li>
<p>Memory</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Supported Constraints</div>
<p>Per container, the following must hold true if specified:</p>
</div>
<div class="paragraph">
<p><strong>Container</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 72.7273%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Min</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Min[&lt;resource&gt;]</code> less than or equal to <code>container.resources.requests[&lt;resource&gt;]</code> (required) less than or equal to <code>container/resources.limits[&lt;resource&gt;]</code> (optional)</p>
</div>
<div class="paragraph">
<p>If the configuration defines a <code>min</code> CPU, the request value must be greater than the CPU value. If you do not set a <code>min</code> value or you set <code>min</code> to <code>0</code>, the result is no limit and the pod can consume more of the resource than the <code>max</code> value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Max</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>container.resources.limits[&lt;resource&gt;]</code> (required) less than or equal to <code>Max[&lt;resource&gt;]</code></p>
</div>
<div class="paragraph">
<p>If the configuration defines a <code>max</code> CPU, you do not need to define a CPU request value. However, you must set a limit that satisfies the maximum CPU constraint that is specified in the limit range.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MaxLimitRequestRatio</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MaxLimitRequestRatio[&lt;resource&gt;]</code> less than or equal to (<code>container.resources.limits[&lt;resource&gt;]</code> / <code>container.resources.requests[&lt;resource&gt;]</code>)</p>
</div>
<div class="paragraph">
<p>If the limit range defines a <code>maxLimitRequestRatio</code> constraint, any new containers must have both a <code>request</code> and a <code>limit</code> value. Additionally, OpenShift Container Platform calculates a limit-to-request ratio by dividing the <code>limit</code> by the <code>request</code>. The result should be an integer greater than 1.</p>
</div>
<div class="paragraph">
<p>For example, if a container has <code>cpu: 500</code> in the <code>limit</code> value, and <code>cpu: 100</code> in the <code>request</code> value, the limit-to-request ratio for <code>cpu</code> is <code>5</code>. This ratio must be less than or equal to the <code>maxLimitRequestRatio</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Supported Defaults:</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>Default[&lt;resource&gt;]</code></dt>
<dd>
<p>Defaults <code>container.resources.limit[&lt;resource&gt;]</code> to specified value if none.</p>
</dd>
<dt class="hdlist1"><code>Default Requests[&lt;resource&gt;]</code></dt>
<dd>
<p>Defaults <code>container.resources.requests[&lt;resource&gt;]</code> to specified value if none.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="pod-limits"><a class="anchor" href="#pod-limits"></a>Pod limits</h3>
<div class="paragraph">
<p><strong>Supported Resources:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>CPU</p>
</li>
<li>
<p>Memory</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Supported Constraints:</strong></p>
</div>
<div class="paragraph">
<p>Across all containers in a pod, the following must hold true:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Pod</caption>
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 72.7273%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Enforced Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Min</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Min[&lt;resource&gt;]</code> less than or equal to <code>container.resources.requests[&lt;resource&gt;]</code> (required) less than or equal to <code>container.resources.limits[&lt;resource&gt;]</code>. If you do not set a <code>min</code> value or you set <code>min</code> to <code>0</code>, the result is no limit and the pod can consume more of the resource than the <code>max</code> value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Max</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>container.resources.limits[&lt;resource&gt;]</code> (required) less than or equal to <code>Max[&lt;resource&gt;]</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MaxLimitRequestRatio</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MaxLimitRequestRatio[&lt;resource&gt;]</code> less than or equal to (<code>container.resources.limits[&lt;resource&gt;]</code> / <code>container.resources.requests[&lt;resource&gt;]</code>).</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="image-limits"><a class="anchor" href="#image-limits"></a>Image limits</h3>
<div class="paragraph">
<p>Supported Resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Storage</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Resource type name:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>openshift.io/Image</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Per image, the following must hold true if specified:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Image</caption>
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 72.7273%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Max</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>image.dockerimagemetadata.size</code> less than or equal to <code>Max[&lt;resource&gt;]</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To prevent blobs that exceed the limit from being uploaded to the registry, the registry must be configured to enforce quota. The <code>REGISTRY_MIDDLEWARE_REPOSITORY_OPENSHIFT_ENFORCEQUOTA</code> environment variable must be set to <code>true</code>. By default, the environment variable is set to <code>true</code> for new deployments.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="image-stream-limits"><a class="anchor" href="#image-stream-limits"></a>Image stream limits</h3>
<div class="paragraph">
<p><strong>Supported Resources:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>openshift.io/image-tags</code></p>
</li>
<li>
<p><code>openshift.io/images</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Resource type name:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>openshift.io/ImageStream</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Per image stream, the following must hold true if specified:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. ImageStream</caption>
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 72.7273%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Max[openshift.io/image-tags]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>length( uniqueimagetags( imagestream.spec.tags ) )</code> less than or equal to <code>Max[openshift.io/image-tags]</code></p>
</div>
<div class="paragraph">
<p><code>uniqueimagetags</code> returns unique references to images of given spec tags.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Max[openshift.io/images]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>length( uniqueimages( imagestream.status.tags ) )</code> less than or equal to <code>Max[openshift.io/images]</code></p>
</div>
<div class="paragraph">
<p><code>uniqueimages</code> returns unique image names found in status tags. The name is equal to the digest for the image.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="counting-of-image-references"><a class="anchor" href="#counting-of-image-references"></a>Counting of image references</h3>
<div class="paragraph">
<p>The <code>openshift.io/image-tags</code> resource represents unique stream limits. Possible references are an <code>ImageStreamTag</code>, an <code>ImageStreamImage</code>, or a <code>DockerImage</code>. Tags can be created by using the <code>oc tag</code> and <code>oc import-image</code> commands or by using image streams. No distinction is made between internal and external references. However, each unique reference that is tagged in an image stream specification is counted just once. It does not restrict pushes to an internal container image registry in any way, but is useful for tag restriction.</p>
</div>
<div class="paragraph">
<p>The <code>openshift.io/images</code> resource represents unique image names that are recorded in image stream status. It helps to restrict several images that can be pushed to the internal registry. Internal and external references are not distinguished.</p>
</div>
</div>
<div class="sect2">
<h3 id="persistentvolumeclaim-limits"><a class="anchor" href="#persistentvolumeclaim-limits"></a>PersistentVolumeClaim limits</h3>
<div class="paragraph">
<p><strong>Supported Resources:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Storage</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Supported Constraints:</strong></p>
</div>
<div class="paragraph">
<p>Across all persistent volume claims in a project, the following must hold true:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Pod</caption>
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 72.7273%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Enforced Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Min</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Min[&lt;resource&gt;] &lt;= claim.spec.resources.requests[&lt;resource&gt;] (required)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Max</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>claim.spec.resources.requests[&lt;resource&gt;] (required) &lt;= Max[&lt;resource&gt;]</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="limit-range-obj-def" class="listingblock">
<div class="title">Limit Range Object Definition</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LimitRange"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pvcs"</span><span class="w"> <i class="conum" data-value="1"></i><b>(1)</b>
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"spec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PersistentVolumeClaim"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"storage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2Gi"</span><span class="w"> <i class="conum" data-value="2"></i><b>(2)</b>
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"storage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50Gi"</span><span class="w"> <i class="conum" data-value="3"></i><b>(3)</b>
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the limit range object.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The minimum amount of storage that can be requested in a persistent volume claim.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The maximum amount of storage that can be requested in a persistent volume claim.</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Additional resources</div>
<p>For information on stream limits, see <a href="../openshift_images/image-streams-manage.html#images-imagestream-use_image-streams-managing">managing images streams</a>.</p>
</div>
<div class="paragraph">
<p>For information on <a href="../nodes/clusters/nodes-cluster-limit-ranges.html#nodes-cluster-limit-stream-limits">stream limits</a>.</p>
</div>
<div class="paragraph">
<p>For more information on <a href="../nodes/clusters/nodes-cluster-limit-ranges.html#nodes-cluster-limit-ranges-about_nodes-cluster-limit-ranges">compute resource constraints</a>.</p>
</div>
<div class="paragraph">
<p>For more information on how CPU and memory are measured, see <a href="../scalability_and_performance/recommended-performance-scale-practices/recommended-control-plane-practices.html#recommended-scale-practices_recommended-control-plane-practices">Recommended control plane practices</a>.</p>
</div>
<div class="paragraph">
<p>You can specify limits and requests for ephemeral storage. For more information on this feature, see <a href="../storage/understanding-ephemeral-storage.html#storage-ephemeral-storage-overview_understanding-ephemeral-storage">Understanding ephemeral storage</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admin-limit-operations_using-quotas-and-limit-ranges"><a class="anchor" href="#admin-limit-operations_using-quotas-and-limit-ranges"></a>Limit range operations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="creating-a-limit-range"><a class="anchor" href="#creating-a-limit-range"></a>Creating a limit range</h3>
<div class="paragraph">
<p>Shown here is an example procedure to follow for creating a limit range.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create the object:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc create <span class="nt">-f</span> &lt;limit_range_file&gt; <span class="nt">-n</span> &lt;project&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="view-the-limit"><a class="anchor" href="#view-the-limit"></a>View the limit</h3>
<div class="paragraph">
<p>You can view any limit ranges that are defined in a project by navigating in the web console to the <code>Quota</code> page for the project. You can also use the CLI to view limit range details by performing the following steps:</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Get the list of limit range objects that are defined in the project. For example, a project called <code>demoproject</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get limits <span class="nt">-n</span> demoproject</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">NAME              AGE
resource-limits   6d</span></code></pre>
</div>
</div>
</li>
<li>
<p>Describe the limit range. For example, for a limit range called <code>resource-limits</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc describe limits resource-limits <span class="nt">-n</span> demoproject</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">Name:                           resource-limits
Namespace:                      demoproject
Type                            Resource                Min     Max     Default Request Default Limit   Max Limit/Request Ratio
----                            --------                ---     ---     --------------- -------------   -----------------------
Pod                             cpu                     200m    2       -               -               -
Pod                             memory                  6Mi     1Gi     -               -               -
Container                       cpu                     100m    2       200m            300m            10
Container                       memory                  4Mi     1Gi     100Mi           200Mi           -
openshift.io/Image              storage                 -       1Gi     -               -               -
openshift.io/ImageStream        openshift.io/image      -       12      -               -               -
openshift.io/ImageStream        openshift.io/image-tags -       10      -               -               -</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="deleting-a-limit-range"><a class="anchor" href="#deleting-a-limit-range"></a>Deleting a limit range</h3>
<div class="paragraph">
<p>To remove a limit range, run the following command:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc delete limits &lt;limit_name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>S</p>
</div>
<div class="paragraph">
<div class="title">Additional resources</div>
<p>For information about enforcing different limits on the number of projects that your users can create, managing limits, and quota on project resources, see <a href="../applications/quotas/quotas-setting-per-project.html">Resource quotas per projects</a>.</p>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/nav-tertiary.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/reformat-html.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/hc-search.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/clipboard.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/collapsible.js" type="text/javascript"></script>
  <script>
  var dk = 'openshift-dpu';
  var version = 'Branch Build';

  var distros = {
    'openshift-origin': ['docs_origin', version],
    // specific labels are used for OSD instead of the URL filter, due to its unusual URL structure; assume v4
    'openshift-dedicated': ['docs_dedicated_v4'],
    'openshift-online': ['docs_online', version],
    'openshift-enterprise': ['docs_cp', version],
    'openshift-telco': ['docs_telco', version],
    'openshift-aro' : ['docs_aro', version],
    'openshift-rosa' : ['docs_rosa'],
    'openshift-acs' : ['docs_acs', version],
    'openshift-serverless' : ['docs_serverless', version],
    'openshift-pipelines' : ['docs_pipelines', version],
    'openshift-builds' : ['docs_builds', version],
    'openshift-gitops' : ['docs_gitops', version],
    'openshift-lightspeed' : ['docs_lightspeed', version],
    'openshift-service-mesh' : ['docs_service_mesh', version]
  };

  // only OSD v3 docs have the version variable specified
  if (dk == "openshift-dedicated" && version == "3") {
    distros['openshift-dedicated'] = ['docs_dedicated_v3']
  }

  distros[dk] ? hcSearchCategory.apply(null, distros[dk]) : hcSearchCategory("docs");
  </script>
  <script type="text/javascript">
  /*<![CDATA[*/
  $(document).ready(function() {
    $("[id^='topicGroup']").on('show.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicGroup']").on('hide.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });

    const collapsibleContent = document.getElementsByTagName("details");
    for (var i = 0; i < collapsibleContent.length; i++) {
      collapsibleContent[i].setAttribute("open", "");
    }

  });
  /*]]>*/
  </script>

  <footer id="rh">

    <div class="container">
        <div class="row">

            <div class="col-sm-2">
                <img src="https://assets.openshift.net/content/img/Logo-Red_Hat-OpenShift-A-Reverse-RGB.svg" class="img-fluid" alt="Red Hat" style="height: 30px;">
            </div>

            <div class="col-sm-3">
              <p class="text-nowrap">Copyright  2025 Red Hat, Inc.</p>
            </div>



            <div class="col">
                <nav class="nav">
                    <a target="_blank" href="https://www.redhat.com/en/about/privacy-policy" class="nav-link">Privacy statement</a>
                    <a target="_blank" href="https://www.openshift.com/legal/terms/" class="nav-link">Terms of use</a>
                    <a target="_blank" href="https://www.redhat.com/en/about/all-policies-guidelines" class="nav-link">All policies and guidelines</a>
                    <a id="teconsent"></a>
                </nav>
            </div>
        </div>
    </div>
</footer>
<div id="consent_blackbar" style="z-index: 100; position: fixed"></div>



<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->

  <!-- adjust page css based on breadcrumb and/or resize -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      }
    });

    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      } else if ($(window).width() < 1008) {
        sidebar.classList.remove('wide');
        document.querySelector('#hc-search').classList.remove('wide');
        if (sidebar.classList.contains('open')) {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }
        document.querySelector('.main').style.paddingTop = '0px';
      }
    });

    function adjustSide() {
      sidebar.classList.add('wide');
      document.querySelector('#hc-search').classList.add('wide');
      sidebar.style.display = 'block';
      document.querySelector('.sidebar').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 125), 10) + "px";
      document.querySelector('#hc-search').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 95), 10) + "px";
    }

    function adjustToc() {
      if (document.querySelector('#toc') !== null) {
        document.querySelector('#toc').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      }
    }

    function adjustMain() {
      document.querySelector('html').style.scrollPaddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      document.querySelector('.main').style.paddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight - 70), 10) + "px";
    }

  </script>

  <!-- remove toc active class when page is loaded -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      var tocItems = $("#toc a");

      for (let i = 0; i < tocItems.length; i++) {
        tocItems[i].classList.remove("toc-active");
      }
    })
  </script>

  <!-- maintain sidebar scroll position between page loads -->
  <script type="text/javascript">
    let sidebar = document.querySelector(".sidebar");
    let scrolltop = localStorage.getItem("sidebar-scroll");

    if (scrolltop == null) {
      sidebar.scrollTop = parseInt(top, 10);
    }

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
    });

    window.addEventListener('load', () => {
      sidebar.scrollTo(0, scrolltop)
    })
  </script>

  <!-- open/close the nav -->
  <script type="text/javascript">
    function closeNav() {
      let sidebar = document.querySelector(".sidebar");
      sidebar.style.display = "none";
      sidebar.classList.remove('open');
    }

    function openNav() {
      let sidebar = document.querySelector(".sidebar");
      let hc_search = document.querySelector('#hc-search');
      sidebar.style.display = "block";
      sidebar.style.top = "0px";
      hc_search.style.top = 'unset';
      sidebar.classList.add('open');
    }
  </script>

  <!-- clear and add toc-active to clicked toc link -->
  <script type="text/javascript">
  $("#toc a").click(function() {
    var tocItems = $("#toc a");
    for (let i = 0; i < tocItems.length; i++) {
      tocItems[i].classList.remove("toc-active");
    }
    this.classList.add("toc-active");
  });
  </script>

  <!-- update active toc class when mouse scrolls -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener("wheel", () => {

        const ioConfiguration = {
          "rootMargin": "-120px 0px -400px 0px",
          "threshold": 0
        };

        const observer = new IntersectionObserver(setCurrent, ioConfiguration, entries => {
          entries.forEach(entry => {
            var id = entry.target.getAttribute('id');
            //fight with js
            document.querySelector(`#toc li a[href="#${id}"]`).classList.remove('toc-active');
          });
        });

        //track all h1-4 headings that have an id
        document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
          observer.observe(h);
        });

        //runs when the IntersectionObserver fires
        function setCurrent(e) {
          var allTocLinks = document.querySelectorAll("#toc li a");
          if (allTocLinks !== undefined) {
            e.map(i => {
              if (i.isIntersecting && i.intersectionRatio >= 1) {
                allTocLinks.forEach(link => link.classList.remove("toc-active"));
                document.querySelector(`#toc li a[href="#${i.target.id}"]`).classList.add('toc-active')
              }
            })
          }
        };

        //make clicked toc item active and stop IntersectionObserver
        $("#toc a").click(function() {
          //stop tracking all h1-4 headings that have an id
          document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
            observer.unobserve(h);
          });
          var tocItems = $("#toc a");
          if (tocItems !== undefined) {
            for (let i = 0; i < tocItems.length; i++) {
              tocItems[i].classList.remove("toc-active");
            };
            this.classList.add("toc-active");
          }
        })
      })
    })
  </script>

  <!--handle page scroll top and bottom, add toc-active -->
  <script type="text/javascript">
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active")
          };
          tocItems[tocItems.length - 1].classList.add("toc-active");
        };
      //scroll to top
      if(window.pageYOffset === 0) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active");
          };
          tocItems[0].classList.add("toc-active");
        };
      })
  </script>

  <!-- adjust alerts on mobile -->
  <script type="text/javascript">
    alert = document.querySelector('#support-alert')
    window.addEventListener("wheel", () => {
      if ($(window).width() < 1008) {
        //adjust alert
        if(window.pageYOffset > 0) {
          if(alert !== null) {
            document.querySelector('#support-alert').style.position = "fixed";
            document.querySelector('#support-alert').style.bottom = "0px";
            document.querySelector('#support-alert').style.margin = "5px";
            document.querySelector('#support-alert').style.zIndex = "9999999";
          }
        }
      }
   });
    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        if(alert !== null) {
          document.querySelector('#support-alert').style.removeProperty('position');
          document.querySelector('#support-alert').style.removeProperty('bottom');
          document.querySelector('#support-alert').style.removeProperty('margin');
          document.querySelector('#support-alert').style.removeProperty('zIndex');
        }
      }
    })
  </script>

  <!-- hide footer after 3 seconds -->
  <script type="text/javascript">
    const hideFooter = () => {
      document.querySelector('footer#rh, footer.footer-origin-docs').style.display = "none";
    };

    window.addEventListener('load', function() {
      setTimeout(hideFooter, 3000);
    });
  </script>
</body>
</html>